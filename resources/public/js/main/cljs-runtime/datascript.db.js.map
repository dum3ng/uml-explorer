{"version":3,"sources":["datascript/db.cljc"],"mappings":";AAaG,AACE,AAAKA,0BAAUC;;AACf,AAAKC,yCAAyBD;;AAC9B,AAAKE,8CAA8BF;AAExC,mBAAA,nBAAaG;AACb,oBAAA,pBAAaC;AACb,qBAAA,rBAAaC;AACb,sBAAA,tBAAaC;AACb,gCAAA,2CAAA,uDAAA,2CAAA,2DAAA,xOAAaC;AAUb,+BAAA,/BAC0BC,sEACvBC;AAFH,AAGE,SAAK,GAAK,OAASA,sBACV,EAAI,AAACC,yBAAmBD,QACpB,AAACE,oDAAcF;;AAsB9B,AAAKG,sBAAM,4DAAA,5DAACC,6CAAKC;AACjB,AAAKC,sBAAM,4DAAA,5DAACF,6CAAKC;AAEjB;;;+BAAA,/BAAME,sEAEHC,EAAEC,KAAKC;AAFV,AAGE,OAACC,gBACC,AAACC,+CACC,WAAAC,SAAeb;AAAf,AAAA,IAAAc,aAAAD;UAAA,AAAAE,4CAAAD,WAAA,IAAA,jEAAME;UAAN,AAAAD,4CAAAD,WAAA,IAAA,jEAAUG;AAAV,AACE,IAAMC,MAAI,CAACV,kCAAAA,6CAAAA,bAAEQ,yBAAAA,rBAAIhB,yBAAAA,vBAAEiB,yBAAAA;AAAnB,AACE,GAAI,AAACE,yBAASD;AACZ,yBAAA,lBAACE,qGAASF,IAAID;;AADhB,0FAEGC,IAAI,OAAA,NAAKD;;GALlB,wFAAA,LAMGR,iBACDC;;AASN;;;gCAAA,hCAAOW,wEAEJC;AAFH,AAGE,OAACC,mBAAQ,AAAA,8EAAKD;;AAShB,+BAAA,/BAAME,sEAAgBxB,EAAEyB;AAAxB,AAEW,OAACC,uBAAa1B,EAAEyB;;AAoD3B,AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,AAEA,AAAA;AAAA;;;uBAAA,vBAAae;;AAAb,IAAAb,0CAAA,WACac;AADb,AAAA,IAAAb,kBAAA,EAAA,UAAA,OAAA,hBACaa,qBAAAA;IADbZ,kBAAA,CAAAC,uBAAA,AAAAC,YAAAH;AAAA,AAAA,GAAA,GAAA,CAAAC,mBAAA;AAAA,QAAAA,gDAAAA,uDAAAA,TACaY,mCAAAA;;AADb,IAAAT,kBAAA,CAAAF,uBAAA;AAAA,AAAA,GAAA,GAAA,CAAAE,mBAAA;AAAA,QAAAA,gDAAAA,uDAAAA,TACaS,mCAAAA;;AADb,MAAA,AAAAR,2BAAA,kBACaQ;;;;AADb,AAAA,yBAAA,zBACGX,0DAAUW;AADb,AAAA,GAAA,EAAA,GAAA,UAAA,aAAA,GAAA,CAAA,+CAAA,zEACaA,0BAAAA;AADb,OACaA,4CAAAA;;AADb,OAAAd,wCACac;;;;AADb,IAAAP,6CAAA,WAEgBO;AAFhB,AAAA,IAAAb,kBAAA,EAAA,UAAA,OAAA,hBAEgBa,qBAAAA;IAFhBZ,kBAAA,CAAAM,0BAAA,AAAAJ,YAAAH;AAAA,AAAA,GAAA,GAAA,CAAAC,mBAAA;AAAA,QAAAA,gDAAAA,uDAAAA,TAEgBY,mCAAAA;;AAFhB,IAAAT,kBAAA,CAAAG,0BAAA;AAAA,AAAA,GAAA,GAAA,CAAAH,mBAAA;AAAA,QAAAA,gDAAAA,uDAAAA,TAEgBS,mCAAAA;;AAFhB,MAAA,AAAAR,2BAAA,qBAEgBQ;;;;AAFhB,AAAA,4BAAA,5BAEGN,gEAAaM;AAFhB,AAAA,GAAA,EAAA,GAAA,UAAA,aAAA,GAAA,CAAA,kDAAA,5EAEgBA,0BAAAA;AAFhB,OAEgBA,+CAAAA;;AAFhB,OAAAP,2CAEgBO;;;;AAFhB,IAAAL,+CAAA,WAGkBK;AAHlB,AAAA,IAAAb,kBAAA,EAAA,UAAA,OAAA,hBAGkBa,qBAAAA;IAHlBZ,kBAAA,CAAAQ,4BAAA,AAAAN,YAAAH;AAAA,AAAA,GAAA,GAAA,CAAAC,mBAAA;AAAA,QAAAA,gDAAAA,uDAAAA,TAGkBY,mCAAAA;;AAHlB,IAAAT,kBAAA,CAAAK,4BAAA;AAAA,AAAA,GAAA,GAAA,CAAAL,mBAAA;AAAA,QAAAA,gDAAAA,uDAAAA,TAGkBS,mCAAAA;;AAHlB,MAAA,AAAAR,2BAAA,uBAGkBQ;;;;AAHlB,AAAA,8BAAA,9BAGGJ,oEAAeI;AAHlB,AAAA,GAAA,EAAA,GAAA,UAAA,aAAA,GAAA,CAAA,oDAAA,9EAGkBA,0BAAAA;AAHlB,OAGkBA,iDAAAA;;AAHlB,OAAAL,6CAGkBK;;;;AAHlB,IAAAH,+CAAA,WAIkBG,MAAKC;AAJvB,AAAA,IAAAd,kBAAA,EAAA,UAAA,OAAA,hBAIkBa,qBAAAA;IAJlBZ,kBAAA,CAAAU,4BAAA,AAAAR,YAAAH;AAAA,AAAA,GAAA,GAAA,CAAAC,mBAAA;AAAA,QAAAA,gDAAAA,6DAAAA,fAIkBY,yCAAAA,nCAAKC,yCAAAA;;AAJvB,IAAAV,kBAAA,CAAAO,4BAAA;AAAA,AAAA,GAAA,GAAA,CAAAP,mBAAA;AAAA,QAAAA,gDAAAA,6DAAAA,fAIkBS,yCAAAA,nCAAKC,yCAAAA;;AAJvB,MAAA,AAAAT,2BAAA,uBAIkBQ;;;;AAJlB,AAAA,8BAAA,9BAIGF,oEAAeE,MAAKC;AAJvB,AAAA,GAAA,EAAA,GAAA,UAAA,aAAA,GAAA,CAAA,oDAAA,9EAIkBD,0BAAAA;AAJlB,OAIkBA,iDAAAA,MAAKC;;AAJvB,OAAAJ,6CAIkBG,MAAKC;;;;AAJvB,AAMA,AAAA;;;;;;;;;;;;;;;;;;;;;;AAAA,AAAA,CAAA,AAAA,sDAAAC,tDAASK;;AAAT,CAAA,AAAA,sEAAA,tEAASA,iFAGIO;;AAHb,AAAA,YAAA,RAGaA;AAHb,AAGgB,GAAI,aAAA,ZAAMF;AAAIA;;AAAG,UAAGA;;;;AAHpC,CAAA,AAAA,yEAAA,zEAASL,oFAIOO;;AAJhB,AAAA,YAAA,RAIgBA;AAJhB,AAImB,oBAAA,ZAAMF;;;AAJzB,CAAA,AAAA,2EAAA,3EAASL,sFAKSQ;;AALlB,AAAA,YAAA,RAKkBA;AALlB,AAKqBvC;;;AALrB,CAAA,AAAA,2EAAA,3EAAS+B,sFAMSQ,EAAEd;;AANpB,AAAA,YAAA,RAMkBc;AANlB,AAM2B,QAAMvC,aAAI,SAAA,RAAKyB;;;AAN1C,CAAA,AAAA,8DAAA,9DAASM,yEAUOO;;AAVhB,AAAA,YAAA,RAUgBA;AAVhB,AAUmB,GAAI,kBAAA,jBAAOD;AACT,QAAMA,eAAM,CAACG,yDAAAA,gEAAAA,TAAWF,4CAAAA;;AACxBD;;;;AAZrB,CAAA,AAAA,gEAAA,hEAASN,2EAcQO,EAAEG;;AAdnB,AAAA,YAAA,RAciBH;AAdjB,AAcsB,IAAAI,oBAAK,cAAWX,bAAMU;AAAtB,AAAA,GAAAC;AAAyB,QAACC,0DAAAA,mEAAAA,XAAYL,+CAAAA,zCAAEG,+CAAAA;;AAAxCC;;;;AAdtB,CAAA,AAAA,gEAAA,hEAASX,2EAiBMO;;AAjBf,AAAA,YAAA,RAiBeA;AAjBf,AAiBkB,QAACM,wDAAAA,+DAAAA,TAAUN,2CAAAA;;;AAjB7B,CAAA,AAAA,kEAAA,lEAASP,6EAoBSO,EAAEO;;AApBpB,AAAA,YAAA,RAoBkBP;AApBlB,AAoBuB,oIAAA,qDAAA,jLAACQ,2DAAAA,yEAAAA,hBAAaR,qDAAAA,/CAAEO,qDAAAA;;;AApBvC,CAAA,AAAA,kEAAA,lEAASd,6EAqBSO,EAAEO,EAAEE;;AArBtB,AAAA,YAAA,RAqBkBT;AArBlB,AAqB0B,QAACQ,2DAAAA,uEAAAA,dAAaR,mDAAAA,7CAAEO,mDAAAA,jDAAEE,mDAAAA;;;AArB5C,CAAA,AAAA,gEAAA,hEAAShB,2EAwBMP,MAAKwB;;AAxBpB,AAAA,gBAAA,ZAwBexB;AAxBf,AAwBuB,QAACyB,wDAAAA,qEAAAA,fAAUzB,iDAAAA,vCAAKwB,iDAAAA;;;AAxBvC,CAAA,AAAA,gEAAA,hEAASjB,2EAyBMP,MAAKwB,EAAEE;;AAzBtB,AAAA,gBAAA,ZAyBe1B;AAzBf,AAyBiC,QAACyB,wDAAAA,+EAAAA,zBAAUzB,2DAAAA,jDAAKwB,2DAAAA,zDAAEE,2DAAAA;;;AAzBnD,CAAA,AAAA,sEAAA,tEAASnB,iFA4BQO,EAAEO,EAAEV;;AA5BrB,AAAA,YAAA,RA4BiBG;AA5BjB,AA4BwB,QAACa,0DAAAA,yEAAAA,jBAAYb,qDAAAA,/CAAEO,qDAAAA,nDAAEV,qDAAAA;;;AA5BzC,CAAA,AAAA,8EAAA,9EAASJ,yFA+BYO,EAAEc,OAAOC;;AA/B9B,AAAA,YAAA,RA+BqBf;AA/BrB,AAgCoB,iEAAA,sBAAA,IAAA,SAAA,7FAACgB,+BAAqBF,OAAOG,kDAEPF,wFAAM,AAAKf,QAAG,AAAKA,QAAG,AAAKA,QAAG,AAAUA,kDAAG,AAAaA;;;AAlClG,CAAA,+BAAA,/BAASP;AAAT,AAAA,AAAA;;;AAAA,CAAA,qCAAA,rCAASA;;AAAT,CAAA,wCAAA,xCAASA;;AAAT,CAAA,6CAAA,WAAAJ,mBAAAC,qBAAAC,hGAASE;AAAT,AAAA,OAAAD,iBAAAF,qBAAA;;;AAAA;;;2BAAA,3BAASI,8DACwBC,EAAEC,EAAEC,EAAUC,GAAqBpC,IAAsBqC;AAD1F,AAAA,YAAAN,oBACiCE,EAAEC,EAAEC,EAAUC,GAAqBpC,IAAsBqC;;;AADjFN,AAuEA,kBAAA,lBAACyB,wCAAwCzB;AAElD,AAAA,sBAAA,8BAAA0B,pDAAaE;AAAb,AAAA,IAAAD,WAAA,AAAA;AAAA,AAAA,QAAAA;KAAA;AAAA,OAAAC,kDAAA,CAAA,UAAA,MAAA,CAAA,UAAA,MAAA,CAAA,UAAA;;;KAAA;AAAA,OAAAA,kDAAA,CAAA,UAAA,MAAA,CAAA,UAAA,MAAA,CAAA,UAAA,MAAA,CAAA,UAAA;;;KAAA;AAAA,OAAAA,kDAAA,CAAA,UAAA,MAAA,CAAA,UAAA,MAAA,CAAA,UAAA,MAAA,CAAA,UAAA,MAAA,CAAA,UAAA;;;;AAAA,MAAA,KAAArF,MAAA,CAAA,8DAAA,AAAA;;;;;AAAA,CAAA,oDAAA,pDAAaqF,+DACT1B,EAAEC,EAAEC;AADR,AACW,YAAAJ,sCAAA,IAAA,tBAAQE,EAAEC,EAAEC,EAAEzD,AAAA;;;AADzB,CAAA,oDAAA,pDAAaiF,+DAET1B,EAAEC,EAAEC,EAAEC;AAFV,AAEc,YAAAL,6BAAA,IAAA,bAAQE,EAAEC,EAAEC,EAAEC;;;AAF5B,CAAA,oDAAA,pDAAauB,+DAGT1B,EAAEC,EAAEC,EAAEC,GAAGwB;AAHb,AAGoB,YAAA7B,8DAAA,IAAA,9CAAQE,EAAEC,EAAEC,EAAE,kBAAIyB,OAAMxB,GAAG,GAAGA;;;AAHlD,CAAA,8CAAA,9CAAauB;;AAAb,AAKA,6BAAA,7BAAME,kEAAQ9E;AAAd,AAAiB,qBAAWgD,bAAMhD;;AAElC,2BAAA,3BAAOyD,8DAAmBF;AAA1B,iEACM,AAACwB,eAAK,AAAKxB,5CACX,AAAC/B,iDAAe,AAACuD,eAAK,AAAKxB,pGAC3B,OAAC/B,mGAAe,AAACuD,eAAK,AAAKxB;;AAEjC,4BAAA,5BAAOK,gEAAoBL,EAASG;AAApC,AACE,4BAAA,nBAAK,CAAI,AAAKH,QAAG,AAAKG,YACjB,AAACsB,6CAAE,AAAKzB,IAAG,AAAKG,UAChB,AAACsB,6CAAE,AAAKzB,IAAG,AAAKG;;AAEvB,0BAAA,1BAAOG,4DAAkBN;AAAzB,AACE,YAAA0B,eAAA,SAAA,KAAAA,eAAA,SAAA,KAAAA,eAAA,SAAA,KAAAA,eAAA,mDAAA,KAAAA,eAAA,sDAAA,KAAA,IAAA,OAAA,IAAA,OAAA,IAAA,OAAA,IAAA,OAAA,IAAA,pQAAM,AAAK1B,6BAAG,AAAKA,6BAAG,AAAKA,6BAAG,AAAUA,uEAAG,AAAaA;;AAI1D,6BAAA,7BAAOQ,kEAAqBR,EAAEO,EAAEK;AAAhC,AACE,IAAAe,WAAMpB;AAAN,AAAA,GAAA,AAAAkB,6CAAA,6CAAAE;AAGU,OAAK3B;;AAHf,GAAA,AAAAyB,6CAAA,IAAAE;AAC0B,OAAK3B;;AAD/B,GAAA,AAAAyB,6CAAA,uDAAAE;AAMU,OAAa3B;;AANvB,GAAA,AAAAyB,6CAAA,IAAAE;AAG0B,OAAK3B;;AAH/B,GAAA,AAAAyB,6CAAA,+CAAAE;AACU,OAAK3B;;AADf,GAAA,AAAAyB,6CAAA,IAAAE;AAE0B,OAAK3B;;AAF/B,GAAA,AAAAyB,6CAAA,gDAAAE;AAIU,OAAU3B;;AAJpB,GAAA,AAAAyB,6CAAA,QAAAE;AAOU,OAAa3B;;AAPvB,GAAA,AAAAyB,6CAAA,KAAAE;AAKU,OAAU3B;;AALpB,GAAA,AAAAyB,6CAAA,gDAAAE;AAEU,OAAK3B;;AAFf,AAQEY;;;;;;;;;;;;;AAEJ,AAAA,0BAAA,kCAAAO,5DAAOR;AAAP,AAAA,IAAAiB,WAAA,AAAA;AAAA,AAAA,QAAAA;KAAA;AAAA,OAAAjB,sDAAA,CAAA,UAAA,MAAA,CAAA,UAAA;;;KAAA;AAAA,OAAAA,sDAAA,CAAA,UAAA,MAAA,CAAA,UAAA,MAAA,CAAA,UAAA;;;;AAAA,MAAA,KAAA3E,MAAA,CAAA,8DAAA,AAAA;;;;;AAAA,CAAA,wDAAA,xDAAO2E,mEACIX,EAAQU;AADnB,AAEI,IAAAmB,WAAMnB;AAAN,AAAA,QAAAmB;KAAA;AACI,OAAK7B;;;KADT;AAEI,OAAKA;;;KAFT;AAGI,OAAKA;;;KAHT;AAII,OAAUA;;;KAJd;AAKI,OAAaA;;;;AAEJ,MAAO,KAAAhE,MAAW,CAAA,gFAAyC0E;;;;;AAT5E,CAAA,wDAAA,xDAAOC,mEAUIX,EAAQU,EAAEE;AAVrB,AAWI,IAAAkB,WAAMpB;AAAN,AAAA,QAAAoB;KAAA;AACI,OAAK9B;;;KADT;AAEI,OAAKA;;;KAFT;AAGI,OAAKA;;;KAHT;AAII,OAAUA;;;KAJd;AAKI,OAAaA;;;;AACbY;;;;;AAjBR,CAAA,kDAAA,lDAAOD;;AAAP,AAmBA,4BAAA,5BAAcE,gEAAoBb,EAAEO,EAAEV;AAAtC,AACE,IAAAkC,WAAMxB;IAANwB,eAAA,EAAA,CAAAA,oBAAAC,oBAAA,AAAAD,aAAA;AAAA,AAAA,QAAAA;KAAA;AACS,OAACE,kDAAMpC,EAAQ,AAAKG,IAAG,AAAKA,IAAG,AAAUA,8CAAG,AAAaA;;;KADlE;AAES,OAACiC,kDAAM,AAAKjC,IAAGH,EAAQ,AAAKG,IAAG,AAAUA,8CAAG,AAAaA;;;KAFlE;AAGS,OAACiC,kDAAM,AAAKjC,IAAG,AAAKA,IAAGH,EAAQ,AAAUG,8CAAG,AAAaA;;;KAHlE;AAIS,OAACiC,kDAAM,AAAKjC,IAAG,AAAKA,IAAG,AAAKA,IAAGH,EAAa,AAAaG;;;KAJlE;AAKS,OAACiC,kDAAM,AAAKjC,IAAG,AAAKA,IAAG,AAAKA,IAAG,AAAUA,8CAAGH;;;;AACnD,MAAO,KAAA5D,uCAA2B,CAAA,kFAA2CsE;;;;AAKjF,kCAAA,lCAAa2B,4EAAmBC;AAAhC,AACE,OAACC,8CAAMf,oBAAMc;;AAuCf,oBAAA,pBAAME,gDAAK5F,EAAEyB;AAAb,AACE,GAAI,MAAA,LAAMzB;AAAV;;AACE,GAAI,MAAA,LAAMyB;AAAV;;AACE,OAACoE,kBAAQ7F,EAAEyB;;;;AAEjB,uCAAA,vCAAMqE,sFAAkB9F,EAAEyB;AAA1B,AAEW,QAAY,AAACsE,eAAK/F,OAAG,AAAC+F,eAAKtE;;AAEtC,8BAAA,9BAAMuE,oEAAehG,EAAEyB;AAAvB,AAEW,OAACwE,0BAAsB,AAACC,uBAAU,AAACH,eAAK/F,IAAI,AAACkG,uBAAU,AAACH,eAAKtE;;AAExE,8BAAA,9BAAM0E,oEAAenG,EAAEyB;AAAvB,AACE,IAAA,AACE,GACE,AAACuD,6CAAEhF,EAAEyB;AADP;;AAAA,GAIa,EAAA,GAAA,MAAA,SAAA,EAAA,EAAA,CAAA,wCAAA,aAAA,CAAAkB,gCAAA,6BAAA,KAAA,EAAA,EAAA,wCAAA,AAAA0D,2DAAA,QAAA,AAAAA,jCAAYC,mEAAAA,5RAAYtG,mBAAAA,sFAAAA,sCAAAA,gGAAAA,mEAAAA;AAAG,OAACuG,mBAASvG,EAAEyB;;AAJpD,GAKE,GAAK,AAACqE,qCAAiB9F,EAAEyB;AAAI,OAACuE,4BAAchG,EAAEyB;;AALhD,GAMa,6BAAA,iCAAA,5DAAI,OAASzB,sBAAG,AAACwG,uBAAOxG,UAAG,AAAOA,gBAAG,AAAQA;AAAI,OAACiG,0BAAsBjG,EAAEyB;;AANvF,AAOQ,QAAG,AAACsD,eAAK/E,KAAG,AAAC+E,eAAKtD;;;;;;gBAR5B,GAAA,CAAA2E,kBAS0C7G;AAT1C,QAAA6G,JASoDlD;AATpD,AAUI,GAAI,GAAK,AAAC4C,qCAAiB9F,EAAEyB;AAC3B,OAACuE,4BAAchG,EAAEyB;;AACjB,MAAOyB;;;AAZb,AAAA,MAAAkD;;;;AAcF,0BAAA,1BAAMK,4DAAWzG,EAAEyB;AAAnB,AACE,GACE,MAAA,LAAMzB;AADR;;AAAA,GAEE,MAAA,LAAMyB;AAFR;;AAAA,AAGY,OAAC0E,4BAAcnG,EAAEyB;;;;;AAK/B,gCAAA,hCAAMiF,wEAAwBC,GAAWC;AAAzC,AACE,IAAAC,mBACE,CAAkC,AAAKF,OAAI,AAAKC;AADlD,AAAA,GAAA,CAAA,QAAAC;AAAA,IAAAA,uBAEE,AAACjB,kBAAI,AAAKe,KAAI,AAAKC;AAFrB,AAAA,GAAA,CAAA,QAAAC;AAAA,IAAAA,uBAGE,AAACJ,wBAAU,AAAKE,KAAI,AAAKC;AAH3B,AAAA,GAAA,CAAA,QAAAC;AAAA,IAAAA,uBAIE,CAAkC,AAAUF,iDAAI,AAAUC;AAJ5D,AAAA,GAAA,CAAA,QAAAC;AAAA;;AAAAA;;;AAAAA;;;AAAAA;;;AAAAA;;;AAMF,gCAAA,hCAAMC,wEAAwBH,GAAWC;AAAzC,AACE,IAAAC,mBACE,AAACjB,kBAAI,AAAKe,KAAI,AAAKC;AADrB,AAAA,GAAA,CAAA,QAAAC;AAAA,IAAAA,uBAEE,CAAkC,AAAKF,OAAI,AAAKC;AAFlD,AAAA,GAAA,CAAA,QAAAC;AAAA,IAAAA,uBAGE,AAACJ,wBAAU,AAAKE,KAAI,AAAKC;AAH3B,AAAA,GAAA,CAAA,QAAAC;AAAA,IAAAA,uBAIE,CAAkC,AAAUF,iDAAI,AAAUC;AAJ5D,AAAA,GAAA,CAAA,QAAAC;AAAA;;AAAAA;;;AAAAA;;;AAAAA;;;AAAAA;;;AAMF,gCAAA,hCAAME,wEAAwBJ,GAAWC;AAAzC,AACE,IAAAC,mBACE,AAACjB,kBAAI,AAAKe,KAAI,AAAKC;AADrB,AAAA,GAAA,CAAA,QAAAC;AAAA,IAAAA,uBAEE,AAACJ,wBAAU,AAAKE,KAAI,AAAKC;AAF3B,AAAA,GAAA,CAAA,QAAAC;AAAA,IAAAA,uBAGE,CAAkC,AAAKF,OAAI,AAAKC;AAHlD,AAAA,GAAA,CAAA,QAAAC;AAAA,IAAAA,uBAIE,CAAkC,AAAUF,iDAAI,AAAUC;AAJ5D,AAAA,GAAA,CAAA,QAAAC;AAAA;;AAAAA;;;AAAAA;;;AAAAA;;;AAAAA;;;AAQF,+BAAA,/BAAOG,sEAAgBC,GAAGC;AAA1B,AAGK,GAAI,eAAA3B,dAAU0B;AACZ,OAACV,mBAASU,GAAGC;;AACb,OAACjB,0BAAsBgB,GAAGC;;;AAIjC,qCAAA,rCAAMC,kFAA6BR,GAAWC;AAA9C,AACE,IAAAC,mBACE,CAAkC,AAAKF,OAAI,AAAKC;AADlD,AAAA,GAAA,CAAA,QAAAC;AAAA,IAAAA,uBAEE,AAACG,6BAAe,AAAKL,KAAI,AAAKC;AAFhC,AAAA,GAAA,CAAA,QAAAC;AAAA,IAAAA,uBAGE,AAACV,4BAAc,AAAKQ,KAAI,AAAKC;AAH/B,AAAA,GAAA,CAAA,QAAAC;AAAA;;AAAAA;;;AAAAA;;;AAAAA;;;AAKF,sCAAA,tCAAMO,oFAA8BT,GAAWC;AAA/C,AACE,IAAAC,mBACE,CAAkC,AAAKF,OAAI,AAAKC;AADlD,AAAA,GAAA,CAAA,QAAAC;AAAA,IAAAA,uBAEE,AAACG,6BAAe,AAAKL,KAAI,AAAKC;AAFhC,AAAA,GAAA,CAAA,QAAAC;AAAA,IAAAA,uBAGE,AAACV,4BAAc,AAAKQ,KAAI,AAAKC;AAH/B,AAAA,GAAA,CAAA,QAAAC;AAAA,IAAAA,uBAIE,CAAkC,AAAUF,iDAAI,AAAUC;AAJ5D,AAAA,GAAA,CAAA,QAAAC;AAAA;;AAAAA;;;AAAAA;;;AAAAA;;;AAAAA;;;AAMF,sCAAA,tCAAMQ,oFAA8BV,GAAWC;AAA/C,AACE,IAAAC,mBACE,AAACG,6BAAe,AAAKL,KAAI,AAAKC;AADhC,AAAA,GAAA,CAAA,QAAAC;AAAA,IAAAA,uBAEE,CAAkC,AAAKF,OAAI,AAAKC;AAFlD,AAAA,GAAA,CAAA,QAAAC;AAAA,IAAAA,uBAGE,AAACV,4BAAc,AAAKQ,KAAI,AAAKC;AAH/B,AAAA,GAAA,CAAA,QAAAC;AAAA,IAAAA,uBAIE,CAAkC,AAAUF,iDAAI,AAAUC;AAJ5D,AAAA,GAAA,CAAA,QAAAC;AAAA;;AAAAA;;;AAAAA;;;AAAAA;;;AAAAA;;;AAMF,sCAAA,tCAAMS,oFAA8BX,GAAWC;AAA/C,AACE,IAAAC,mBACE,AAACG,6BAAe,AAAKL,KAAI,AAAKC;AADhC,AAAA,GAAA,CAAA,QAAAC;AAAA,IAAAA,uBAEE,AAACV,4BAAc,AAAKQ,KAAI,AAAKC;AAF/B,AAAA,GAAA,CAAA,QAAAC;AAAA,IAAAA,uBAGE,CAAkC,AAAKF,OAAI,AAAKC;AAHlD,AAAA,GAAA,CAAA,QAAAC;AAAA,IAAAA,uBAIE,CAAkC,AAAUF,iDAAI,AAAUC;AAJ5D,AAAA,GAAA,CAAA,QAAAC;AAAA;;AAAAA;;;AAAAA;;;AAAAA;;;AAAAA;;;AAMF,4BAAA,5BAAOU,gEAAapE,EAAEqE,EAAEC;AAAxB,AACE,aAAA,TAAOC;aAAP,TACOC;WADP,PAEOC;IACAzE,QAAOA;IACPqE,QAAOA;;AAJd,AAKE,GACE,AAACK,uBAAO1E;AADV,0FACc,AAAC2E,oBAAUJ,QAAQ,AAACI,oBAAU,AAACC,6CAAKJ,OAAOH,QAAI,AAACM,oBAAUF;;AADxE,GAEE,AAACC,uBAAOL;AAFV,0FAEc,AAACM,oBAAU,AAACC,6CAAKL,OAAOvE,QAAI,AAAC2E,oBAAUH,QAAQ,AAACG,oBAAUF;;AAFxE,AAIE,IAAMI,UAAQ,AAACrH,gBAAMwC;IACf8E,UAAQ,AAACtH,gBAAM6G;IACfU,OAAK,iBAAA,AACE,QAACT,oCAAAA,qDAAAA,nBAAIO,iCAAAA,zBAAQC,iCAAAA;gBADf,GAAA,CAAAE,kBAE0C5I;AAF1C,QAAA4I,JAEoD3E;AAFpD,AAAA;;AAAA,AAAA,MAAA2E;;;;AAFX,AAME,GACE,kDAAA,lDAACnD,6CAAEkD;AAAoB,eAAO,AAACE,6CAAKV,OAAOM;eAAS,AAACI,6CAAKT,OAAOM;eAASL;eAAoB,AAACS,eAAKlF;eAAG,AAACkF,eAAKb;;;;;;;;AAD/G,GAEE,UAAA,TAAIU;AAAmB,eAAOR;eAAsBC;eAAsB,AAACS,6CAAKR,KAAKI;eAAS,AAACK,eAAKlF;eAAG,AAACkF,eAAKb;;;;;;;;AAF/G,GAGE,QAAA,PAAGU;AAAoB,eAAO,AAACE,6CAAKV,OAAOM;eAASL;eAAsBC;eAAoB,AAACS,eAAKlF;eAAGqE;;;;;;;;AAHzG,GAIE,QAAA,PAAGU;AAAoB,eAAOR;eAAsB,AAACU,6CAAKT,OAAOM;eAASL;eAAoBzE;eAAS,AAACkF,eAAKb;;;;;;;;AAJ/G;;;;;;;;;;;AAQR,AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,AACS,AAAA,AAIT,AAAA;AAAA;;;wBAAA,xBAAagB;;AAAb,IAAAF,0CAAA,WACYG,KAAKC;AADjB,AAAA,IAAA9G,kBAAA,EAAA,SAAA,OAAA,fACY6G,oBAAAA;IADZ5G,kBAAA,CAAA0G,sBAAA,AAAAxG,YAAAH;AAAA,AAAA,GAAA,GAAA,CAAAC,mBAAA;AAAA,QAAAA,gDAAAA,8DAAAA,hBACY4G,0CAAAA,rCAAKC,0CAAAA;;AADjB,IAAA1G,kBAAA,CAAAuG,sBAAA;AAAA,AAAA,GAAA,GAAA,CAAAvG,mBAAA;AAAA,QAAAA,gDAAAA,8DAAAA,hBACYyG,0CAAAA,rCAAKC,0CAAAA;;AADjB,MAAA,AAAAzG,2BAAA,kBACYwG;;;;AADZ,AAAA,wBAAA,xBACGF,wDAASE,KAAKC;AADjB,AAAA,GAAA,EAAA,GAAA,SAAA,aAAA,GAAA,CAAA,8CAAA,vEACYD,yBAAAA;AADZ,OACYA,2CAAAA,KAAKC;;AADjB,OAAAJ,wCACYG,KAAKC;;;;AADjB,AAGA,wBAAA,xBAAcC,wDAASF,KAAKC;AAA5B,AACE,OAAC/H,gBAAM,AAAC4H,sBAAQE,KAAKC;;AAEvB,AAAA;AAAA;;;6BAAA,7BAAaU;;AAAb,IAAAR,+CAAA,WACYS,GAAGC,MAAMC;AADrB,AAAA,IAAA3H,kBAAA,EAAA,OAAA,OAAA,bACYyH,kBAAAA;IADZxH,kBAAA,CAAAgH,sBAAA,AAAA9G,YAAAH;AAAA,AAAA,GAAA,GAAA,CAAAC,mBAAA;AAAA,QAAAA,gDAAAA,qEAAAA,vBACYwH,iDAAAA,9CAAGC,iDAAAA,3CAAMC,iDAAAA;;AADrB,IAAAvH,kBAAA,CAAA6G,sBAAA;AAAA,AAAA,GAAA,GAAA,CAAA7G,mBAAA;AAAA,QAAAA,gDAAAA,qEAAAA,vBACYqH,iDAAAA,9CAAGC,iDAAAA,3CAAMC,iDAAAA;;AADrB,MAAA,AAAAtH,2BAAA,uBACYoH;;;;AADZ,AAAA,wBAAA,xBACGR,wDAASQ,GAAGC,MAAMC;AADrB,AAAA,GAAA,EAAA,GAAA,OAAA,aAAA,GAAA,CAAA,iDAAA,xEACYF,uBAAAA;AADZ,OACYA,8CAAAA,GAAGC,MAAMC;;AADrB,OAAAX,6CACYS,GAAGC,MAAMC;;;;AADrB,IAAAT,oDAAA,WAEiBO,GAAGC,MAAMC;AAF1B,AAAA,IAAA3H,kBAAA,EAAA,OAAA,OAAA,bAEiByH,kBAAAA;IAFjBxH,kBAAA,CAAAkH,2BAAA,AAAAhH,YAAAH;AAAA,AAAA,GAAA,GAAA,CAAAC,mBAAA;AAAA,QAAAA,gDAAAA,qEAAAA,vBAEiBwH,iDAAAA,9CAAGC,iDAAAA,3CAAMC,iDAAAA;;AAF1B,IAAAvH,kBAAA,CAAA+G,2BAAA;AAAA,AAAA,GAAA,GAAA,CAAA/G,mBAAA;AAAA,QAAAA,gDAAAA,qEAAAA,vBAEiBqH,iDAAAA,9CAAGC,iDAAAA,3CAAMC,iDAAAA;;AAF1B,MAAA,AAAAtH,2BAAA,4BAEiBoH;;;;AAFjB,AAAA,6BAAA,7BAEGN,kEAAcM,GAAGC,MAAMC;AAF1B,AAAA,GAAA,EAAA,GAAA,OAAA,aAAA,GAAA,CAAA,sDAAA,7EAEiBF,uBAAAA;AAFjB,OAEiBA,mDAAAA,GAAGC,MAAMC;;AAF1B,OAAAT,kDAEiBO,GAAGC,MAAMC;;;;AAF1B,IAAAP,qDAAA,WAGkBK,GAAGC,MAAMC;AAH3B,AAAA,IAAA3H,kBAAA,EAAA,OAAA,OAAA,bAGkByH,kBAAAA;IAHlBxH,kBAAA,CAAAoH,4BAAA,AAAAlH,YAAAH;AAAA,AAAA,GAAA,GAAA,CAAAC,mBAAA;AAAA,QAAAA,gDAAAA,qEAAAA,vBAGkBwH,iDAAAA,9CAAGC,iDAAAA,3CAAMC,iDAAAA;;AAH3B,IAAAvH,kBAAA,CAAAiH,4BAAA;AAAA,AAAA,GAAA,GAAA,CAAAjH,mBAAA;AAAA,QAAAA,gDAAAA,qEAAAA,vBAGkBqH,iDAAAA,9CAAGC,iDAAAA,3CAAMC,iDAAAA;;AAH3B,MAAA,AAAAtH,2BAAA,6BAGkBoH;;;;AAHlB,AAAA,8BAAA,9BAGGJ,oEAAeI,GAAGC,MAAMC;AAH3B,AAAA,GAAA,EAAA,GAAA,OAAA,aAAA,GAAA,CAAA,uDAAA,9EAGkBF,uBAAAA;AAHlB,OAGkBA,oDAAAA,GAAGC,MAAMC;;AAH3B,OAAAP,mDAGkBK,GAAGC,MAAMC;;;;AAH3B,IAAAL,oDAAA,WAIiBG,GAAGG,KAAKC,MAAMC;AAJ/B,AAAA,IAAA9H,kBAAA,EAAA,OAAA,OAAA,bAIiByH,kBAAAA;IAJjBxH,kBAAA,CAAAsH,2BAAA,AAAApH,YAAAH;AAAA,AAAA,GAAA,GAAA,CAAAC,mBAAA;AAAA,QAAAA,gDAAAA,mEAAAA,rBAIiBwH,+CAAAA,5CAAGG,+CAAAA,1CAAKC,+CAAAA,zCAAMC,+CAAAA;;AAJ/B,IAAA1H,kBAAA,CAAAmH,2BAAA;AAAA,AAAA,GAAA,GAAA,CAAAnH,mBAAA;AAAA,QAAAA,gDAAAA,mEAAAA,rBAIiBqH,+CAAAA,5CAAGG,+CAAAA,1CAAKC,+CAAAA,zCAAMC,+CAAAA;;AAJ/B,MAAA,AAAAzH,2BAAA,4BAIiBoH;;;;AAJjB,AAAA,6BAAA,7BAIGF,kEAAcE,GAAGG,KAAKC,MAAMC;AAJ/B,AAAA,GAAA,EAAA,GAAA,OAAA,aAAA,GAAA,CAAA,sDAAA,7EAIiBL,uBAAAA;AAJjB,OAIiBA,mDAAAA,GAAGG,KAAKC,MAAMC;;AAJ/B,OAAAR,kDAIiBG,GAAGG,KAAKC,MAAMC;;;;AAJ/B,AAMA,iCAAA,jCAAMC,0EAAkBN,GAAGC,MAAMC;AAAjC,AACE,GAAM,mDAAA,nDAACvE,6CAAEsE;AAAT,AACE,IAAAM,qBAAiB,AAACjJ,gBAAM4I;AAAxB,AAAA,GAAA,CAAAK,sBAAA;AAAA;;AAAA,WAAAA,PAAYJ;AAAZ,AACE,oBAAU,CAACK,8DAAAA,uEAAAA,XAAUR,mDAAAA,hDAAGG,mDAAAA;AAAxB;;AAAA,AACE,MAAA,AAAAM,gDAAA,CAAA,aAAA,AAAAC,mHAAA,gDAAA,2CAAA,uDAAA,sEAAA,wDAAA,qDAAA,hVAAoBP,kZAC6BD;;;;AAJvD;;;AAMF,AAAA;AAAA;;;oBAAA,pBAAaa;;AAAb,IAAAJ,sCAAA,WACYX;AADZ,AAAA,IAAAzH,kBAAA,EAAA,OAAA,OAAA,bACYyH,kBAAAA;IADZxH,kBAAA,CAAAoI,sBAAA,AAAAlI,YAAAH;AAAA,AAAA,GAAA,GAAA,CAAAC,mBAAA;AAAA,QAAAA,gDAAAA,oDAAAA,NACYwH,gCAAAA;;AADZ,IAAArH,kBAAA,CAAAiI,sBAAA;AAAA,AAAA,GAAA,GAAA,CAAAjI,mBAAA;AAAA,QAAAA,gDAAAA,oDAAAA,NACYqH,gCAAAA;;AADZ,MAAA,AAAApH,2BAAA,cACYoH;;;;AADZ,AAAA,wBAAA,xBACGY,wDAASZ;AADZ,AAAA,GAAA,EAAA,GAAA,OAAA,aAAA,GAAA,CAAA,wCAAA,/DACYA,uBAAAA;AADZ,OACYA,qCAAAA;;AADZ,OAAAW,oCACYX;;;;AADZ,IAAAa,wCAAA,WAEcb,GAAGgB;AAFjB,AAAA,IAAAzI,kBAAA,EAAA,OAAA,OAAA,bAEcyH,kBAAAA;IAFdxH,kBAAA,CAAAsI,wBAAA,AAAApI,YAAAH;AAAA,AAAA,GAAA,GAAA,CAAAC,mBAAA;AAAA,QAAAA,gDAAAA,6DAAAA,fAEcwH,yCAAAA,tCAAGgB,yCAAAA;;AAFjB,IAAArI,kBAAA,CAAAmI,wBAAA;AAAA,AAAA,GAAA,GAAA,CAAAnI,mBAAA;AAAA,QAAAA,gDAAAA,6DAAAA,fAEcqH,yCAAAA,tCAAGgB,yCAAAA;;AAFjB,MAAA,AAAApI,2BAAA,gBAEcoH;;;;AAFd,AAAA,0BAAA,1BAEGc,4DAAWd,GAAGgB;AAFjB,AAAA,GAAA,EAAA,GAAA,OAAA,aAAA,GAAA,CAAA,0CAAA,jEAEchB,uBAAAA;AAFd,OAEcA,uCAAAA,GAAGgB;;AAFjB,OAAAH,sCAEcb,GAAGgB;;;;AAFjB,AAMA,6BAAA,7BAAMC,kEAAcjB;AAApB,oJACMA,/CACF,kDAAA,lDAACkB,uGAAaC,tJACd,4KAAA,5KAACD,iOAAaC,vRACd,6SAAA,tSAACD,2VAAaC;;AAElB,oCAAA,pCAAMC,gFAAgBpB;AAAtB,oJACMA,/CACF,kDAAA,lDAACkB,uGAAaG,tJACd,kLAAA,lLAACH,uOAAaG,7RACd,yTAAA,lTAACH,uWAAaG;;AAElB,AAAA,AAAA,AAAA,AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,AAAA,CAAA,AAAA,+DAAA,WAAAC,mBAAAC,7FAAqBoE;;AAArB,AAAA,IAAArE,yBAAA;AAAA,AAAA,OAAAA,8DAAAC,gBAAA;;;AAAA,CAAA,AAAA,+DAAA,WAAAC,mBAAAC,OAAAC,pGAAqBiE;;AAArB,AAAA,IAAAnE,yBAAA;AAAA,AAAA,IAAAG,WAAAF;IAAAE,eAAA,EAAA,CAAAA,oBAAAzF,oBAAA,AAAAyF,aAAA;AAAA,AAAA,QAAAA;KAAA;AAAAC;;;KAAA;AAAAC;;;KAAA;AAAAC;;;KAAA;AAAAC;;;KAAA;AAAAC;;;KAAA;AAAAC;;;KAAA;AAAAC;;;KAAA;AAAAC;;;;AAAA,OAAAC,4CAAAC,gBAAAZ,OAAAC;;;;;AAAA,CAAA,AAAA,oEAAA,WAAAY,mBAAAC,gBAAAC,lHAAqBmD;;AAArB,AAAA,IAAArD,yBAAA;AAAA,AAAA,OAAA/K,+CAAA,WAAAkL,kBAAAC;AAAA,AAAA,IAAAC,aAAAD;IAAAE,kBAAA,AAAAlL,4CAAAiL,WAAA,IAAA;IAAAE,kBAAA,AAAAnL,4CAAAiL,WAAA,IAAA;AAAA,AAAA,QAAAJ,gDAAAA,8CAAAE,kBAAAG,gBAAAC,mBAAAN,0BAAAE,kBAAAG,gBAAAC;GAAAL,mBAAAF;;;AAAA,CAAA,AAAA,2EAAA,WAAAQ,mBAAAC,qBAAAC,9HAAqB2C;;AAArB,AAAA,IAAA7C,yBAAA;AAAA,AAAA,IAAAG,wBAAA,WAAAC;AAAA,AAAA,OAAAhI,+BAAA6H,qBAAA,oBAAA,GAAA,IAAA,GAAAC,mBAAAE;;AAAA,AAAA,OAAAhI,+BAAA6H,qBAAAE,sBAAA,qBAAA,KAAA,IAAAD,mBAAA,AAAAG,+CAAA,mFAAA,KAAAC,2BAAA,KAAA,EAAA,IAAA,AAAAA,sCAAA,CAAA,0DAAAxB,eAAA,OAAA,KAAAwB,2BAAA,KAAA,EAAA,IAAA,AAAAA,sCAAA,CAAA,qDAAAvB,aAAA,OAAA,KAAAuB,2BAAA,KAAA,EAAA,IAAA,AAAAA,sCAAA,CAAA,qDAAAtB,aAAA,OAAA,KAAAsB,2BAAA,KAAA,EAAA,IAAA,AAAAA,sCAAA,CAAA,qDAAArB,aAAA,OAAA,KAAAqB,2BAAA,KAAA,EAAA,IAAA,AAAAA,sCAAA,CAAA,2DAAApB,gBAAA,OAAA,KAAAoB,2BAAA,KAAA,EAAA,IAAA,AAAAA,sCAAA,CAAA,yDAAAnB,eAAA,OAAA,KAAAmB,2BAAA,KAAA,EAAA,IAAA,AAAAA,sCAAA,CAAA,4DAAAlB,gBAAA,OAAA,KAAAkB,2BAAA,KAAA,EAAA,IAAA,AAAAA,sCAAA,CAAA,oDAAAjB,aAAA,eAAAE;;;AAAA,CAAA,AAAA,mEAAA,WAAAgB,9EAAqBsC;;AAArB,AAAA,IAAAtC,eAAA;AAAA,AAAA,YAAAC,qBAAA,IAAAD,aAAA,EAAA,mFAAA,0DAAA,qDAAA,qDAAA,qDAAA,2DAAA,yDAAA,4DAAA,4DAAA,kBAAAhB,iBAAA,AAAAkB,oBAAAlB,iBAAA,AAAAmB;;;AAAA,CAAA,AAAA,2DAAA,WAAAC,tEAAqBkC;;AAArB,AAAA,IAAAlC,yBAAA;AAAA,AAAAC;;;AAAA,CAAA,AAAA,iEAAA,WAAAC,5EAAqBgC;;AAArB,AAAA,IAAAhC,yBAAA;AAAA,AAAA,6BAAA/B,cAAAC,YAAAC,YAAAC,YAAAC,eAAAC,cAAAC,eAAAC,YAAAuB,cAAArB,gBAAAuB,zJAAqB+B;;;AAArB,CAAA,AAAA,+DAAA,WAAA9B,1EAAqB8B;;AAArB,AAAA,IAAA9B,yBAAA;AAAA,AAAA,QAAA,IAAA,AAAAC,gBAAAzB;;;AAAA,CAAA,AAAA,2DAAA,WAAA0B,tEAAqB4B;;AAArB,AAAA,IAAA5B,yBAAA;AAAA,AAAA,IAAAC,kBAAAJ;AAAA,AAAA,GAAA,GAAA,CAAAI,mBAAA;AAAAA;;AAAA,IAAAA,sBAAA,AAAA,WAAAC;AAAA,AAAA,QAAA,cAAA,AAAAC,8BAAAD;GAAAF;AAAA,AAAA,CAAAH,gBAAAI;;AAAAA;;;;AAAA,CAAA,AAAA,6DAAA,WAAAG,UAAAC,lFAAqBuB;;AAArB,AAAA,IAAAxB,gBAAA;AAAA,AAAA,SAAA,GAAA,CAAAC,cAAA,aAAA,EAAA,CAAA,AAAAD,8BAAA,AAAAC,6BAAA,EAAA,AAAAzI,6CAAA,AAAAwI,qBAAA,AAAAC,wBAAA,EAAA,AAAAzI,6CAAA,AAAAwI,mBAAA,AAAAC,sBAAA,EAAA,AAAAzI,6CAAA,AAAAwI,mBAAA,AAAAC,sBAAA,EAAA,AAAAzI,6CAAA,AAAAwI,mBAAA,AAAAC,sBAAA,EAAA,AAAAzI,6CAAA,AAAAwI,sBAAA,AAAAC,yBAAA,EAAA,AAAAzI,6CAAA,AAAAwI,qBAAA,AAAAC,wBAAA,EAAA,AAAAzI,6CAAA,AAAAwI,sBAAA,AAAAC,yBAAA,EAAA,AAAAzI,6CAAA,AAAAwI,mBAAA,AAAAC,sBAAA,AAAAzI,6CAAA,AAAAwI,uBAAA,AAAAC;;;AAAA,CAAA,AAAA,4DAAA,WAAAC,mBAAAC,1FAAqBqB;;AAArB,AAAA,IAAAtB,yBAAA;AAAA,AAAA,GAAA,AAAAE,0BAAA,iFAAA,+DAAA,8DAAA,yDAAA,0DAAA,0DAAA,gEAAA,0DAAA,gFAAAD;AAAA,OAAAE,+CAAA,AAAAC,qBAAA,AAAA/F,6CAAA,mCAAA2F,wBAAAX,eAAAY;;AAAA,6BAAA1C,cAAAC,YAAAC,YAAAC,YAAAC,eAAAC,cAAAC,eAAAC,YAAAuB,cAAA,AAAAjF,oBAAA,AAAA+F,+CAAAnC,gBAAAiC,kBAAA,9OAAqBqB;;;;AAArB,CAAA,AAAA,iFAAA,WAAAjB,mBAAAjD,/GAAqBkE;;AAArB,AAAA,IAAAjB,yBAAA;AAAA,AAAA,IAAAC,WAAAlD;IAAAkD,eAAA,EAAA,CAAAA,oBAAAzI,oBAAA,AAAAyI,aAAA;AAAA,AAAA,QAAAA;KAAA;KAAA;KAAA;KAAA;KAAA;KAAA;KAAA;KAAA;AAAA;;;;AAAA,OAAAJ,0BAAAlC,gBAAAZ;;;;;AAAA,CAAA,AAAA,mEAAA,WAAAmD,mBAAAC,gBAAAxB,jHAAqBsC;;AAArB,AAAA,IAAAf,yBAAA;AAAA,AAAA,IAAAE,cAAAC;IAAAC,cAAAH;AAAA,AAAA,oBAAA,CAAAC,4CAAAA,0CAAA,0DAAAE,eAAAF,sBAAA,0DAAAE;AAAA,6BAAA3B,SAAAxB,YAAAC,YAAAC,YAAAC,eAAAC,cAAAC,eAAAC,YAAAuB,cAAArB,gBAAA,pJAAqBsD;;AAArB,oBAAA,CAAAb,4CAAAA,0CAAA,qDAAAE,eAAAF,sBAAA,qDAAAE;AAAA,6BAAApD,cAAAyB,SAAAvB,YAAAC,YAAAC,eAAAC,cAAAC,eAAAC,YAAAuB,cAAArB,gBAAA,tJAAqBsD;;AAArB,oBAAA,CAAAb,4CAAAA,0CAAA,qDAAAE,eAAAF,sBAAA,qDAAAE;AAAA,6BAAApD,cAAAC,YAAAwB,SAAAtB,YAAAC,eAAAC,cAAAC,eAAAC,YAAAuB,cAAArB,gBAAA,tJAAqBsD;;AAArB,oBAAA,CAAAb,4CAAAA,0CAAA,qDAAAE,eAAAF,sBAAA,qDAAAE;AAAA,6BAAApD,cAAAC,YAAAC,YAAAuB,SAAArB,eAAAC,cAAAC,eAAAC,YAAAuB,cAAArB,gBAAA,tJAAqBsD;;AAArB,oBAAA,CAAAb,4CAAAA,0CAAA,2DAAAE,eAAAF,sBAAA,2DAAAE;AAAA,6BAAApD,cAAAC,YAAAC,YAAAC,YAAAsB,SAAApB,cAAAC,eAAAC,YAAAuB,cAAArB,gBAAA,nJAAqBsD;;AAArB,oBAAA,CAAAb,4CAAAA,0CAAA,yDAAAE,eAAAF,sBAAA,yDAAAE;AAAA,6BAAApD,cAAAC,YAAAC,YAAAC,YAAAC,eAAAqB,SAAAnB,eAAAC,YAAAuB,cAAArB,gBAAA,pJAAqBsD;;AAArB,oBAAA,CAAAb,4CAAAA,0CAAA,4DAAAE,eAAAF,sBAAA,4DAAAE;AAAA,6BAAApD,cAAAC,YAAAC,YAAAC,YAAAC,eAAAC,cAAAoB,SAAAlB,YAAAuB,cAAArB,gBAAA,nJAAqBsD;;AAArB,oBAAA,CAAAb,4CAAAA,0CAAA,oDAAAE,eAAAF,sBAAA,oDAAAE;AAAA,6BAAApD,cAAAC,YAAAC,YAAAC,YAAAC,eAAAC,cAAAC,eAAAmB,SAAAK,cAAArB,gBAAA,tJAAqBsD;;AAArB,6BAAA/D,cAAAC,YAAAC,YAAAC,YAAAC,eAAAC,cAAAC,eAAAC,YAAAuB,cAAA,AAAAuB,8CAAA5C,gBAAAwC,gBAAAxB,UAAA,jOAAqBsC;;;;;;;;;;;AAArB,CAAA,AAAA,6DAAA,WAAAT,xEAAqBS;;AAArB,AAAA,IAAAT,yBAAA;AAAA,AAAA,OAAAC,cAAA,AAAAhC,+CAAA,mFAAA,KAAAiC,mBAAA,0DAAAxD,cAAA,OAAA,KAAAwD,mBAAA,qDAAAvD,YAAA,OAAA,KAAAuD,mBAAA,qDAAAtD,YAAA,OAAA,KAAAsD,mBAAA,qDAAArD,YAAA,OAAA,KAAAqD,mBAAA,2DAAApD,eAAA,OAAA,KAAAoD,mBAAA,yDAAAnD,cAAA,OAAA,KAAAmD,mBAAA,4DAAAlD,eAAA,OAAA,KAAAkD,mBAAA,oDAAAjD,YAAA,eAAAE;;;AAAA,CAAA,AAAA,oEAAA,WAAAgD,mBAAAhC,lGAAqBsC;;AAArB,AAAA,IAAAN,yBAAA;AAAA,AAAA,6BAAAzD,cAAAC,YAAAC,YAAAC,YAAAC,eAAAC,cAAAC,eAAAC,YAAAkB,SAAAhB,gBAAAuB,pJAAqB+B;;;AAArB,CAAA,AAAA,iEAAA,WAAAL,mBAAAC,/FAAqBI;;AAArB,AAAA,IAAAL,yBAAA;AAAA,AAAA,GAAA,AAAAE,wBAAAD;AAAA,OAAAD,kEAAA,AAAAG,eAAAF,oBAAA,KAAA,AAAAE,eAAAF,oBAAA;;AAAA,OAAAhO,+CAAAmO,gBAAAJ,uBAAAC;;;;AAAA,CAAA,AAAAI,4BAAA;AAAA,AAAA,AAAA;;;AAAA,CAAA,AAAAA,kCAAA;;AAAA,CAAA,AAAAA,uCAAA,WAAAC;AAAA,AAAA,YAAAhK,eAAA,KAAA,mBAAA,KAAA,IAAA;;;AAAA,CAAA,AAAA+J,0CAAA,WAAAC,mBAAAC;AAAA,AAAA,OAAAnM,iBAAAmM,qBAAA;;;AAAA;;;wBAAA,xBAAqBK,wDAAItE,OAAOC,KAAKC,KAAKC,KAAKC,QAAQC,OAAOC,QAAQC;AAAtE,AAAA,YAAAwD,mEAAA,KAAA,KAAA,5DAAyB/D,OAAOC,KAAKC,KAAKC,KAAKC,QAAQC,OAAOC,QAAQC;;;AAAtE;;;2BAAA,mCAAA2D,9DAAqBK;AAArB,AAAA,IAAAJ,uBAAA,iBAAAC,WAAA,AAAAxB,sDAAAsB,SAAA,4GAAA,qDAAA,qDAAA,qDAAA,2DAAA,yDAAA,4DAAA;AAAA,AAAA,GAAA,AAAAG,wBAAAH;AAAA,OAAApH,6CAAA,mCAAAsH;;AAAAA;;;AAAA,AAAA,YAAAL,iBAAA,AAAA,wFAAAG,UAAA,AAAA,mFAAAA,UAAA,AAAA,mFAAAA,UAAA,AAAA,mFAAAA,UAAA,AAAA,yFAAAA,UAAA,AAAA,uFAAAA,UAAA,AAAA,0FAAAA,UAAA,AAAA,kFAAAA,UAAA,KAAA,AAAArH,oBAAAsH,sBAAA;;;AAAAJ;AAAA,AAAA,CAAA,AAAA,gDAAArM,hDAAqBqM;;AAArB,CAAA,AAAA,AAAqBA,oEA6FnB,WAAe7L,EAAEqE;AAAjB,AAAA,YAAA,RAAerE;AAAf,AACE,OAACoE,0BAAY,AAAOpE,WAAG,AAAA,mFAAOqE,GAAGL;;;AA9FrC,CAAA,AAAA,yDAAAxE,zDAAqBqM;;AAArB,CAAA,AAAA,AAAqBA,2EAOO,WAAa3F,GAAG4G,EAAE3L;AAAlB,AAAA,aAAA,TAAa+E;AAAb,AAAwB,QAAC6G,oDAAAA,mEAAAA,jBAAM7G,+CAAAA,xCAAG4G,+CAAAA,7CAAE3L,+CAAAA;;;AAPhE,CAAA,AAAA,iDAAA3B,jDAAqBqM;;AAArB,CAAA,AAAA,AAAqBA,+DAKO,WAAS3F;AAAT,AAAA,aAAA,TAASA;AAAT,AAAoB,OAAC8D,gBAAM,AAAQ9D;;;AAL/D,CAAA,AAAA,oDAAA1G,pDAAqBqM;;AAArB,CAAA,AAAA,AAAqBA,iEAIO,WAAS3F;AAAT,AAAA,aAAA,TAASA;AAAT,AAAoB,OAACuG,gBAAM,AAAQvG;;;AAJ/D,CAAA,AAAA,8CAAA1G,9CAAqBqM;;AAArB,CAAA,AAAA,AAAqBA,2DAEO,WAAS3F;AAAT,AAAA,aAAA,TAASA;AAAT,AAAoB,QAACoG,sDAAAA,8DAAAA,VAAQpG,0CAAAA;;;AAFzD,CAAA,AAAA,+CAAA1G,/CAAqBqM;;AAArB,CAAA,AAAA,AAAqBA,6DAGO,WAAS3F,GAAGqG;AAAZ,AAAA,aAAA,TAASrG;AAAT,AAAoB,QAACsG,uDAAAA,qEAAAA,hBAAStG,iDAAAA,1CAAGqG,iDAAAA;;;AAH7D,CAAA,AAAA,4DAAA/M,5DAAqBqM;;AAArB,CAAA,AAAA,AAAqBA,iFAQO,WAAgB3F;AAAhB,AAAA,aAAA,TAAgBA;AAAhB,AAAoB,OAACiB,2BAAajB;;;AAR9D,CAAA,AAAA,6DAAA1G,7DAAqBqM;;AAArB,CAAA,AAAA,AAAqBA,2EAMO,WAAS3F;AAAT,AAAA,aAAA,TAASA;AAAT,AAAoB,OAACwG,oBAAU,iBAAAC,WAAU,AAAUzG;AAApB,AAAA,oHAAAyG,6CAAAA,zJAACC,uDAAAA,iEAAAA;KAAwB,AAACC,eAAK3G;;;AAN1F,CAAA,AAAA,6DAAA1G,7DAAqBqM;;AAArB,CAAA,AAAA,AAAqBA,gFASO,WAAS3F,GAAG8G;AAAZ,AAAA,aAAA,TAAS9G;AAAT,AAAiB,MAAO,gDAAA,uCAAA,vFAACS;;;AATrD,CAAA,AAAA,AAAqBkF,sFAUO,WAAe3F;AAAf,AAAA,aAAA,TAAeA;AAAf,AAAmB,OAACoB,kCAAepB;;;AAV/D,CAAA,AAAA,6DAAA1G,7DAAqBqM;;AAArB,CAAA,AAAA,AAAqBA,uFA0FnB,WAAqBhP;AAArB,AAAA,YAAA,RAAqBA;AAArB,AAAA;;;AA1FF,CAAA,AAAA,yDAAA2C,zDAAqBqM;;AAArB,CAAA,AAAA,AAAqBA,wEAsEnB,WAAU3F,GAAGC,MAAMmH;AAAnB,AAAA,aAAA,TAAUpH;AAAV,AACE,AAACM,+BAAiBN,OAAGC,MAAMmH;;AAC3B,OAACF,oEAAU,AAAC9E,4CAAIpC,OAAGC,OAAO,CAACoH,qEAAAA,sGAAAA,nCAAoBrH,kFAAAA,3EAAGC,kFAAAA,5EAAMmH,kFAAAA,/EAAG/Q,AAAA,kFAAAA,AAAA,9EAAGC,AAAA,kFAAAA,AAAA,cAAK,CAAC+Q,qEAAAA,gHAAAA,7CAAoBrH,4FAAAA,rFAAGC,4FAAAA,tFAAMmH,4FAAAA,zFAAG7Q,AAAA,4FAAAA,AAAA,/EAAKC,AAAA,4FAAAA,AAAA;;;AAxE7G,CAAA,AAAA,AAAqBmP,6EA0EnB,WAAe3F,GAAGC,MAAMmH;AAAxB,AAAA,aAAA,TAAepH;AAAf,AACE,AAACM,+BAAiBN,OAAGC,MAAMmH;;AAC3B,OAACF,oEAAU,AAAC9E,4CAAIpC,OAAGC,OAAO,CAACoH,qEAAAA,sGAAAA,nCAAoBrH,kFAAAA,3EAAGC,kFAAAA,5EAAMmH,kFAAAA,/EAAG/Q,AAAA,kFAAAA,AAAA,9EAAGC,AAAA,kFAAAA,AAAA,cAAK,+DAAA,KAAA,pEAAC6F,kDAAM5F,AAAA,uBAAaC,AAAA;;;AA5E3F,CAAA,AAAA,AAAqBmP,8EA8EnB,WAAgB3F,GAAGC,MAAMmH;AAAzB,AAAA,aAAA,TAAgBpH;AAAhB,AACE,AAACM,+BAAiBN,OAAGC,MAAMmH;;AAC3B,OAACE,qEAAW,AAAClF,4CAAIpC,OAAGC,OAAO,CAACoH,qEAAAA,gHAAAA,7CAAoBrH,4FAAAA,rFAAGC,4FAAAA,tFAAMmH,4FAAAA,zFAAG7Q,AAAA,4FAAAA,AAAA,/EAAKC,AAAA,4FAAAA,AAAA,eAAO,sDAAA,KAAA,3DAAC2F,kDAAM9F,AAAA,cAAWC,AAAA;;;AAhF9F,CAAA,AAAA,AAAqBqP,6EAkFnB,WAAe3F,GAAGG,KAAKC,MAAMC;AAA7B,AAAA,aAAA,TAAeL;AAAf,AACE,sCAAA,qDAAA,3FAACM,+BAAiBN,+IAAUG;;AAC5B,IAAAoH,iBAAepH;IAAfqH,iBAAoB,KAAA5L,eAAA,KAAA,AAAA,wEAAA,KAAAA,eAAA,KAAA,AAAA,sDAAA,KAAAA,eAAA,UAAA,KAAAA,eAAA,WAAA,KAAAA,eAAA,SAAA,KAAA,IAAA,OAAA,IAAA,OAAA,IAAA,OAAA,IAAA,OAAA,IAAA,tHAAwBuE,8BAAKC,+BAAMC;AAAvD,AAAA,uHAAAkH,eAAAC,wDAAAD,eAAAC,5MAACC,4DAAAA,2FAAAA;;AACD,OAACP,oEAAU,AAAQlH,YACjB,8HAAA,gBAAA,qEAAA,gBAAA,lOAAC0H,4DAAAA,yGAAAA,/CAAc1H,qFAAAA,zEAAOG,qFAAAA,hFAAKC,qFAAAA,1EAAU/J,AAAA,qFAAAA,AAAA,jFAAGC,AAAA,qFAAAA,AAAA,cACxC,8HAAA,cAAA,+EAAA,cAAA,xOAACoR,4DAAAA,iHAAAA,vDAAc1H,6FAAAA,jFAAOG,6FAAAA,xFAAKE,6FAAAA,pFAAQ9J,AAAA,6FAAAA,AAAA,hFAAKC,AAAA,6FAAAA,AAAA;;;AAvF9C,CAAA,AAAA,gDAAA8C,hDAAqBqM;;AAArB,CAAA,AAAA,AAAqBA,+DA0BnB,WAAU3F;AAAV,AAAA,aAAA,TAAUA;AAAV,AAAc,OAAUA;;;AA1B1B,CAAA,AAAA,AAAqB2F,iEA2BnB,WAAY3F,GAAGgB;AAAf,AAAA,aAAA,TAAYhB;AAAZ,AAAyB,IAAA+G,eAAC,AAAW/G;AAAZ,AAAA,QAAA+G,6CAAAA,uDAAAA,ZAAgB/F,mCAAAA;;;AA3B3C,CAAA,AAAA,oDAAA1H,pDAAqBqM;;AAArB,CAAA,AAAA,AAAqBA,mEA8BnB,WAAU3F,GAAGX;AAAb,AAAA,aAAA,TAAUW;AAAV,AACE,IAAAgH,aAAiB3H;QAAjB,AAAA3H,4CAAAsP,WAAA,IAAA,/DAAOnN;QAAP,AAAAnC,4CAAAsP,WAAA,IAAA,/DAASlN;QAAT,AAAApC,4CAAAsP,WAAA,IAAA,/DAAWjN;SAAX,AAAArC,4CAAAsP,WAAA,IAAA,hEAAahN;IACP6H,OAAW,AAAQ7B;IACnB8B,OAAW,AAAQ9B;IACnB+B,OAAW,AAAQ/B;IACnBiH,kBAAW,AAAC1C,0BAAU,+BAAA,/BAACzD,wBAAUd,uFAAyBlG;AAJhE,AAKE,oBAAYD;AAAZ,oBAAcC;AAAd,GAAgB,GAAA,MAAA,LAAOC;AAAvB,oBAA0BC;AACvB,OAACkN,oEAAUrF,KAAK,AAAC1F,kDAAMtC,EAAEC,EAAEC,EAAEC,IAAI,AAACmC,kDAAMtC,EAAEC,EAAEC,EAAEC;;AAC9C,OAACkN,oEAAUrF,KAAK,AAAC1F,kDAAMtC,EAAEC,EAAEC,EAAEzD,AAAA,aAAK,AAAC6F,kDAAMtC,EAAEC,EAAEC,EAAEvD,AAAA;;;AAFlD,oBAA0BwD;AAIlB,OAACmN,+CAAO,WAAYjN;AAAZ,AAAe,OAACyB,6CAAE3B,GAAG,AAAUE;GADvC,AAACgN,oEAAUrF,KAAK,sDAAA,tDAAC1F,kDAAMtC,EAAEC,OAAMxD,AAAA,aAAK,sDAAA,tDAAC6F,kDAAMtC,EAAEC,OAAMtD,AAAA;;AAExD,OAAC0Q,oEAAUrF,KAAK,sDAAA,tDAAC1F,kDAAMtC,EAAEC,OAAMxD,AAAA,aAAK,sDAAA,tDAAC6F,kDAAMtC,EAAEC,OAAMtD,AAAA;;;;AALtD,GAAgB,GAAA,MAAA,LAAOuD;AAAvB,oBAA0BC;AAOlB,OAACmN,+CAAO,WAAYjN;AAAZ,AAAe,SAAK,AAACyB,6CAAE5B,EAAE,AAAKG,UACV,AAACyB,6CAAE3B,GAAG,AAAUE;GAF5C,AAACgN,oEAAUrF,KAAK,oDAAA,KAAA,zDAAC1F,kDAAMtC,YAAUvD,AAAA,aAAK,oDAAA,KAAA,zDAAC6F,kDAAMtC,YAAUrD,AAAA;;AAIvD,OAAC2Q,+CAAO,WAAYjN;AAAZ,AAAe,OAACyB,6CAAE5B,EAAE,AAAKG;GADjC,AAACgN,oEAAUrF,KAAK,oDAAA,KAAA,zDAAC1F,kDAAMtC,YAAUvD,AAAA,aAAK,oDAAA,KAAA,zDAAC6F,kDAAMtC,YAAUrD,AAAA;;;AAT/D,oBAA0BwD;AAYlB,OAACmN,+CAAO,WAAYjN;AAAZ,AAAe,OAACyB,6CAAE3B,GAAG,AAAUE;GADvC,AAACgN,oEAAUrF,KAAK,oDAAA,KAAA,zDAAC1F,kDAAMtC,YAAUvD,AAAA,aAAK,oDAAA,KAAA,zDAAC6F,kDAAMtC,YAAUrD,AAAA;;AAE5D,OAAC0Q,oEAAUrF,KAAK,oDAAA,KAAA,zDAAC1F,kDAAMtC,YAAUvD,AAAA,aAAK,oDAAA,KAAA,zDAAC6F,kDAAMtC,YAAUrD,AAAA;;;;;AAb1D,oBAAcsD;AAAd,GAAgB,GAAA,MAAA,LAAOC;AAAvB,oBAA0BC;AAcvB,oBAAI,CAACwG,8DAAAA,wEAAAA,ZAAUR,oDAAAA,7CAAGlG,oDAAAA;AAEX,OAACqN,+CAAO,WAAYjN;AAAZ,AAAe,OAACyB,6CAAE3B,GAAG,AAAUE;GADvC,AAACgN,oEAAUnF,KAAK,AAAC5F,kDAAM9F,AAAA,IAAGyD,EAAEC,EAAEzD,AAAA,aAAK,AAAC6F,kDAAM5F,AAAA,aAAKuD,EAAEC,EAAEvD,AAAA;;AAGnD,OAAC2Q,+CAAO,WAAYjN;AAAZ,AAAe,SAAK,AAACyB,6CAAE5B,EAAE,AAAKG,UACV,AAACyB,6CAAE3B,GAAG,AAAUE;GAF5C,AAACgN,oEAAUpF,KAAK,wDAAA,xDAAC3F,kDAAM9F,AAAA,IAAGyD,OAAMxD,AAAA,aAAK,iEAAA,jEAAC6F,kDAAM5F,AAAA,aAAKuD,OAAMtD,AAAA;;;AAG9D,oBAAI,CAACgK,8DAAAA,wEAAAA,ZAAUR,oDAAAA,7CAAGlG,oDAAAA;AAChB,OAACoN,oEAAUnF,KAAK,AAAC5F,kDAAM9F,AAAA,IAAGyD,EAAEC,EAAEzD,AAAA,aAAK,AAAC6F,kDAAM5F,AAAA,aAAKuD,EAAEC,EAAEvD,AAAA;;AAE9C,OAAC2Q,+CAAO,WAAYjN;AAAZ,AAAe,OAACyB,6CAAE5B,EAAE,AAAKG;GADjC,AAACgN,oEAAUpF,KAAK,wDAAA,xDAAC3F,kDAAM9F,AAAA,IAAGyD,OAAMxD,AAAA,aAAK,iEAAA,jEAAC6F,kDAAM5F,AAAA,aAAKuD,OAAMtD,AAAA;;;;AAtBjE,oBAA0BwD;AAyBlB,OAACmN,+CAAO,WAAYjN;AAAZ,AAAe,OAACyB,6CAAE3B,GAAG,AAAUE;GADvC,AAACgN,oEAAUpF,KAAK,wDAAA,xDAAC3F,kDAAM9F,AAAA,IAAGyD,OAAMxD,AAAA,aAAK,iEAAA,jEAAC6F,kDAAM5F,AAAA,aAAKuD,OAAMtD,AAAA;;AAE5D,OAAC0Q,oEAAUpF,KAAK,wDAAA,xDAAC3F,kDAAM9F,AAAA,IAAGyD,OAAMxD,AAAA,aAAK,iEAAA,jEAAC6F,kDAAM5F,AAAA,aAAKuD,OAAMtD,AAAA;;;;AA1B1D,GAAgB,GAAA,MAAA,LAAOuD;AAAvB,oBAA0BC;AA2BvB,OAACmN,+CAAO,WAAYjN;AAAZ,AAAe,SAAK,AAACyB,6CAAE5B,EAAE,AAAKG,UACV,AAACyB,6CAAE3B,GAAG,AAAUE;GAAM2H;;AAClD,OAACsF,+CAAO,WAAYjN;AAAZ,AAAe,OAACyB,6CAAE5B,EAAE,AAAKG;GAAK2H;;;AA7BzC,oBAA0B7H;AA8BvB,OAACmN,+CAAO,WAAYjN;AAAZ,AAAe,OAACyB,6CAAE3B,GAAG,AAAUE;GAAK2H;;AAC5CA;;;;;;AA6BT,0BAAA,1BAAM8F,4DAAKhR;AAAX,AACE,IAAA2D,oBAAK,EAAA,GAAA,MAAA,SAAA,EAAA,EAAA,WAAA,CAAAhB,gCAAA,6BAAA,KAAA,EAAA,EAAA,uCAAA,AAAA0D,2DAAA,QAAA,AAAAA,jCAAYmC,mEAAAA,hPAAQxI,8DAAAA,sCAAAA,+FAAAA,mEAAAA;AAAzB,AAAA,GAAA2D;AAAA,IAAAA,wBACK,EAAA,GAAA,MAAA,SAAA,EAAA,EAAA,WAAA,CAAAhB,gCAAA,kCAAA,KAAA,EAAA,EAAA,uCAAA,AAAA0D,gEAAA,QAAA,AAAAA,tCAAY+C,wEAAAA,1PAAapJ,8DAAAA,2CAAAA,oGAAAA,wEAAAA;AAD9B,AAAA,GAAA2D;AAEK,GAAA,GAAA,MAAA,LAAgB3D;AAAhB,GAAA,EAAA,WAAA,CAAA2C,gCAAA,AAAgB3C;AAAhB;;AAAA,GAAA,EAAA,AAAgBA;AAAhB,OAAAqG,kCAAY+D,kBAAIpK;;AAAhB;;;;AAAA,OAAAqG,kCAAY+D,kBAAIpK;;;AAFrB2D;;;AAAAA;;;AAKF,AAAA,AAAA,AAAA,AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,AAAA,CAAA,AAAA,uEAAA,WAAAgH,mBAAAC,rGAAqBiH;;AAArB,AAAA,IAAAlH,yBAAA;AAAA,AAAA,OAAAA,8DAAAC,gBAAA;;;AAAA,CAAA,AAAA,uEAAA,WAAAC,mBAAAoG,OAAAlG,5GAAqB8G;;AAArB,AAAA,IAAAhH,yBAAA;AAAA,AAAA,IAAAqG,WAAAD;IAAAC,eAAA,EAAA,CAAAA,oBAAA3L,oBAAA,AAAA2L,aAAA;AAAA,AAAA,QAAAA;KAAA;AAAAC;;;KAAA;AAAAC;;;KAAA;AAAA5F;;;;AAAA,OAAAC,4CAAAC,gBAAAuF,OAAAlG;;;;;AAAA,CAAA,AAAA,4EAAA,WAAAY,mBAAAC,gBAAAC,1HAAqBgG;;AAArB,AAAA,IAAAlG,yBAAA;AAAA,AAAA,OAAA/K,+CAAA,WAAAkL,kBAAAuF;AAAA,AAAA,IAAAC,aAAAD;IAAApF,kBAAA,AAAAlL,4CAAAuQ,WAAA,IAAA;IAAApF,kBAAA,AAAAnL,4CAAAuQ,WAAA,IAAA;AAAA,AAAA,QAAA1F,gDAAAA,8CAAAE,kBAAAG,gBAAAC,mBAAAN,0BAAAE,kBAAAG,gBAAAC;GAAAL,mBAAAF;;;AAAA,CAAA,AAAA,mFAAA,WAAAQ,mBAAAC,qBAAAC,tIAAqBwF;;AAArB,AAAA,IAAA1F,yBAAA;AAAA,AAAA,IAAAG,wBAAA,WAAAC;AAAA,AAAA,OAAAhI,+BAAA6H,qBAAA,oBAAA,GAAA,IAAA,GAAAC,mBAAAE;;AAAA,AAAA,OAAAhI,+BAAA6H,qBAAAE,sBAAA,6BAAA,KAAA,IAAAD,mBAAA,AAAAG,+CAAA,mFAAA,KAAAC,2BAAA,KAAA,EAAA,IAAA,AAAAA,sCAAA,CAAA,wEAAA0E,sBAAA,OAAA,KAAA1E,2BAAA,KAAA,EAAA,IAAA,AAAAA,sCAAA,CAAA,qDAAA2E,aAAA,OAAA,KAAA3E,2BAAA,KAAA,EAAA,IAAA,AAAAA,sCAAA,CAAA,oDAAAjB,aAAA,eAAAE;;;AAAA,CAAA,AAAA,2EAAA,WAAA6F,tFAAqBM;;AAArB,AAAA,IAAAN,eAAA;AAAA,AAAA,YAAA5E,qBAAA,IAAA4E,aAAA,EAAA,mFAAA,wEAAA,qDAAA,4DAAA,kBAAA7F,iBAAA,AAAAkB,oBAAAlB,iBAAA,AAAAmB;;;AAAA,CAAA,AAAA,mEAAA,WAAAC,9EAAqB+E;;AAArB,AAAA,IAAA/E,yBAAA;AAAA,AAAAC;;;AAAA,CAAA,AAAA,yEAAA,WAAAC,pFAAqB6E;;AAArB,AAAA,IAAA7E,yBAAA;AAAA,AAAA,qCAAAmE,qBAAAC,YAAA5F,YAAAuB,cAAArB,gBAAAuB,pGAAqB4E;;;AAArB,CAAA,AAAA,uEAAA,WAAA3E,lFAAqB2E;;AAArB,AAAA,IAAA3E,yBAAA;AAAA,AAAA,QAAA,IAAA,AAAAC,gBAAAzB;;;AAAA,CAAA,AAAA,mEAAA,WAAA0B,9EAAqByE;;AAArB,AAAA,IAAAzE,yBAAA;AAAA,AAAA,IAAAC,kBAAAJ;AAAA,AAAA,GAAA,GAAA,CAAAI,mBAAA;AAAAA;;AAAA,IAAAA,sBAAA,AAAA,WAAAC;AAAA,AAAA,QAAA,aAAA,AAAAC,8BAAAD;GAAAF;AAAA,AAAA,CAAAH,gBAAAI;;AAAAA;;;;AAAA,CAAA,AAAA,qEAAA,WAAAmE,UAAAC,1FAAqBI;;AAArB,AAAA,IAAAL,gBAAA;AAAA,AAAA,SAAA,GAAA,CAAAC,cAAA,aAAA,EAAA,CAAA,AAAAD,8BAAA,AAAAC,6BAAA,EAAA,AAAAzM,6CAAA,AAAAwM,4BAAA,AAAAC,+BAAA,EAAA,AAAAzM,6CAAA,AAAAwM,mBAAA,AAAAC,sBAAA,EAAA,AAAAzM,6CAAA,AAAAwM,mBAAA,AAAAC,sBAAA,AAAAzM,6CAAA,AAAAwM,uBAAA,AAAAC;;;AAAA,CAAA,AAAA,oEAAA,WAAA/D,mBAAAC,lGAAqBkE;;AAArB,AAAA,IAAAnE,yBAAA;AAAA,AAAA,GAAA,AAAAE,0BAAA,iFAAA,yDAAA,0DAAA,4FAAAD;AAAA,OAAAE,+CAAA,AAAAC,qBAAA,AAAA/F,6CAAA,mCAAA2F,wBAAAX,eAAAY;;AAAA,qCAAAwD,qBAAAC,YAAA5F,YAAAuB,cAAA,AAAAjF,oBAAA,AAAA+F,+CAAAnC,gBAAAiC,kBAAA,zLAAqBkE;;;;AAArB,CAAA,AAAA,yFAAA,WAAA9D,mBAAAkD,vHAAqBY;;AAArB,AAAA,IAAA9D,yBAAA;AAAA,AAAA,IAAA2D,WAAAT;IAAAS,eAAA,EAAA,CAAAA,oBAAAnM,oBAAA,AAAAmM,aAAA;AAAA,AAAA,QAAAA;KAAA;KAAA;KAAA;AAAA;;;;AAAA,OAAA9D,0BAAAlC,gBAAAuF;;;;;AAAA,CAAA,AAAA,2EAAA,WAAAhD,mBAAAC,gBAAAqD,zHAAqBM;;AAArB,AAAA,IAAA5D,yBAAA;AAAA,AAAA,IAAA0D,cAAAvD;IAAAwD,cAAA1D;AAAA,AAAA,oBAAA,CAAAyD,4CAAAA,0CAAA,wEAAAC,eAAAD,sBAAA,wEAAAC;AAAA,qCAAAL,SAAAH,YAAA5F,YAAAuB,cAAArB,gBAAA,xFAAqBmG;;AAArB,oBAAA,CAAAF,4CAAAA,0CAAA,qDAAAC,eAAAD,sBAAA,qDAAAC;AAAA,qCAAAT,qBAAAI,SAAA/F,YAAAuB,cAAArB,gBAAA,jGAAqBmG;;AAArB,oBAAA,CAAAF,4CAAAA,0CAAA,oDAAAC,eAAAD,sBAAA,oDAAAC;AAAA,qCAAAT,qBAAAC,YAAAG,SAAAxE,cAAArB,gBAAA,jGAAqBmG;;AAArB,qCAAAV,qBAAAC,YAAA5F,YAAAuB,cAAA,AAAAuB,8CAAA5C,gBAAAwC,gBAAAqD,UAAA,5KAAqBM;;;;;;AAArB,CAAA,AAAA,qEAAA,WAAAtD,hFAAqBsD;;AAArB,AAAA,IAAAtD,yBAAA;AAAA,AAAA,OAAAC,cAAA,AAAAhC,+CAAA,mFAAA,KAAAiC,mBAAA,wEAAA0C,qBAAA,OAAA,KAAA1C,mBAAA,qDAAA2C,YAAA,OAAA,KAAA3C,mBAAA,oDAAAjD,YAAA,eAAAE;;;AAAA,CAAA,AAAA,4EAAA,WAAAgD,mBAAA6C,1GAAqBM;;AAArB,AAAA,IAAAnD,yBAAA;AAAA,AAAA,qCAAAyC,qBAAAC,YAAA5F,YAAA+F,SAAA7F,gBAAAuB,/FAAqB4E;;;AAArB,CAAA,AAAA,yEAAA,WAAAlD,mBAAAC,vGAAqBiD;;AAArB,AAAA,IAAAlD,yBAAA;AAAA,AAAA,GAAA,AAAAE,wBAAAD;AAAA,OAAAD,kEAAA,AAAAG,eAAAF,oBAAA,KAAA,AAAAE,eAAAF,oBAAA;;AAAA,OAAAhO,+CAAAmO,gBAAAJ,uBAAAC;;;;AAAA,CAAA,AAAAiD,oCAAA;AAAA,AAAA,AAAA;;;AAAA,CAAA,AAAAA,0CAAA;;AAAA,CAAA,AAAAA,+CAAA,WAAA5C;AAAA,AAAA,YAAAhK,eAAA,KAAA,2BAAA,KAAA,IAAA;;;AAAA,CAAA,AAAA4M,kDAAA,WAAA5C,mBAAAC;AAAA,AAAA,OAAAnM,iBAAAmM,qBAAA;;;AAAA;;;gCAAA,hCAAqB8C,wEAAYb,cAAcC,KAAK5F;AAApD,AAAA,YAAAqG,iDAAA,KAAA,KAAA,lCAAiCV,cAAcC,KAAK5F;;;AAApD;;;mCAAA,2CAAAsG,9EAAqBG;AAArB,AAAA,IAAA7C,uBAAA,iBAAA2C,WAAA,AAAAlE,sDAAAiE,SAAA,0HAAA,qDAAA;AAAA,AAAA,GAAA,AAAAxC,wBAAAwC;AAAA,OAAA/J,6CAAA,mCAAAgK;;AAAAA;;;AAAA,AAAA,YAAAF,yBAAA,AAAA,sGAAAC,UAAA,AAAA,mFAAAA,UAAA,AAAA,kFAAAA,UAAA,KAAA,AAAAhK,oBAAAsH,sBAAA;;;AAAAyC;AAAA,AAAA,CAAA,AAAA,wDAAAlP,xDAAqBkP;;AAArB,CAAA,AAAA,AAAqBA,uEASO,WAAWrO,EAAEA;AAAb,AAAA,YAAA,RAAWA;AAAX,AAAoB,MAAO,KAAAjE,MAAA;;;AATvD,CAAA,AAAA,AAAqBsS,uEASO,WACWrO,EAAEA,MAAEA;AADf,AAAA,YAAA,RACWA;AADX,AACoB,MAAO,KAAAjE,MAAA;;;AAVvD,CAAA,AAAA,iEAAAoD,jEAAqBkP;;AAArB,CAAA,AAAA,AAAqBA,mFAKO,WAAaxI,GAAG4G,EAAE3L;AAAlB,AAAA,aAAA,TAAa+E;AAAb,AAAwB,QAAC6G,oDAAAA,mEAAAA,jBAAM7G,+CAAAA,xCAAG4G,+CAAAA,7CAAE3L,+CAAAA;;;AALhE,CAAA,AAAA,yDAAA3B,zDAAqBkP;;AAArB,CAAA,AAAA,AAAqBA,uEAIO,WAASxI;AAAT,AAAA,aAAA,TAASA;AAAT,AAAoB,OAAC8D,gBAAM,6BAAA,qDAAA,lFAACtE,sBAAQQ;;;AAJhE,CAAA,AAAA,sDAAA1G,tDAAqBkP;;AAArB,CAAA,AAAA,AAAqBA,mEAEO,WAASxI;AAAT,AAAA,aAAA,TAASA;AAAT,AAAoB,QAAC6I,uDAAAA,+DAAAA,VAAS7I,2CAAAA;;;AAF1D,CAAA,AAAA,uDAAA1G,vDAAqBkP;;AAArB,CAAA,AAAA,AAAqBA,qEAGO,WAASxI,GAAGqG;AAAZ,AAAA,aAAA,TAASrG;AAAT,AAAoB,QAACsG,uDAAAA,qEAAAA,hBAAStG,iDAAAA,1CAAGqG,iDAAAA;;;AAH7D,CAAA,AAAA,qEAAA/M,rEAAqBkP;;AAArB,CAAA,AAAA,AAAqBA,mFAOO,WAASrO;AAAT,AAAA,YAAA,RAASA;AAAT,AAAoB,MAAO,KAAAjE,MAAA;;;AAPvD,CAAA,AAAA,6DAAAoD,7DAAqBkP;;AAArB,CAAA,AAAA,AAAqBA,yFAaO,WAAiBrO,EAAEA;AAAnB,AAAA,YAAA,RAAiBA;AAAjB,AAAsB,MAAO,KAAAjE,MAAA;;;AAbzD,CAAA,AAAA,AAAqBsS,2EAcO,WAASrO,EAAEA,MAAEA;AAAb,AAAA,YAAA,RAASA;AAAT,AAAsB,MAAO,KAAAjE,MAAA;;;AAdzD,CAAA,AAAA,iEAAAoD,jEAAqBkP;;AAArB,CAAA,AAAA,AAAqBA,gFAiDnB,WAAUxI,GAAGC,MAAMmH;AAAnB,AAAA,aAAA,TAAUpH;AAAV,AACE,OAACmH,+CAAO,AAAQnH,YAAI,AAACR,sBAAQ,AAAiBQ,qBAAIC,MAAMmH;;;AAlD5D,CAAA,AAAA,AAAqBoB,qFAoDnB,WAAexI,GAAGC,MAAMmH;AAAxB,AAAA,aAAA,TAAepH;AAAf,AACE,OAACmH,+CAAO,AAAQnH,YAAI,AAACN,2BAAa,AAAiBM,qBAAIC,MAAMmH;;;AArDjE,CAAA,AAAA,AAAqBoB,sFAuDnB,WAAgBxI,GAAGC,MAAMmH;AAAzB,AAAA,aAAA,TAAgBpH;AAAhB,AACE,OAACmH,+CAAO,AAAQnH,YAAI,AAACJ,4BAAc,AAAiBI,qBAAIC,MAAMmH;;;AAxDlE,CAAA,AAAA,AAAqBoB,qFA0DnB,WAAexI,GAAGG,KAAKC,MAAMC;AAA7B,AAAA,aAAA,TAAeL;AAAf,AACE,OAACmH,+CAAO,AAAQnH,YAAI,AAACF,2BAAa,AAAiBE,qBAAIG,KAAKC,MAAMC;;;AA3DtE,CAAA,AAAA,wDAAA/G,xDAAqBkP;;AAArB,CAAA,AAAA,AAAqBA,uEAsCnB,WAAUxI;AAAV,AAAA,aAAA,TAAUA;AAAV,AACE,OAACY,sBAAQ,AAAiBZ;;;AAvC9B,CAAA,AAAA,AAAqBwI,yEAyCnB,WAAYxI,GAAGgB;AAAf,AAAA,aAAA,TAAYhB;AAAZ,AACE,OAACc,wBAAU,AAAiBd,qBAAIgB;;;AA1CpC,CAAA,AAAA,4DAAA1H,5DAAqBkP;;AAArB,CAAA,AAAA,AAAqBA,2EA6CnB,WAAUxI,GAAGX;AAAb,AAAA,aAAA,TAAUW;AAAV,AACE,OAACmH,+CAAO,AAAQnH,YAAI,AAACd,sBAAQ,AAAiBc,qBAAIX;;AAiBtD,oCAAA,pCAAMyJ,gFAAkBrO,EAAEV;AAA1B,AACE,IAAAgP,WAAMhP;IAANgP,eAAA,EAAA,CAAAA,oBAAA7M,oBAAA,AAAA6M,aAAA;AAAA,AAAA,QAAAA;KAAA;AAAA,0FAAA,2DAAA,8EAAA;;;KAAA;AAAA,0FAAA,2DAAA,uEAAA;;;KAAA;AAAA,0FAAA;;;KAAA;AAAA,0FAAA,iEAAA;;;;AAKE,GACE,EAAK,6CAAA,7CAACpN,kHAAkBlB,QAAG,AAAOV;AADpC,0FAAA;;AAAA,GAEE,EAAK,6CAAA,7CAAC4B,wGAAYlB,QAAG,AAAOV;AAF9B,0FAAA;;AAAA,GAGE,6CAAA,7CAAC4B,gHAAiBlB;AAHpB,0FAAA,mEAAA;;AAAA,AAAA;;;;;;;;AAMJ;;;4BAAA,5BAAMuO,gEAEHpH,OAAOM;AAFV,AAGE,OAAC3K,+CACC,WAAK0R,EAAEC;AAAP,AACE,OAAChS,6BACC,WAAK+R,MAAEE,SAASvR;AAAhB,AACE,OAACsJ,+CAAO+H,MAAEE,SAASC,gBAAMF,WAAWtR;GACtCqR,EACA,AAAA,iGAAA,qFAAIrH,+BAAAA,nHAAOsH,2CAAAA,mDAAAA;GANjB,mCAQE,AAAA,iGAAgBhH;;AAEpB;;;;;;;;;;;wBAAA,xBAAOmH,wDAUJzH;AAVH,AAWE,IAAMM,UAAQ,AAACoH,oBACC,WAAKpH,QAAQ/B,KAAKoJ;AAAlB,AACE,OAACD,oBACC,WAAKpH,YAAQ4E,IAAIzN;AAAjB,AACE,OAAC9B,+CACC,WAAK2K,YAAQsH;AAAb,AACE,OAACtI,+CAAOgB,YAAQsH,KAAKvS,oBAAMkJ;GAC7B+B,YAAQ,AAAC4G,kCAAiBhC,IAAIzN;GAClC6I,QAAQqH;GARd,mCASK3H;AATnB,AAUE,6DAAA,tDAACqD,8CAAM/C,2EAAuB,AAAC8G,0BAAYpH,OAAOM;;AAEtD,oCAAA,pCAAOuH,gFAAqB3P,EAAEW,EAAEV,EAAE2P;AAAlC,AACE,GAAU,EAAI,MAAA,LAAM3P,gBACN,AAACwK,0BAAUmF,SAAS3P;AADlC;;AAAA,AAEE,MAAO,iYAAA,2CAAA,uDAAA,4EAAA,kEAAA,sDAAA,vqBAAC0G,gDAAQ,CAAA,2PAAA,xNAAwC,wGAAA,kDAAA,1JAACC,wJAAQ5G,kDAAGW,EAAEV,6EAA0B2P,kQAEpE5P,sDACNW,wDACEV;;;AAE5B,gCAAA,hCAAO4P,wEAAiB/H;AAAxB,AACE,IAAAgI,aAAA,AAAAzE,cAAevD;IAAfiI,eAAA;IAAAC,eAAA;IAAAC,WAAA;;AAAA,AAAA,GAAA,AAAA,CAAAA,WAAAD;AAAA,IAAAE,aAAA,AAAAH,kDAAAE;QAAA,AAAArS,4CAAAsS,WAAA,IAAA,/DAASlQ;SAAT,AAAApC,4CAAAsS,WAAA,IAAA,hEAAWO;AAAX,AAAA,AAGE,IAAMC,oBAAM,AAAA,sGAAA,HAAiBD;AAA7B,AACE,oCAAA,4KAAA,iFAAA,UAAA,3SAACd,kCAAoB3P,uEAAkB,AAAA,mGAAiByQ;;AACxD,oBAAM,iBAAAjQ,oBAAKkQ;AAAL,AAAA,oBAAAlQ;AAAW,2JAAA,pJAACmQ,gDAAK,AAAA,gGAAeF;;AAAhCjQ;;;AAAN,AACE,MAAA,AAAAmG,gDAAA,CAAA,mCAAA,AAAAC,gHAAA,mFAAA,2CAAA,uDAAA,4EAAA,kEAAA,oDAAA,/XAA0C5G,yUAE5BA;;AAHhB;;AAMF,oCAAA,wJAAA,iFAAA,mFAAA,hWAAC2P,kCAAoB3P,6DAAa,AAAA,yFAAYyQ;;AAC9C,oCAAA,sKAAA,iFAAA,3RAACd,kCAAoB3P,oEAAgB,AAAA,gGAAeyQ;;AACpD,oCAAA,8KAAA,iFAAA,oFAAA,vXAACd,kCAAoB3P,wEAAkB,AAAA,oGAAiByQ;;AAGxD,GAAM,6BAAA,7BAAChG,0BAAUgG;AAAjB,AACE,oBAAA,2CAAA,uDAAA,4EAAA,kEAAA,oDAAA,pTAAMG,8PACoB5Q;AAD1B,AAGE,GAAM,6CAAA,7CAAC6B,4HAAuB,AAAA,oGAAiB4O;AAA/C,AACE,MAAA,AAAA9J,gDAAA,CAAA,AAAAC,gHAAA,RAAO5G,qEAAqD4Q;;AAD9D;;AAGA,IAAMC,cAAM,AAAA,iGAAgBJ;AAA5B,AACE,GAAU,AAACK,4BAAYD;AAAvB;AAAA,AACE,MAAA,AAAAlK,gDAAA,CAAA,AAAAC,gHAAA,yDAAA,AAAAA,jEAAO5G,yKAA2D6Q,4BAAMD;;;AAE1E,GAAM,AAAClM,uBAAOmM;AAAd,AACE,MAAA,AAAAlK,gDAAA,CAAA,AAAAC,gHAAA,RAAO5G,wDAAmC4Q;;AAD5C;;AAGA,IAAAG,mBAAA,AAAA1F,cAAawF;IAAbG,qBAAA;IAAAC,qBAAA;IAAAC,iBAAA;;AAAA,AAAA,GAAA,AAAA,CAAAA,iBAAAD;AAAA,iBAAA,AAAAD,wDAAAE,rEAAQ7K;AAAR,AAAA,IACcuK,oBAAQ,4DAAA,5DAACzF,8CAAMyF,oEAAevK;AAD5C,AAAA,AAEE,GAAM,yFAAA,zFAACoE,0BAAU,AAACnC,4CAAIR,OAAOzB;AAA7B,AACE,MAAA,AAAAM,gDAAA,CAAA,AAAAC,gHAAA,iEAAA,AAAAA,zEAAO5G,iLAA8DqG,2BAAKuK;;AAD5E;;AAGA,GAAM,6CAAA,7CAAC/O,4HAAuB,AAAA,oGAAiB,AAACyG,4CAAIR,OAAOzB;AAA3D,AACE,MAAA,AAAAM,gDAAA,CAAA,AAAAC,gHAAA,wEAAA,AAAAA,hFAAO5G,wLAAqEqG,2BAAKuK;;AADnF;;AALF;AAAA,eAAAG;eAAAC;eAAAC;eAAA,CAAAC,iBAAA;;;;;;;AAAA,IAAAf,2BAAA,AAAA9E,cAAA0F;AAAA,AAAA,GAAAZ;AAAA,AAAA,IAAAY,uBAAAZ;AAAA,AAAA,GAAA,AAAAC,6BAAAW;AAAA,IAAAV,wBAAA,AAAAC,sBAAAS;AAAA,AAAA,eAAA,AAAAR,qBAAAQ;eAAAV;eAAA,AAAArG,gBAAAqG;eAAA;;;;;;;AAAA,iBAAA,AAAA7S,gBAAAuT,7BAAQ1K;AAAR,AAAA,IACcuK,oBAAQ,4DAAA,5DAACzF,8CAAMyF,oEAAevK;AAD5C,AAAA,AAEE,GAAM,yFAAA,zFAACoE,0BAAU,AAACnC,4CAAIR,OAAOzB;AAA7B,AACE,MAAA,AAAAM,gDAAA,CAAA,AAAAC,gHAAA,iEAAA,AAAAA,zEAAO5G,iLAA8DqG,2BAAKuK;;AAD5E;;AAGA,GAAM,6CAAA,7CAAC/O,4HAAuB,AAAA,oGAAiB,AAACyG,4CAAIR,OAAOzB;AAA3D,AACE,MAAA,AAAAM,gDAAA,CAAA,AAAAC,gHAAA,wEAAA,AAAAA,hFAAO5G,wLAAqEqG,2BAAKuK;;AADnF;;AALF;AAAA,eAAA,AAAA1L,eAAA6L;eAAA;eAAA;eAAA;;;;;;;;AAAA;;;;;AAdN;;AAhBF;AAAA,eAAAjB;eAAAC;eAAAC;eAAA,CAAAC,WAAA;;;;;;;AAAA,IAAAE,qBAAA,AAAA9E,cAAAyE;AAAA,AAAA,GAAAK;AAAA,AAAA,IAAAL,iBAAAK;AAAA,AAAA,GAAA,AAAAC,6BAAAN;AAAA,IAAAO,kBAAA,AAAAC,sBAAAR;AAAA,AAAA,eAAA,AAAAS,qBAAAT;eAAAO;eAAA,AAAArG,gBAAAqG;eAAA;;;;;;;AAAA,IAAAG,aAAA,AAAAhT,gBAAAsS;QAAA,AAAAlS,4CAAA4S,WAAA,IAAA,/DAASxQ;SAAT,AAAApC,4CAAA4S,WAAA,IAAA,hEAAWC;AAAX,AAAA,AAGE,IAAMC,oBAAM,AAAA,sGAAA,HAAiBD;AAA7B,AACE,oCAAA,4KAAA,iFAAA,UAAA,3SAACd,kCAAoB3P,uEAAkB,AAAA,mGAAiByQ;;AACxD,oBAAM,iBAAAjQ,oBAAKkQ;AAAL,AAAA,oBAAAlQ;AAAW,2JAAA,pJAACmQ,gDAAK,AAAA,gGAAeF;;AAAhCjQ;;;AAAN,AACE,MAAA,AAAAmG,gDAAA,CAAA,mCAAA,AAAAC,gHAAA,mFAAA,2CAAA,uDAAA,4EAAA,kEAAA,oDAAA,/XAA0C5G,yUAE5BA;;AAHhB;;AAMF,oCAAA,wJAAA,iFAAA,mFAAA,hWAAC2P,kCAAoB3P,6DAAa,AAAA,yFAAYyQ;;AAC9C,oCAAA,sKAAA,iFAAA,3RAACd,kCAAoB3P,oEAAgB,AAAA,gGAAeyQ;;AACpD,oCAAA,8KAAA,iFAAA,oFAAA,vXAACd,kCAAoB3P,wEAAkB,AAAA,oGAAiByQ;;AAGxD,GAAM,6BAAA,7BAAChG,0BAAUgG;AAAjB,AACE,oBAAA,2CAAA,uDAAA,4EAAA,kEAAA,oDAAA,pTAAMG,8PACoB5Q;AAD1B,AAGE,GAAM,6CAAA,7CAAC6B,4HAAuB,AAAA,oGAAiB4O;AAA/C,AACE,MAAA,AAAA9J,gDAAA,CAAA,AAAAC,gHAAA,RAAO5G,qEAAqD4Q;;AAD9D;;AAGA,IAAMC,cAAM,AAAA,iGAAgBJ;AAA5B,AACE,GAAU,AAACK,4BAAYD;AAAvB;AAAA,AACE,MAAA,AAAAlK,gDAAA,CAAA,AAAAC,gHAAA,yDAAA,AAAAA,jEAAO5G,yKAA2D6Q,4BAAMD;;;AAE1E,GAAM,AAAClM,uBAAOmM;AAAd,AACE,MAAA,AAAAlK,gDAAA,CAAA,AAAAC,gHAAA,RAAO5G,wDAAmC4Q;;AAD5C;;AAGA,IAAAO,mBAAA,AAAA9F,cAAawF;IAAbO,qBAAA;IAAAC,qBAAA;IAAAC,iBAAA;;AAAA,AAAA,GAAA,AAAA,CAAAA,iBAAAD;AAAA,iBAAA,AAAAD,wDAAAE,rEAAQjL;AAAR,AAAA,IACcuK,oBAAQ,4DAAA,5DAACzF,8CAAMyF,oEAAevK;AAD5C,AAAA,AAEE,GAAM,yFAAA,zFAACoE,0BAAU,AAACnC,4CAAIR,OAAOzB;AAA7B,AACE,MAAA,AAAAM,gDAAA,CAAA,AAAAC,gHAAA,iEAAA,AAAAA,zEAAO5G,iLAA8DqG,2BAAKuK;;AAD5E;;AAGA,GAAM,6CAAA,7CAAC/O,4HAAuB,AAAA,oGAAiB,AAACyG,4CAAIR,OAAOzB;AAA3D,AACE,MAAA,AAAAM,gDAAA,CAAA,AAAAC,gHAAA,wEAAA,AAAAA,hFAAO5G,wLAAqEqG,2BAAKuK;;AADnF;;AALF;AAAA,eAAAO;eAAAC;eAAAC;eAAA,CAAAC,iBAAA;;;;;;;AAAA,IAAAnB,+BAAA,AAAA9E,cAAA8F;AAAA,AAAA,GAAAhB;AAAA,AAAA,IAAAgB,uBAAAhB;AAAA,AAAA,GAAA,AAAAC,6BAAAe;AAAA,IAAAd,wBAAA,AAAAC,sBAAAa;AAAA,AAAA,eAAA,AAAAZ,qBAAAY;eAAAd;eAAA,AAAArG,gBAAAqG;eAAA;;;;;;;AAAA,iBAAA,AAAA7S,gBAAA2T,7BAAQ9K;AAAR,AAAA,IACcuK,oBAAQ,4DAAA,5DAACzF,8CAAMyF,oEAAevK;AAD5C,AAAA,AAEE,GAAM,yFAAA,zFAACoE,0BAAU,AAACnC,4CAAIR,OAAOzB;AAA7B,AACE,MAAA,AAAAM,gDAAA,CAAA,AAAAC,gHAAA,iEAAA,AAAAA,zEAAO5G,iLAA8DqG,2BAAKuK;;AAD5E;;AAGA,GAAM,6CAAA,7CAAC/O,4HAAuB,AAAA,oGAAiB,AAACyG,4CAAIR,OAAOzB;AAA3D,AACE,MAAA,AAAAM,gDAAA,CAAA,AAAAC,gHAAA,wEAAA,AAAAA,hFAAO5G,wLAAqEqG,2BAAKuK;;AADnF;;AALF;AAAA,eAAA,AAAA1L,eAAAiM;eAAA;eAAA;eAAA;;;;;;;;AAAA;;;;;AAdN;;AAhBF;AAAA,eAAA,AAAAjM,eAAA4K;eAAA;eAAA;eAAA;;;;;;;;AAAA;;;;;;AAsCF,AAAA,yBAAA,iCAAAvO,1DAAUqL;AAAV,AAAA,IAAA2E,WAAA,AAAA;AAAA,AAAA,QAAAA;KAAA;AAAA,OAAA3E;;;KAAA;AAAA,OAAAA,qDAAA,CAAA,UAAA;;;;AAAA,MAAA,KAAAxQ,MAAA,CAAA,8DAAA,AAAA;;;;;AAAA,CAAA,uDAAA,vDAAUwQ;AAAV,AACM,4DAAA,rDAAC4E;;;AADP,CAAA,uDAAA,vDAAU5E,kEAEN9E;AAFJ,AAAA,GAGW,EAAI,WAAA,VAAMA,qBAAQ,AAAC2J,qBAAK3J;AAHnC;AAAA,AAAA,MAAA,KAAA1L,MAAA;;;AAII,AAACyT,8BAAgB/H;;AACjB,gCAAA,2CAAA,iEAAA,6eAAA,gKAAA,gKAAA,gKAAA,+DAAA,qEAAA,ttCAACuE,8HACWvE,mEACA,AAACyH,sBAAQ,AAACmC,uGAAM/U,AAAA,sSAAgBmL,mEAChC,AAAC6J,4EAAkBpO,oFACnB,AAACoO,4EAAkBhO,oFACnB,AAACgO,4EAAkB/N,0FACnBrH,AAAA,6DACAC,AAAA,gEACA,6CAAA,7CAACoV;;;AAbjB,CAAA,iDAAA,jDAAUhF;;AAAV,AAeA,6BAAA,7BAAOiF,kEAAc9J;AAArB,AACE,IAAA+J,gHAAQ,AAACtE,qEAAWzF,KAAK,sEAAA,KAAA,3EAAC1F,kDAAM,eAAA,dAAK7F,AAAA,6BAAaE,AAAA,cAAO,sDAAA,KAAA,3DAAC2F,kDAAM9F,AAAA,cAAWC,AAAA,xPACrE,AAACgB,7EACD,AAAA;AAFN,AAAA,oBAAAsU;AAAAA;;AAGEvV,AAAA;;;AAEJ,AAAA,wBAAA,gCAAAgF,xDAAUyQ;AAAV,AAAA,IAAAD,WAAA,AAAA;AAAA,AAAA,QAAAA;KAAA;AAAA,OAAAC,oDAAA,CAAA,UAAA;;;KAAA;AAAA,OAAAA,oDAAA,CAAA,UAAA,MAAA,CAAA,UAAA;;;;AAAA,MAAA,KAAA5V,MAAA,CAAA,8DAAA,AAAA;;;;;AAAA,CAAA,sDAAA,tDAAU4V,iEACNC;AADJ,AACY,kEAAA,3DAACC,oDAAQD;;;AADrB,CAAA,sDAAA,tDAAUD,iEAENC,OAAOnK;AAFX,AAGI,IAAArB,2BAAsB,AAACjJ,gBAAM,AAAC4U,mDAAWzQ,2BAAOsQ;AAAhD,AAAA,GAAA,CAAAxL,4BAAA;AAAA;AAAA,sBAAAA,lBAAY0L;AAAZ,AACE,MAAA,AAAAxL,gDAAA,CAAA,uCAAA,AAAAC,wJAAA,2CAAA,uDAAA,lJAA8C,AAAChE,eAAKuP;;;AAEtD,AAACtC,8BAAgB/H;;AACjB,IAAMM,UAAY,AAACmH,sBAAQ,AAACmC,uGAAM/U,AAAA,sSAAgBmL;IAC5CuK,UAAY,AAAA,yFAAWjK;IACvBkK,MAAY,iBAAAC,WAAQN;AAAR,AAAA,GACE,GAAK,AAAClV,oDAAckV;AAAS,yDAAAM,lDAACC;;AADhCD;;;IAEZlS,IAAY,AAACoS,6CAAaH,IAAIrO;IAC9B8D,OAAY,AAAC2K,kDAAsBnP,8BAAgB+O;IACnDjS,QAAY,AAACoS,6CAAaH,IAAIpO;IAC9B8D,OAAY,AAAC0K,kDAAsB/O,8BAAgB2O;IACnDK,cAAY,AAACtF,+CAAO,WAAYjN;AAAZ,AAAe,OAACqK,0BAAU4H,QAAQ,AAAKjS;GAAK6R;IAChEW,WAAY,AAACC,mBAASF;IACtBtS,QAAY,AAACoS,6CAAaG,SAASzO;IACnC8D,OAAY,AAACyK,kDAAsB9O,8BAAgBgP;IACnD1K,UAAY,AAAC2J,2BAAa9J;IAC1BI,SAAY,AAAC2K,kDAAU,AAACC,4CAAI,WAAY3S;AAAZ,AAAe,OAAUA;IAAK4S,cAAIxW,AAAA,YAAIuL;AAbxE,AAcE,gCAAA,2CAAA,iEAAA,oEAAA,0DAAA,0DAAA,0DAAA,mEAAA,gEAAA,1fAACsE,8HACUvE,mEACAM,6DACAL,0DACAC,0DACAC,gEACAC,iEACAC,2DACA,6CAAA,7CAACyJ;;;AA7BlB,CAAA,gDAAA,hDAAUI;;AAAV,AA+BA,+BAAA,/BAAOiB,sEAAgBpW,EAAEyB;AAAzB,AACE,IAAOf,KAAG,AAAC8N,cAAIxO;IACRqW,KAAG,AAAC7H,cAAI/M;;AADf,AAEE,GACE,OAAA,NAAMf;AAAI,cAAA,NAAM2V;;AADlB,GAEE,AAACrR,6CAAE,AAACrE,gBAAMD,IAAI,AAACC,gBAAM0V;AAAK,eAAO,AAAChO,eAAK3H;eAAI,AAAC2H,eAAKgO;;;;;AAFnD,AAAA;;;;;;;AAKJ,wBAAA,xBAAO5G,wDAAapG;AAApB,AACE,QAAA,AAAAiN,JAAMC,oBAAG,AAAQlN;AAAjB,AACE,GAAI,OAAA,NAAOkN;AACT,OAACC,sBAAO,AAAQnN,QAAI,AAAC7H,6BAAe,AAACuD,eAAK,AAAUsE,WAChB,AAACtE,eAAK,AAAQsE;;AAClDkN;;;AAEN,yBAAA,zBAAOrE,0DAAsB7I;AAA7B,AACE,QAAA,AAAAiN,JAAMC,oBAAG,AAAQlN;IACX+L,SAAO,iBAAAH,mBAAI,yBAAA,qDAAA,9EAACpM,sBAAQQ;AAAb,AAAA,oBAAA4L;AAAAA;;AAAA;;;AADb,AAEE,GAAI,OAAA,NAAOsB;AACT,IAAMnB,aAAO,iBAAAH,mBAAI,yBAAA,qDAAA,9EAACpM,sBAAQQ;AAAb,AAAA,oBAAA4L;AAAAA;;AAAA;;;AAAb,AACE,OAACuB,sBAAO,AAAQnN,QAAI,AAAC7H,6BAAe,AAACuD,eAAK,AAACkF,sBAAQZ,KACf,AAACkE,8BAAoB6H;;AAC3DmB;;;AAEN,yBAAA,zBAAO5G,0DAAUtG,GAAGqG;AAApB,AACE,uGAAA,9FAAK,EAAI,kBAAWV,jBAAGU,wCAAO,kBAAWmC,jBAAWnC,oDAC/C,AAAC1K,6CAAE,AAACiF,sBAAQZ,IAAI,AAACY,sBAAQyF,aACzB,AAAC0G,6BAAe,yBAAA,qDAAA,9EAACvN,sBAAQQ,0FAAa,4BAAA,qDAAA,jFAACR,sBAAQ6G;;AAGnD,sBAAA,tBAAMQ,oDAAO7G,GAAG4G,EAAE3L;AAAlB,AACE,mBAAA,nBAACvB,iBAAOkN;;AACR,mBAAA,nBAAClN,iBAAOkN;;AACR,AAACzL,oBAAU,AAACyF,sBAAQZ,IAAI4G,EAAE3L;;AAC1B,mBAAA,nBAACvB,iBAAOkN;;AACR,AAAC1L,+BAAqB0L,EACA,WAAK1M,EAAE0M,MAAE3L;AAAT,AACE,gEAAA,IAAA,IAAA,aAAA,9EAACC,+BAAqB0L,MAAEzL,gCAAsBF,4FAAM,AAAKf,IAAG,AAAKA,IAAG,AAAKA,IAAG,AAACzB,uBAASyB;GAF9G,IAAA,IAAA,IAGkCe,KAAK,yBAAA,qDAAA,9EAACuE,sBAAQQ;;AAChD,0BAAA,nBAACtG,iBAAOkN;;AAiBb,+BAAA,uCAAAwG,tEAAMG;AAAN,AAAA,IAAAF,aAAAD;IAAAC,iBAAA,AAAAC,4BAAAD;aAAA,AAAAjL,4CAAAiL,eAAA,pEAA8BzL;aAA9B,AAAAQ,4CAAAiL,eAAA,pEAAqCtB;AAArC,AACE,OAACC,oDAAQ,AAACa,4CAAI,WAAAW;AAAA,AAAA,IAAAC,aAAAD;QAAA,AAAA9V,4CAAA+V,WAAA,IAAA,/DAAM5T;QAAN,AAAAnC,4CAAA+V,WAAA,IAAA,/DAAQ3T;QAAR,AAAApC,4CAAA+V,WAAA,IAAA,/DAAU1T;SAAV,AAAArC,4CAAA+V,WAAA,IAAA,hEAAYzT;AAAZ,AAAiB,OAACmC,kDAAMtC,EAAEC,EAAEC,EAAEC;GAAK+R,QAAQnK;;AAI3D,AAAA;AAAA;AAAA,AAEA,8BAAA,9BAAO8F,oEAAe1H,GAAGnG,EAAEC,EAAEC,EAAE2T,EAAEC,UAAUC;AAA3C,AACE,oBAAM9T;AAAN,AAAQ,IAAA+T,iBAAe/T;IAAfgU,iBAAiB,KAAAlS,eAAA,KAAA,AAAA,2EAAA,KAAAA,eAAA,KAAA,AAAA,sDAAA,KAAAA,eAAA,OAAA,KAAAA,eAAA,OAAA,KAAAA,eAAA,OAAA,KAAAA,eAAA,OAAA,KAAA,IAAA,OAAA,IAAA,OAAA,IAAA,OAAA,IAAA,OAAA,IAAA,OAAA,IAAA,nJAAyB/B,2BAAEC,2BAAEC,2BAAE2T;AAAhD,AAAA,uHAAAG,eAAAC,wDAAAD,eAAAC,5MAACrG,4DAAAA,2FAAAA;;AAAT;;AACA,OAACtL,kDACC,iBAAAyP,mBAAI,CAACmC,yDAAAA,+DAAAA,RAAW/N,2CAAAA,xCAAGnG,2CAAAA;AAAnB,AAAA,oBAAA+R;AAAAA;;AAAsB+B;;KACtB7T,EACA,kBAAI,iBAAAQ,oBAAK,GAAA,MAAA,LAAOP;AAAZ,AAAA,GAAAO;AAAe,QAAC0T,yDAAAA,+DAAAA,RAAKhO,2CAAAA,xCAAGlG,2CAAAA;;AAAxBQ;;MACF,CAAC2T,2DAAAA,iEAAAA,RAAajO,6CAAAA,1CAAGjG,6CAAAA,IACjBA,GACF,iBAAA6R,mBAAI,CAACmC,yDAAAA,+DAAAA,RAAW/N,2CAAAA,xCAAG0N,2CAAAA;AAAnB,AAAA,oBAAA9B;AAAAA;;AAAsBgC;;;;AAE1B,uCAAA,wDAAAM,/FAAO7G,sFAAqBrH,GAAGC,eAAoB0N,UAAUC;AAA7D,AAAA,IAAAO,aAAAD;SAAA,AAAAxW,4CAAAyW,WAAA,IAAA,hEAAsCC;SAAtC,AAAA1W,4CAAAyW,WAAA,IAAA,hEAAyCE;SAAzC,AAAA3W,4CAAAyW,WAAA,IAAA,hEAA4CG;SAA5C,AAAA5W,4CAAAyW,WAAA,IAAA,hEAA+CI;AAA/C,AACE,IAAAC,WAAMvO;IAANuO,eAAA,EAAA,CAAAA,oBAAAtS,oBAAA,AAAAsS,aAAA;AAAA,AAAA,QAAAA;KAAA;AACQ,OAAC9G,4BAAc1H,GAAGoO,GAAGC,GAAGC,GAAGC,GAAGZ,UAAUC;;;KADhD;AAEQ,OAAClG,4BAAc1H,GAAGqO,GAAGD,GAAGE,GAAGC,GAAGZ,UAAUC;;;KAFhD;AAGQ,OAAClG,4BAAc1H,GAAGsO,GAAGF,GAAGC,GAAGE,GAAGZ,UAAUC;;;;AAHhD,MAAA,KAAA1X,MAAA,CAAA,mEAAAsY;;;;AAOF,AAAA,AAAA,AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,AAAA,CAAA,AAAA,qEAAA,WAAAlN,mBAAAC,nGAAWiO;;AAAX,AAAA,IAAAlO,yBAAA;AAAA,AAAA,OAAAA,8DAAAC,gBAAA;;;AAAA,CAAA,AAAA,qEAAA,WAAAC,mBAAAiN,OAAA/M,1GAAW8N;;AAAX,AAAA,IAAAhO,yBAAA;AAAA,AAAA,IAAAkN,WAAAD;IAAAC,eAAA,EAAA,CAAAA,oBAAAxS,oBAAA,AAAAwS,aAAA;AAAA,AAAA,QAAAA;KAAA;AAAAC;;;KAAA;AAAAC;;;KAAA;AAAAC;;;KAAA;AAAAC;;;KAAA;AAAAC;;;;AAAA,OAAA3M,4CAAAC,gBAAAoM,OAAA/M;;;;;AAAA,CAAA,AAAA,0EAAA,WAAAY,mBAAAC,gBAAAC,xHAAWgN;;AAAX,AAAA,IAAAlN,yBAAA;AAAA,AAAA,OAAA/K,+CAAA,WAAAkL,kBAAAuM;AAAA,AAAA,IAAAC,aAAAD;IAAApM,kBAAA,AAAAlL,4CAAAuX,WAAA,IAAA;IAAApM,kBAAA,AAAAnL,4CAAAuX,WAAA,IAAA;AAAA,AAAA,QAAA1M,gDAAAA,8CAAAE,kBAAAG,gBAAAC,mBAAAN,0BAAAE,kBAAAG,gBAAAC;GAAAL,mBAAAF;;;AAAA,CAAA,AAAA,iFAAA,WAAAQ,mBAAAC,qBAAAC,pIAAWwM;;AAAX,AAAA,IAAA1M,yBAAA;AAAA,AAAA,IAAAG,wBAAA,WAAAC;AAAA,AAAA,OAAAhI,+BAAA6H,qBAAA,oBAAA,GAAA,IAAA,GAAAC,mBAAAE;;AAAA,AAAA,OAAAhI,+BAAA6H,qBAAAE,sBAAA,2BAAA,KAAA,IAAAD,mBAAA,AAAAG,+CAAA,mFAAA,KAAAC,2BAAA,KAAA,EAAA,IAAA,AAAAA,sCAAA,CAAA,+DAAAuL,kBAAA,OAAA,KAAAvL,2BAAA,KAAA,EAAA,IAAA,AAAAA,sCAAA,CAAA,6DAAAwL,iBAAA,OAAA,KAAAxL,2BAAA,KAAA,EAAA,IAAA,AAAAA,sCAAA,CAAA,0DAAAyL,gBAAA,OAAA,KAAAzL,2BAAA,KAAA,EAAA,IAAA,AAAAA,sCAAA,CAAA,2DAAA0L,gBAAA,OAAA,KAAA1L,2BAAA,KAAA,EAAA,IAAA,AAAAA,sCAAA,CAAA,2DAAA2L,gBAAA,eAAA1M;;;AAAA,CAAA,AAAA,yEAAA,WAAA6M,pFAAWM;;AAAX,AAAA,IAAAN,eAAA;AAAA,AAAA,YAAA5L,qBAAA,IAAA4L,aAAA,EAAA,mFAAA,+DAAA,6DAAA,0DAAA,2DAAA,mEAAA,kBAAA7M,iBAAA,AAAAkB,oBAAAlB,iBAAA,AAAAmB;;;AAAA,CAAA,AAAA,iEAAA,WAAAC,5EAAW+L;;AAAX,AAAA,IAAA/L,yBAAA;AAAA,AAAAC;;;AAAA,CAAA,AAAA,uEAAA,WAAAC,lFAAW6L;;AAAX,AAAA,IAAA7L,yBAAA;AAAA,AAAA,mCAAAgL,iBAAAC,gBAAAC,eAAAC,eAAAC,eAAArL,cAAArB,gBAAAuB,nIAAW4L;;;AAAX,CAAA,AAAA,qEAAA,WAAA3L,hFAAW2L;;AAAX,AAAA,IAAA3L,yBAAA;AAAA,AAAA,QAAA,IAAA,AAAAC,gBAAAzB;;;AAAA,CAAA,AAAA,iEAAA,WAAA0B,5EAAWyL;;AAAX,AAAA,IAAAzL,yBAAA;AAAA,AAAA,IAAAC,kBAAAJ;AAAA,AAAA,GAAA,GAAA,CAAAI,mBAAA;AAAAA;;AAAA,IAAAA,sBAAA,AAAA,WAAAC;AAAA,AAAA,QAAA,cAAA,AAAAC,8BAAAD;GAAAF;AAAA,AAAA,CAAAH,gBAAAI;;AAAAA;;;;AAAA,CAAA,AAAA,mEAAA,WAAAmL,UAAAC,xFAAWI;;AAAX,AAAA,IAAAL,gBAAA;AAAA,AAAA,SAAA,GAAA,CAAAC,cAAA,aAAA,EAAA,CAAA,AAAAD,8BAAA,AAAAC,6BAAA,EAAA,AAAAzT,6CAAA,AAAAwT,wBAAA,AAAAC,2BAAA,EAAA,AAAAzT,6CAAA,AAAAwT,uBAAA,AAAAC,0BAAA,EAAA,AAAAzT,6CAAA,AAAAwT,sBAAA,AAAAC,yBAAA,EAAA,AAAAzT,6CAAA,AAAAwT,sBAAA,AAAAC,yBAAA,EAAA,AAAAzT,6CAAA,AAAAwT,sBAAA,AAAAC,yBAAA,AAAAzT,6CAAA,AAAAwT,uBAAA,AAAAC;;;AAAA,CAAA,AAAA,kEAAA,WAAA/K,mBAAAC,hGAAWkL;;AAAX,AAAA,IAAAnL,yBAAA;AAAA,AAAA,GAAA,AAAAE,0BAAA,iFAAA,gEAAA,kEAAA,oEAAA,+DAAA,+EAAAD;AAAA,OAAAE,+CAAA,AAAAC,qBAAA,AAAA/F,6CAAA,mCAAA2F,wBAAAX,eAAAY;;AAAA,mCAAAqK,iBAAAC,gBAAAC,eAAAC,eAAAC,eAAArL,cAAA,AAAAjF,oBAAA,AAAA+F,+CAAAnC,gBAAAiC,kBAAA,xNAAWkL;;;;AAAX,CAAA,AAAA,uFAAA,WAAA9K,mBAAA+J,rHAAWe;;AAAX,AAAA,IAAA9K,yBAAA;AAAA,AAAA,IAAA2K,WAAAZ;IAAAY,eAAA,EAAA,CAAAA,oBAAAnT,oBAAA,AAAAmT,aAAA;AAAA,AAAA,QAAAA;KAAA;KAAA;KAAA;KAAA;KAAA;AAAA;;;;AAAA,OAAA9K,0BAAAlC,gBAAAoM;;;;;AAAA,CAAA,AAAA,yEAAA,WAAA7J,mBAAAC,gBAAAqK,vHAAWM;;AAAX,AAAA,IAAA5K,yBAAA;AAAA,AAAA,IAAA0K,cAAAvK;IAAAwK,cAAA1K;AAAA,AAAA,oBAAA,CAAAyK,4CAAAA,0CAAA,+DAAAC,eAAAD,sBAAA,+DAAAC;AAAA,mCAAAL,SAAAN,gBAAAC,eAAAC,eAAAC,eAAArL,cAAArB,gBAAA,3HAAWmN;;AAAX,oBAAA,CAAAF,4CAAAA,0CAAA,6DAAAC,eAAAD,sBAAA,6DAAAC;AAAA,mCAAAZ,iBAAAO,SAAAL,eAAAC,eAAAC,eAAArL,cAAArB,gBAAA,5HAAWmN;;AAAX,oBAAA,CAAAF,4CAAAA,0CAAA,0DAAAC,eAAAD,sBAAA,0DAAAC;AAAA,mCAAAZ,iBAAAC,gBAAAM,SAAAJ,eAAAC,eAAArL,cAAArB,gBAAA,7HAAWmN;;AAAX,oBAAA,CAAAF,4CAAAA,0CAAA,2DAAAC,eAAAD,sBAAA,2DAAAC;AAAA,mCAAAZ,iBAAAC,gBAAAC,eAAAK,SAAAH,eAAArL,cAAArB,gBAAA,7HAAWmN;;AAAX,oBAAA,CAAAF,4CAAAA,0CAAA,2DAAAC,eAAAD,sBAAA,2DAAAC;AAAA,mCAAAZ,iBAAAC,gBAAAC,eAAAC,eAAAI,SAAAxL,cAAArB,gBAAA,7HAAWmN;;AAAX,mCAAAb,iBAAAC,gBAAAC,eAAAC,eAAAC,eAAArL,cAAA,AAAAuB,8CAAA5C,gBAAAwC,gBAAAqK,UAAA,3MAAWM;;;;;;;;AAAX,CAAA,AAAA,mEAAA,WAAAtK,9EAAWsK;;AAAX,AAAA,IAAAtK,yBAAA;AAAA,AAAA,OAAAC,cAAA,AAAAhC,+CAAA,mFAAA,KAAAiC,mBAAA,+DAAAuJ,iBAAA,OAAA,KAAAvJ,mBAAA,6DAAAwJ,gBAAA,OAAA,KAAAxJ,mBAAA,0DAAAyJ,eAAA,OAAA,KAAAzJ,mBAAA,2DAAA0J,eAAA,OAAA,KAAA1J,mBAAA,2DAAA2J,eAAA,eAAA1M;;;AAAA,CAAA,AAAA,0EAAA,WAAAgD,mBAAA6J,xGAAWM;;AAAX,AAAA,IAAAnK,yBAAA;AAAA,AAAA,mCAAAsJ,iBAAAC,gBAAAC,eAAAC,eAAAC,eAAAG,SAAA7M,gBAAAuB,9HAAW4L;;;AAAX,CAAA,AAAA,uEAAA,WAAAlK,mBAAAC,rGAAWiK;;AAAX,AAAA,IAAAlK,yBAAA;AAAA,AAAA,GAAA,AAAAE,wBAAAD;AAAA,OAAAD,kEAAA,AAAAG,eAAAF,oBAAA,KAAA,AAAAE,eAAAF,oBAAA;;AAAA,OAAAhO,+CAAAmO,gBAAAJ,uBAAAC;;;;AAAA,CAAA,AAAAiK,kCAAA;AAAA,AAAA,AAAA;;;AAAA,CAAA,AAAAA,wCAAA;;AAAA,CAAA,AAAAA,6CAAA,WAAA5J;AAAA,AAAA,YAAAhK,eAAA,KAAA,yBAAA,KAAA,IAAA;;;AAAA,CAAA,AAAA4T,gDAAA,WAAA5J,mBAAAC;AAAA,AAAA,OAAAnM,iBAAAmM,qBAAA;;;AAAA;;;8BAAA,9BAAW8J,oEAAUhB,UAAUC,SAASC,QAAQC,QAAQC;AAAxD,AAAA,YAAAS,kEAAA,KAAA,KAAA,rDAAqBb,UAAUC,SAASC,QAAQC,QAAQC;;;AAAxD;;;iCAAA,yCAAAU,1EAAWG;AAAX,AAAA,IAAA7J,uBAAA,iBAAA2J,WAAA,AAAAlL,sDAAAiL,SAAA,iHAAA,6DAAA,0DAAA,2DAAA;AAAA,AAAA,GAAA,AAAAxJ,wBAAAwJ;AAAA,OAAA/Q,6CAAA,mCAAAgR;;AAAAA;;;AAAA,AAAA,YAAAF,uBAAA,AAAA,6FAAAC,UAAA,AAAA,2FAAAA,UAAA,AAAA,wFAAAA,UAAA,AAAA,yFAAAA,UAAA,AAAA,yFAAAA,UAAA,KAAA,AAAAhR,oBAAAsH,sBAAA;;;AAAAyJ,AAEA,+BAAA,/BAC0BK,sEAAY7P,GAAGG,KAAKa;AAD9C,AAEE,OAACuD,0BAAU,AAACzD,wBAAUd,GAAGgB,UAAUb;;AAErC,gCAAA,hCAC0B2P,wEAAa9P,GAAGG;AAD1C,AAEE,4CAAA,rCAAC0P,6BAAS7P,GAAGG;;AAEf,2BAAA,3BAC0B6N,8DAAQhO,GAAGG;AADrC,AAEE,4CAAA,rCAAC0P,6BAAS7P,GAAGG;;AAEf,iCAAA,jCAC0B4P,0EAAc/P,GAAGG;AAD3C,AAEE,4CAAA,rCAAC0P,6BAAS7P,GAAGG;;AAEf,gCAAA,hCAC0BK,wEAAaR,GAAGG;AAD1C,AAEE,4CAAA,rCAAC0P,6BAAS7P,GAAGG;;AAEf,6BAAA,7BAC0B6P,kEAAUhQ,GAAGG;AADvC,AAEE,4CAAA,rCAAC0P,6BAAS7P,GAAGG;;AAEf,oCAAA,pCAC0B8P,gFAAiBjQ,GAAGG;AAD9C,AAEE,4CAAA,rCAAC0P,6BAAS7P,GAAGG;;AAEf,sBAAA,tBAAM+P,oDAAOlQ,GAAGmQ;;AAAhB,AAAA,GACS,AAACxI,wBAAI3H;AADd;AAAA,AAAA,MAAA,KAAA9J,MAAA;;;AAEE,GACE,EAAK,OAASia,sBAAK,OAAA,NAAMA;AACzB,GAAI,CAAGA,MAAI5Z,AAAA;AACT,MAAA,AAAAkK,gDAAA,CAAA,kCAAA,AAAAC,2HAAA,SAAA,AAAAA,4HAAA,2CAAA,uDAAA,+DAAA,zTAAyCnK,AAAA,oIAAc4Z,2OAA8BA;;AACrFA;;;AAJJ,GAME,AAACvF,4BAAYuF;AACb,IAAAC,aAAmBD;WAAnB,AAAAzY,4CAAA0Y,WAAA,IAAA,lEAAOjQ;YAAP,AAAAzI,4CAAA0Y,WAAA,IAAA,nEAAY/W;AAAZ,AACE,GACE,qEAAA,rEAACoR,gDAAK,AAAC3G,gBAAMqM;AACX,MAAA,AAAA1P,gDAAA,CAAA,yCAAA,AAAAC,4HAAA,2CAAA,uDAAA,4EAAA,lMAAgDyP,iQACPA;;AAH7C,GAIE,GAAK,qCAAA,rCAACN,6BAAS7P,GAAGG;AAChB,MAAA,AAAAM,gDAAA,CAAA,wDAAA,AAAAC,4HAAA,2CAAA,uDAAA,4EAAA,lMAA+DyP,iQACtBA;;AAN7C,GAOE,UAAA,TAAM9W;AAPR;;AAAA,AAUI,OAAA,6EAAA,gBAAI,yBAAA,zBAACmG,sBAAQQ,wDAASmQ,9FAAK7Y;;;;;;AAlBnC,GAoBa,AAAC6F,uBAAOgT;AAAK,eAAOnQ;eAAG,AAACqQ,kDAAUF;;;;;AApB/C,GAsBE,gBAAAjU,fAAUiU;AACV,OAAA,6EAAA,gBAAI,yBAAA,qDAAA,mFAAA,jKAAC3Q,sBAAQQ,kMAAoBmQ,xOAAM7Y;;AAvBzC,AA0BE,MAAA,AAAAmJ,gDAAA,CAAA,oDAAA,AAAAC,4HAAA,2CAAA,uDAAA,0EAAA,hMAA2DyP,+PACnBA;;;;;;;;;AAE5C,6BAAA,7BAAMlC,kEAAcjO,GAAGmQ;AAAvB,AACE,IAAAvE,mBAAI,AAACsE,oBAAMlQ,GAAGmQ;AAAd,AAAA,oBAAAvE;AAAAA;;AACI,MAAA,AAAAnL,gDAAA,CAAA,+BAAA,AAAAC,4HAAA,2CAAA,uDAAA,4EAAA,lMAAsCyP,iQAEnBA;;;AAEzB,2BAAA,3BAAMpC,8DAAY/N,GAAGmQ;AAArB,AACE,oBAAMA;AAAN,AACE,OAAClC,2BAAajO,GAAGmQ;;AADnB;;;AAKF,+BAAA,/BAAMG,sEAAgBtQ,GAAUuQ;AAAhC,AACE,oBAAM,iBAAAjW,oBAAK,AAAaiW;AAAlB,AAAA,oBAAAjW;AACK,+CAAA,xCAACuV,6BAAS7P,GAAG,AAAKuQ;;AADvBjW;;;AAAN,AAEE,IAAAiG,qBAAkB,AAAC9B,oBAAU,yBAAA,qDAAA,9EAACe,sBAAQQ,2IAAU,AAAKuQ,QAAO,AAAKA;AAAjE,AAAA,GAAA,CAAAhQ,sBAAA;AAAA;;AAAA,YAAAA,RAAYiQ;AAAZ,AACE,MAAA,AAAA/P,gDAAA,CAAA,cAAA,AAAAC,oHAAA,kCAAA,AAAAA,8HAAA,2CAAA,uDAAA,wEAAA,wEAAA,9ZAAqB6P,sJAAwCC,gQAE1C,AAAKD,+DACTA;;;AANnB;;;AAQF,8BAAA,9BAAO9I,oEAAetH,KAAKsQ;AAA3B,AACE,GAAU,EAAI,iBAAAvU,hBAAUiE,wCAAM,OAASA;AAAvC;;AAAA,AACE,MAAA,AAAAM,gDAAA,CAAA,wBAAA,AAAAC,mHAAA,OAAA,AAAAA,iHAAA,yCAAA,2CAAA,uDAAA,wEAAA,qEAAA,3ZAA+BP,0HAAYsQ,4RACCtQ,gEAAesQ;;;AAE/D,6BAAA,7BAAOC,kEAAc3W,EAAE0W;AAAvB,AACE,GAAM,MAAA,LAAM1W;AAAZ,AACE,MAAA,AAAA0G,gDAAA,CAAA,kCAAA,AAAAC,2HAAA,2CAAA,uDAAA,wEAAA,wDAAA,rPAAyC+P,mPACD1W,6DAAY0W;;AAFtD;;;AAIF,2BAAA,3BAAOE,8DAAYC;AAAnB,AACE,oRAAA,5QAAK,sDAAA,mFAAA,+DAAA,xMAACC,+CAAOD;;AAEf,yBAAA,zBAAOE,0DAAU9Q;AAAjB,AACE,uGAAA,/FAAK,AAAA,yFAAUA;;AAEjB,6BAAA,7BAC2B+Q,kEACxBlX;AAFH,AAGE,kIAAA,wEAAA,jMAAI,+CAAA,/CAAC8B,6CAAE9B,8EACH,+CAAA,/CAAC8B,6CAAE9B,2BACH,+CAAA,/CAAC8B,6CAAE9B,qBACH,+CAAA,/CAAC8B,6CAAE9B;;AAET,8BAAA,9BAC2BmX,oEACxBra;AAFH,AAGE,SAAI,EAAK,OAASA,oBAAG,KAAA,JAAMA,gBAAI,OAASA;;AAE1C,+BAAA,/BAAOsa,sEAAUjR,GAAGmQ;AAApB,AACE,SAAK,CAAGA,MAAI,AAAA,yFAAUnQ,UACjB,CAAGmQ,MAAI7Z,AAAA;;AAEd,gCAAA,hCAAO4a,wEAAiBlR,GAAGmQ;AAA3B,AACE,IAAAgB,WAAQnR;AAAR,AAAA,GACE,AAACiR,6BAASjR,GAAGmQ;AACX,qDAAAgB,SAAA,vDAAClM,kHAAekL;;AAFpBgB;;;AAIF,AAAA,6BAAA,qCAAA9V,lEAAOgW;AAAP,AAAA,IAAAD,WAAA,AAAA;AAAA,AAAA,QAAAA;KAAA;AAAA,OAAAC,yDAAA,CAAA,UAAA,MAAA,CAAA,UAAA;;;KAAA;AAAA,OAAAA,yDAAA,CAAA,UAAA,MAAA,CAAA,UAAA,MAAA,CAAA,UAAA;;;;AAAA,MAAA,KAAAnb,MAAA,CAAA,8DAAA,AAAA;;;;;AAAA,CAAA,2DAAA,3DAAOmb,sEACHT,OAAOT;AADX,AAEI,6DAAA,tDAACjP,+CAAO0P,oEAAiBM,8BAAgBf;;;AAF7C,CAAA,2DAAA,3DAAOkB,sEAGHT,OAAO/W,EAAEsW;AAHb,AAII,IAAAmB,WAAQV;IAARU,eAAA,2KAAAA,zKACE,AAACP,2BAAOlX,IACR,+CAAAyX,SAAA,xDAACpQ,mHAAgBkI,gBAAMvP,EAAEsW;IAF3BmB,eAAA,gLAAAA,9KAIE,AAACN,4BAAQnX,IACT,+CAAAyX,aAAA,5DAACpQ,uHAAgBkI,gBAAMvP,EAAEsW;IAL3BmB,eAAA,qUAAAA,nUAOE,EAAK,GAAK,AAACN,4BAAQnX,UAAI,AAACoX,6BAAS,AAAA,2FAAWL,QAAQT,QACpD,+CAAAmB,aAAA,5DAACpQ,uHAAgBkI,gBAAM+G,IAAIA;AAR7B,AAAA,AAWE,sDAAAmB,aAAA,5DAACpQ,yHAAiBgQ,8BAAgBf;;;;AAfxC,CAAA,qDAAA,rDAAOkB;;AAAP,AAoBA,2BAAA,3BAAOE,8DAAYvR,GAAUuQ;AAA7B,AACE,AAACD,6BAAetQ,GAAGuQ;;AACnB,IAAMiB,kBAAU,AAAChR,8BAAUR,GAAG,AAAKuQ;AAAnC,AACE,oBAAI,AAAaA;AACf,IAAAkB,WAAQzR;IAARyR,eAAA,AACY,+CAAAA,SAAA,xDAACvQ,6GAAawQ,qCAASnB,MAAMxS;;IADzC0T,eAAA,AAEY,+CAAAA,aAAA,5DAACvQ,iHAAawQ,qCAASnB,MAAMvS;;IAFzCyT,eAAA,oNAAAA,lNAGED,iBAAU,+CAAAC,aAAA,5DAACvQ,iHAAawQ,qCAASnB,MAAMtS;IAHzCwT,eAAA,AAIY,8BAAAA,9BAACP,2CAAgB,AAAKX;;AAJlC,AAAA,AAKY,qDAAAkB,aAAA,3DAACxM,+GAAY,6CAAA,7CAACyG;;;AAC1B,IAAAiG,qBAAmB,yBAAA,zBAACrS,sBAAQU,sFAAI,AAAKuQ,QAAO,AAAKA,QAAO,AAAKA;AAA7D,AAAA,GAAA,CAAAoB,sBAAA;AAME3R;;AANF,eAAA2R,XAAUC;AAAV,AACE,IAAAC,WAAQ7R;IAAR6R,eAAA,AACY,+CAAAA,SAAA,xDAAC3Q,6GAAa4Q,qCAASF,SAAS7T;;IAD5C8T,eAAA,AAEY,+CAAAA,aAAA,5DAAC3Q,iHAAa4Q,qCAASF,SAAS5T;;IAF5C6T,eAAA,uNAAAA,rNAGEL,iBAAU,+CAAAK,aAAA,5DAAC3Q,iHAAa4Q,qCAASF,SAAS3T;AAH5C,AAAA,AAIY,qDAAA4T,aAAA,3DAAC5M,+GAAY,6CAAA,7CAACyG;;;;;AAGlC,4BAAA,5BAAOqG,gEAAaC,MAAMC,MAAMra,IAAIoI,GAAGnG,EAAEC,EAAEC;AAA3C,AACE,IAAMmY,cAAa,iBAAAtG,mBAAI,AAACxJ,4CAAI4P,MAAMC;AAAf,AAAA,oBAAArG;AAAAA;;AAAA,IAAAA,uBACE,AAAA,2EAAI,AAACtU,gBAAM,yBAAA,qDAAA,9EAACkI,sBAAQQ,2IAAUnG,EAAEoY;AADlC,AAAA,oBAAArG;AAAAA;;AAEE,OAACuG,cAAI,+OAAA,/OAACC,+CAAO,gBAAA,AAAA,mKAAIpS,tBAAG,AAACY,5CAAS,AAACwB,sEAAI6P,vLAAsBnO;;;;IACxEuO,2BAAa,AAACpN,8CAAMiN,YAAYta,IAAImC;AAH1C,AAIE,OAACkL,8CAAM+M,MAAMC,MAAMI;;AAEvB,6BAAA,7BAAOC,kEAAcN,MAAMO,OAAOvS,GAAGnG,EAAEC,EAAEC;AAAzC,AACE,OAACuP,oBACC,WAAK0I,UAAMC,MAAMra;AAAjB,AACE,OAACma,0BAAYC,UAAMC,MAAMra,IAAIoI,GAAGnG,EAAEC,EAAEC;GACtCiY,MACAO;;AAEJ,gCAAA,hCAAOC,wEAAiB5B,OAAOL;AAA/B,AACE,IAAMvQ,KAAQ,AAAA,2FAAW4Q;IACnB9W,IAAQ,AAAA,8EAAIyW;IACZkC,mHAAY7B,9CACF,qDAAA,rDAAC3L,kHAAgB,AAACsM,yBAAWvR,GAAGuQ,7LAChC,qMAAA,rMAACrP,+PAAgBlK,eAAKuZ;AAJtC,AAKE,GAAI,AAACN,kCAAcjQ,GAAGlG;AACpB,IAAMD,IAAO,AAAA,6EAAI0W;IACXxW,IAAO,sIAAA,pHAAI,AAACjB,0BAAYyX,QAAO,AAAA,2EAAIA;IACnCyB,QAAO,iBAAApG,6LAAQ6G,1KAAwB,4CAAA,AAAA,5CAACrQ,+LAAIvI;AAArC,AAAA,oBAAA+R;AAAAA;;AAAA;;;IACP2G,SAAO,AAACnQ,4CAAI,2BAAA,3BAACtB,wBAAUd,uEAAmBlG;IAC1C4Y,qBAAO,AAACJ,2BAAaN,MAAMO,OAAOvS,GAAGnG,EAAEC,EAAEC;AAJ/C,AAKE,0EAAA,nEAACmH,+CAAOuR,oHAAwBrJ,gBAAMvP,EAAE6Y;;AAC1CD;;;AAEN,mCAAA,nCAC0BE,8EAAgBxS;AAD1C,AAEE,GACE,iBAAAjE,hBAAUiE;AACV,oDAAA,7CAACxE,iDAAK,iEAAA,jEAACjE,4CAAI,AAACkb,eAAKzS;;AAFnB,GAIE,OAASA;AACT,OAACjI,mBAAQ,qBAAA,rBAAC2a,gDAAoC1S;;AALhD,AAQE,MAAA,AAAAM,gDAAA,CAAA,uBAAA,AAAAC,mHAAA,yCAAA,2CAAA,uDAAA,wEAAA,9NAA8BP,8RACcA;;;;;AAEhD,4BAAA,5BAAM2S,gEAAa3S;AAAnB,AACE,GACE,iBAAAjE,hBAAUiE;AACV,GAAI,AAACwS,iCAAaxS;AAChB,OAAC4S,gDAAQ,AAACC,oBAAU7S,MAAM,kEAAA,lEAAC8S,6CAAK,AAACL,eAAKzS;;AACtC,OAAC4S,gDAAQ,AAACC,oBAAU7S,MAAM,CAAA,IAAS,AAACyS,eAAKzS;;;AAJ7C,GAMC,OAASA;AACT,IAAA+S,aAAkB,qBAAA,rBAACL,+CAAmC1S;QAAtD,AAAAzI,4CAAAwb,WAAA,IAAA,/DAAO/Y;SAAP,AAAAzC,4CAAAwb,WAAA,IAAA,hEAASC;WAAT,AAAAzb,4CAAAwb,WAAA,IAAA,lEAAYE;AAAZ,AACE,GAAI,6CAAA,7CAACzX,iDAAK,iDAAA,jDAACjE,4CAAI0b;AACb,oBAAID;AAAG,wDAAA,JAAKA,QAAO,kDAAA,lDAACF,6CAAKG;;AAAS,yDAAA,lDAACH,6CAAKG;;;AACxC,oBAAID;AAAG,wDAAA,JAAKA,qDAAQC;;AAAM,QAAA,gDAASA;;;;AAVxC,AAaE,MAAA,AAAA3S,gDAAA,CAAA,uBAAA,AAAAC,mHAAA,yCAAA,2CAAA,uDAAA,wEAAA,9NAA8BP,8RACcA;;;;;AAEhD;;;;;;;;;gCAAA,hCAAOkT,wEAQJrT,GAAGsT;AARN,AASE,IAAA3B,qBAAiB,AAAClT,oBAAU,2BAAA,3BAACqC,wBAAUd;AAAvC,AAAA,GAAA,CAAA2R,sBAAA;AAAA,iGAAA,PAiCG2B;;AAjCH,aAAA3B,TAAU4B;AAAV,AACE,IAAMC,UAAQ,WAAK1Z,EAAEC;AAAP,AACE,OAAA,6EAAI,AAACzC,gBAAM,yBAAA,qDAAA,9EAACkI,sBAAQQ,2IAAUlG,EAAEC;;IAC1C0Z,QAAQ,WAAK3Z,EAAE4Z;AAAP,AACE,OAACnc,+CACC,WAAKI,IAAIoC;AAAT,AACE,IAAA4X,yBAAY,AAAC6B,QAAQ1Z,EAAEC;AAAvB,AAAA,GAAA,CAAA4X,0BAAA;AAEE,0DAAA,nDAACzQ,+CAAOvJ,QAAMX,eAAK+C;;AAFrB,QAAA4X,JAAU9X;AAAV,AACE,0DAAA,nDAACqH,+CAAOvJ,QAAMyR,gBAAMrP,EAAEF;;GAH5B,mFAAA,iCAAA,2CAKU6Z;;AAR1B,AASE,OAACpK,oBACC,WAAAqK,SAAsB7Z,EAAEC;AAAxB,AAAA,IAAA6Z,aAAAD;iBAAA,AAAAjc,4CAAAkc,WAAA,IAAA,xEAAMN;cAAN,AAAA5b,4CAAAkc,WAAA,IAAA,rEAAaC;AAAb,AACE,GACE,GAAK,AAACtP,0BAAUgP,OAAOzZ;AADzB,0FAEG,AAACmL,8CAAMqO,WAAOxZ,EAAEC,GAAG8Z;;AAFtB,GAIE,EACE,AAAC/D,8BAAU9P,GAAGlG,QACd,EACE,AAACjD,oDAAckD,QACf,EAAK,AAAC+Z,sBAAM/Z,QAAG,GAAK,AAACwR,qBAAKxR;AAC9B,IAAAga,aAAsB,AAACN,MAAM3Z,EAAEC;aAA/B,AAAArC,4CAAAqc,WAAA,IAAA,pEAAOC;aAAP,AAAAtc,4CAAAqc,WAAA,IAAA,pEAAcE;AAAd,AAAA,0FACG,iBAAAC,WAAQZ;AAAR,AAAA,GACE,GAAK,AAAC9U,uBAAOwV;AAAS,qDAAAE,9CAACjP,uDAAMnL,EAAEka;;AADjCE;;KAEA,iBAAAC,WAAQN;AAAR,AAAA,GACE,GAAK,AAACrV,uBAAOyV;AAAS,qDAAAE,9CAAClP,uDAAMnL,EAAEma;;AADjCE;;;;AAZL,AAgBE,IAAAxC,yBAAY,AAAC6B,QAAQ1Z,EAAEC;AAAvB,AAAA,GAAA,CAAA4X,0BAAA;AAAA,0FAEG,AAAC1M,8CAAMqO,WAAOxZ,EAAEC,GAAG8Z;;AAFtB,QAAAlC,JAAU9X;AAAV,AAAA,0FACGyZ,WAAO,wDAAA,xDAACrO,8CAAM4O,QAAQ/Z,kDAAGC,EAAEF;;;;;GAnBpC,mFAAA,mCAAA,2CAsBEyZ;;;AAGR;;;;iCAAA,jCAAMc,0EAGHd,OAAOO;AAHV,AAIE,IAAMQ,aAAW,AAAC/K,oBACC,WAAKL,EAAEnP,EAAEwa;AAAT,AACE,OAAChL,oBACC,WAAKL,MAAElP,EAAEF;AAAT,AACE,6DAAA,tDAACoL,8CAAMgE,MAAEpP,qFAAGC,EAAEC;GAChBkP,EAAEqL;GALR,mCAMKT;AANtB,AAOE,GAAI,CAAA,OAAM,AAAC/P,gBAAMuQ;AACf,IAAAE,aAAmB,AAACjd,gBAAM+c;SAA1B,AAAA3c,4CAAA6c,WAAA,IAAA,hEAAOI;IAAPH,aAAA,AAAA9c,4CAAA6c,WAAA,IAAA;SAAA,AAAA7c,4CAAA8c,WAAA,IAAA,hEAAW5W;SAAX,AAAAlG,4CAAA8c,WAAA,IAAA,hEAAcI;IAAdH,aACmB,AAACM,iBAAOV;SAD3B,AAAA3c,4CAAA+c,WAAA,IAAA,hEACOI;IADPH,aAAA,AAAAhd,4CAAA+c,WAAA,IAAA;SAAA,AAAA/c,4CAAAgd,WAAA,IAAA,hEACW7W;SADX,AAAAnG,4CAAAgd,WAAA,IAAA,hEACcI;AADd,AAEE,MAAA,AAAArU,gDAAA,CAAA,wBAAA,AAAAC,wGAAA,uGAAA,gBAAA,AAAAA,iHAAA,SAAA,AAAAA,wGAAA,uGAAA,gBAAA,AAAAA,2HAAA,2CAAA,uDAAA,uEAAA,gEAAA,oGAAA,6DAAA,l4BAAgC9C,GAAGgX,yIAAoBD,6MAAa9W,GAAGiX,yIAAoBD,+UAE5EF,GAAG/W,GAAGgX,2JACNC,GAAGhX,GAAGiX;;AACvB,IAAAE,aAAwB,AAAC1d,gBAAM+c;gBAA/B,AAAA3c,4CAAAsd,WAAA,IAAA,vEAAOE;IAAPD,aAAA,AAAAvd,4CAAAsd,WAAA,IAAA;QAAA,AAAAtd,4CAAAud,WAAA,IAAA,/DAAkBnb;QAAlB,AAAApC,4CAAAud,WAAA,IAAA,/DAAoBlb;IACdoW,MAAI,AAAA,mFAAQmD;AADlB,AAEE,GAAM,gCAAA,0BAAA,xDACE,GAAA,cAAA,bAAO4B,4BACP,GAAA,QAAA,PAAO/E,sBACP,GAAK,AAACa,4BAAQb,YACd,AAAC1F,gDAAKyK,UAAU/E;AAJxB,AAKE,MAAA,AAAA1P,gDAAA,CAAA,uBAAA,AAAAC,wGAAA,qGAAA,gBAAA,AAAAA,wHAAA,mCAAA,AAAAA,4HAAA,2CAAA,uDAAA,uEAAA,gEAAA,yGAAA,6DAAA,2CAAA,nvBAA+B5G,EAAEC,wIAAmBmb,2JAA6C/E,gVAElF+E,UAAUpb,EAAEC,uKACLoW;;AARxB;;AASA+E;;;AAGR,oCAAA,pCAAOC,gFAAqBnV,GAAGlG,EAAE4Z;AAAjC,AACE,GAEE,GAAK,EAAI,AAACf,iCAAa7Y,QACd,AAACgW,8BAAU9P,GAAGlG;AAHzB,0FAIG4Z;;AAJH,GAOE,GAAK,EAAI,AAAC7c,oDAAc6c,SACf,EAAK,AAACI,sBAAMJ,SAAI,GAAK,AAACnI,qBAAKmI;AARtC,0FASGA;;AATH,GAYE,EAAK,iEAAA,jEAAC/X,6CAAE,AAACmI,gBAAM4P,cACV,oDAAA,pDAAC7D,6BAAS7P,GAAG,AAAC1I,gBAAMoc;AAb3B,0FAcGA;;AAdH,AAgBQA;;;;;;AAEV,wBAAA,xBAAO0B,wDAASpV,GAAGsT;AAAnB,AACE,IAAMnD,MAAI,AAAA,mFAAQmD;AAAlB,AACE,IAAA+B,qBAAA,8CAAAC;AAAA,AAAA,YAAAC,kBAAA,KAAA;AAAA,AAAA,IAAAD,eAAAA;;AAAA,AAAA,IAAArL,qBAAA,AAAA9E,cAAAmQ;AAAA,AAAA,GAAArL;AAAA,AAAA,IAAAuL,mBAAAvL;AAAA,AAAA,IAAAwL,aAAA,AAAAne,gBAAAke;QAAA,AAAA9d,4CAAA+d,WAAA,IAAA,/DAAO3b;SAAP,AAAApC,4CAAA+d,WAAA,IAAA,hEAAS/B;AAAT,AAAA,GACa,kDAAA,lDAACjJ,gDAAK3Q;AADnB,IAEcK,IAAW,8BAAA,gDAAA,9EAACsN,4BAAc3N,uGAAUqW,IAAKrW,EAAE4Z;IAC3C+C,iBAAW,AAAC9D,iCAAa7Y;IACzB4c,aAAW,EAAID,gBAAS,AAAC3D,0BAAYhZ,GAAGA;IACxCK,QAAW,wEAAA,6rBAAA,nwBAAM,EAAKsc,oBAAS,GAAK,AAACzI,yBAAKhO,GAAG0W,iBAChC,kBAAA,AAAAjW,gDAAA,CAAA,iBAAA,AAAAC,gHAAA,qFAAA,2CAAA,uDAAA,wEAAA,kEAAA,2DAAA,gDAAA,pbAAwB5G,uUACoBA,kKAAoBqW,IAAKrW,EAAE4Z;AAPlG,AAAA,IAAAgC,uBAAA;mEAAAC;AAAA,AAAA,YAAAJ,kBAAA,KAAA;;AAAA,AAAA,IAAAI,eAAAA;;AAAA,AAAA,IAAA1L,yBAAA,AAAA9E,cAAAwQ;AAAA,AAAA,GAAA1L;AAAA,AAAA,IAAA0L,eAAA1L;AAAA,AAAA,GAAA,AAAAC,6BAAAyL;AAAA,IAAAC,kBAwwC+C,AAAAxL,sBAAAuL;IAxwC/CE,qBAAA,AAAA/R,gBAAA8R;IAAAE,WAAA,AAAAC,uBAAAF;AAAA,AAAA,GAAA,AAAA,iBAAAG,WAAA;;AAAA,AAAA,GAAA,CAAAA,WAAAH;AAAA,QAAA,AAAApQ,eAAAmQ,gBAAAI,nCAQMjc;AARN,AAAA,AAAA,AAAAkc,uBAAAH,SASE,EAAI,EAAK,AAAC9H,yBAAKhO,GAAG0W,iBAAY,AAACnL,qBAAKxR,MAClC,AAACkL,8CAAMlL,EAAE,AAAC+Y,0BAAYhZ,GAAGqW,KACzB,kBAAA,mFAAA,8EAAA,mFAAA,pQAAIsG,wJACO1c,EAAI2c,WAAWvG,oJACfA,IAAIuG,WAAW3c;;AAb9B,eAAA,CAAAic,WAAA;;;;AAAA;;;;;AAAA,OAAAE,qBAAA,AAAAC,gBAAAL,UAAA,AAAAM,kDAAA,AAAA/L,qBAAAsL;;AAAA,OAAAO,qBAAA,AAAAC,gBAAAL,UAAA;;;AAAA,QAAA,AAAAxe,gBAAAqe,pBAQM5b;AARN,AAAA,OAAAsc,mgBAAA,AAAAD,kDAAA,AAAAE,eAAAX,rjBASE,EAAI,EAAK,AAAC3H,yBAAKhO,GAAG0W,iBAAY,AAACnL,qBAAKxR,MAClC,AAACkL,8CAAMlL,EAAE,AAAC+Y,0BAAYhZ,GAAGqW,KACzB,kBAAA,mFAAA,8EAAA,mFAAA,pQAAIsG,wJACO1c,EAAI2c,WAAWvG,oJACfA,IAAIuG,WAAW3c;;;AAb9B;;;;;CAAA,KAAA;;;IAAAwc,mBAAA,AAAApR,cAAA,AAAAuQ,qBAQa,AAACP,kCAAoBnV,GAAGlG,EAAE4Z;AARvC,AAAA,GAAA6C;AAAA,OAAApT,+CAAAoT,iBAAA,AAAAC,oCAAA,AAAAF,eAAAhB;;AAAA,eAAA,AAAAgB,eAAAhB;;;;;AAAA,eAAA,AAAAgB,eAAAhB;;;;;AAAA;;;;GAAA,KAAA;;AAAA,AAAA,OAAAD,mBAAa/B;;AAejB,6BAAA,4CAAAqD,zEAAOE,kEAAcjG;AAArB,AAAA,IAAAgG,aAAAD;QAAA,AAAAjf,4CAAAkf,WAAA,IAAA,/DAA6Bzc;QAA7B,AAAAzC,4CAAAkf,WAAA,IAAA,/DAA+B/c;QAA/B,AAAAnC,4CAAAkf,WAAA,IAAA,/DAAiC9c;QAAjC,AAAApC,4CAAAkf,WAAA,IAAA,/DAAmC7c;SAAnC,AAAArC,4CAAAkf,WAAA,IAAA,hEAAqC5c;UAArC4c,NAA4CE;AAA5C,AACE,AAACrP,4BAAc3N,EAAEgd;;AACjB,AAACpG,2BAAc3W,EAAE+c;;AACjB,IAAM9c,SAAU,iBAAA4R,mBAAI5R;AAAJ,AAAA,oBAAA4R;AAAAA;;AAAO,OAAC+E,yBAAWC;;;IAC7B5Q,KAAU,AAAA,2FAAW4Q;IACrB/W,QAAU,AAACoU,2BAAajO,GAAGnG;IAC3BE,QAAU,EAAI,AAACiU,yBAAKhO,GAAGlG,IAAG,AAACmU,2BAAajO,GAAGjG,GAAGA;IAC9Cgd,YAAU,AAAC5a,kDAAMtC,MAAEC,EAAEC,MAAEC;IACvBiN,kBAAU,AAAC6I,8BAAU9P,GAAGlG;IACxBkd,YAAU,EAAW/P,iBACF,yBAAA,zBAAC3H,sBAAQU,sFAAInG,MAAEC,EAAEC,eACjB,yBAAA,zBAACuF,sBAAQU,sFAAInG,MAAEC;AARxC,AASI,GACE,cAAA,bAAMkd;AACN,OAACxE,8BAAgB5B,OAAOmG;;AAF1B,GAIE,AAACpb,6CAAE,AAAKqb,YAAWjd;AACnB,6DAAA,tDAACmH,+CAAO0P,sGAAsB9Z,oBAAMigB;;AALtC,mEAQMnG,9BACF,AAAC4B,qCAAgB,6EAAA,7EAACrW,kDAAMtC,MAAEC,EAAE,AAAKkd,YAAWhd,hJAC5C,OAACwY,wJAAgBuE;;;;;AAE3B,uCAAA,vCAAOE,sFAAwBrG,OAAc1W;AAA7C,AACE,IAAMF,KAAG,AAAC2W,yBAAWC;AAArB,AACE,OAAC4B,8BAAgB5B,OAAO,iEAAA,jEAACzU,kDAAM,AAAKjC,IAAG,AAAKA,IAAG,AAAKA,IAAGF;;AAE3D,mCAAA,nCAAOkd,8EAAoBlX,GAAG+L;AAA9B,AACE,oDAAA,7CAACrN,+EAAS,AAACyY,6CACC,AAAChQ,+CAAO,WAAYjN;AAAZ,AAAe,OAAC6V,+BAAW/P,GAAG,AAAK9F;IAC3C,AAAC2S,4CAAI,WAAY3S;AAAZ,AAAA,0FAAA,iFAAqC,AAAKA;KAAO6R;;AAEpE,AAAA,AAEA,kCAAA,lCAAOqL,4EAAmBC,eAAezG,OAAO0G,GAAGC,OAAOC;AAA1D,AACE,GAAI,AAACjT,0BAAU,AAAA,yFAAU8S,gBAAgBE;AACvC,MAAA,AAAA9W,gDAAA,CAAA,uBAAA,AAAAC,qHAAA,YAAA,YAAA,AAAAA,2HAAA,QAAA,AAAAA,oVAAA,2CAAA,uDAAA,9lBAA8B6W,6IACXC,mIAAqB,8DAAA,mFAAA,jJAAC3G,+CAAOwG,6JAAyBE;;AAIzE,IAAME,qEAAa,AAAA,yFAAU7G,vIACZ,AAAC3L,+IAAMsS,OAAOC;IACzB/E,sBAAS,6DAAA,7DAACxN,8CAAMoS,0EAAwBI;AAF9C,AAGE,QAACC,+DAAAA,uFAAAA,1BAAiBjF,mEAAAA,/CAAQ6E,mEAAAA;;;AAEhC,kCAAA,iFAAA,mEAAA,2DAAA,sFAAA,gFAAA,oEAAA,0FAAA,iEAAA,tnBAAKK;AAUL,6BAAA,7BAAMC,kEAAchH;AAApB,AACE,IAAM5Q,KAAY,AAAA,2FAAW4Q;IACvBhP,SAAY,AAAChB,sBAAQZ;IACrB6X,cAAY,2BAAA,3BAAC/W,wBAAUd;AAF7B,AAGE,OAACsJ,oBACC,WAAKwO,SAAS3H,IAAI4H;AAAlB,AACE,OAACzO,oBACC,WAAKwO,aAAS7F,MAAM5Y;AAApB,AACE,IAAMA,YAAQ,sDAAA,pDAAI,AAAC2e,uBAAOC,qBAAK5e,aAAWA;IACpC6e,UAAQ,AAAA,2EAAI,AAAC5gB,gBAAM,yBAAA,qDAAA,9EAACkI,sBAAQQ,2IAAUmQ,IAAI8B;AADhD,AAEE,GACE,AAACtW,6CAAEtC,UAAM6e;AAASJ;;AADpB,GAEE,cAAA,bAAMze;AAAY,iEAAA,oBAAA,mFAAA,yFAAA,2CAAA,sFAAA,3XAAC0F,6CAAK+Y,mLAAkC3H,IAAI8B,MAAMiG;;AAFtE,AAGoB,iEAAA,oBAAA,mFAAA,iFAAA,2CAAA,sFAAA,nXAACnZ,6CAAK+Y,yKAA8B3H,IAAI8B,MAAM5Y;;;;GACtEye,SACAC;GAXN,iCAaE,AAAA,8HAAiBnH;;AAEvB,oCAAA,pCAAMuH,gFAAqBvH;AAA3B,AACE,IAAMwH,cAAY,AAAA,6HAAiBxH;IAC7ByH,YAAY,WAAKvJ,QAAQyB;AAAb,AACE,oBAAI,AAACzX,0BAAYyX;AACf,OAAC/L,+CAAOsK,QAAQ,AAAA,6EAAIyB;;AACpBzB;;;IAChBwJ,SAAY,AAAC/gB,+CAAO8gB,UAAUD,YAAY,AAACjV,+CAAO,AAAA,wFAAUyN,QAAQ,AAAA,6HAAgBA;AAL1F,AAME,GAAI,AAACpS,uBAAO8Z;AACV,oEAAA,iJAAA,9MAAC9T,sDAAOoM;;AACR,MAAA,AAAAnQ,gDAAA,CAAA,8CAAA,AAAAC,6LAAA,2CAAA,uDAAA,wEAAA,/PAAqD,AAAC6X,6CAAK,AAACC,eAAKF,8PAC5BA;;;AAE3C,iCAAA,jCAAMZ,0EAAkBL,eAAeoB;AAAvC,AACE,GAAU,EAAI,eAAA,dAAMA,yBACN,AAAC7N,4BAAY6N;AAD3B;AAAA,AAEE,MAAA,AAAAhY,gDAAA,CAAA,wBAAA,AAAAC,yHAAA,6CAAA,2CAAA,uDAAA,wEAAA,xOAA+B+X,kSACWA;;;AAC5C,IAAMC,8BAAoBrB;IAEpBsB,oBAAgB,GAAK,AAACna,uBAAO,mIAAA,nIAACsC,wBAAU,AAAA,2FAAWuW;IACnDuB,0BAAgB,EAAID,mBACF,AAACE,mDAAWJ,WAAW,+CAAA,/CAACrG,+IACxBqG;AALxB,AAME,IAAO7H,SAAO8H;IACPpB,KAAOsB;;AADd,AAEE,GACE,AAACpa,uBAAO8Y;uIACJ1G,lCACF,AAACuH,/CACD,yFAAA,2EAAA,pKAACjX,oJAAgBkI,oFAAqB,AAACuH,yBAAWC,vTAClD,gUAAA,8EAAA,vYAAC1P,sXAAiB+X,0EAAeC;;AALrC,IAAAJ,aAQ4BxB;IAR5ByB,aAAA,AAAA5T,cAAA2T;IAAAE,eAAA,AAAA1hB,gBAAAyhB;IAAAA,iBAAA,AAAA/Z,eAAA+Z;aAAAC,TAQS1F;eARTyF,XAQkBjB;AARlB,AAAA,GAUE,WAAA,VAAMxE;AACN,eAAO1C;eAAOkH;;;;;AAXhB,GAaE,6CAAA,7CAACnc,2IAAiB2X;AAClB,GAAI,iCAAA,jCAAC/O,0BAAUqM;AACb,eACE,sDAAA,tDAACpM,+CAAOoM;eACR,AAACzN,+CAAO,AAACyU,2BAAahH,QAAQkH;;;;;AAChC,eAAOlH;eAAOkH;;;;;;AAlBlB,IAoBQ9X,KAAQ,AAAA,2FAAW4Q;IACnB9B,UAAQ,AAAA,yFAAU8B;AArB1B,AAAA,GAuBE,AAACrF,qBAAK+H;AACN,IAAM6F,UAAQ,AAAA,mFAAQ7F;AAAtB,AACE,GAQE,AAACvC,2BAAOoI;AACR,IAAME,KAAG,AAAC1I,yBAAWC;AAArB,AACE,eAAO,AAAC0I,yDAAa1I,OAAOuI,QAAQE;eAC7B,AAAChD,eAAK,qDAAA,rDAACpR,8CAAMqO,4DAAc+F,IAAIvB;;;;;AAX1C,GAcE,AAAClN,4BAAYuO;AACb,IAAME,KAAG,AAACpL,2BAAajO,GAAGmZ;AAA1B,AACE,eAAOvI;eACA,AAACyF,eAAK,qDAAA,rDAACpR,8CAAMqO,4DAAc+F,IAAIvB;;;;;AAjB1C,IAAAsB,aAoB0B,AAAC/F,8BAAgBrT,GAAGsT;0BApB9C,AAAA5b,4CAAA0hB,WAAA,IAAA,jFAoBSG;cApBT,AAAA7hB,4CAAA0hB,WAAA,IAAA,rEAoBiBvF;IACT2D,eAAkB,AAACpD,+BAAiBmF,oBAAQ1F;AArBpD,AAAA,GAuBE,GAAA,iBAAA,hBAAO2D;AACP,GAAI,4CAAA,1CAAK,AAACxG,4BAAQmI,gBACT,AAAC5U,0BAAUuK,QAAQqK,cACnB,AAAC1O,gDAAK+M,aAAa,AAACpV,4CAAI0M,QAAQqK;AACvC,OAAC/B,gCAAkBC,eAAezG,OAAO6H,WAAWU,QAAQ3B;;AAC5D,eAAO,AAAC8B,yDAAa1I,OAAOuI,QAAQ3B;eAC7B,AAACrU,+CAAO,AAACiS,sBAAQpV,GAAG,kEAAA,lEAACiF,8CAAMsU,yEAAe/B,eAAeM;;;;;;AA7BpE,GAgCE,mCAAA,jCAAI,OAASqB,4BACT,YAAA,XAASA,sBACT,OAASA;AACb,IAAMK,UAAQ,gDAAA,9CACE,YAAA,XAAML,kBAAY,AAACrI,uBAAS9Q,MAC5B,AAACgR,4BAAQmI,UAAS,iBAAAvN,mBAAI,AAACxJ,4CAAI0M,QAAQqK;AAAjB,AAAA,oBAAAvN;AAAAA;;AAA0B,OAACkF,uBAAS9Q;;KAFxD,AAGoBmZ;;IAC5BM,aAAW,qDAAA,rDAACxU,8CAAMqO,4DAAckG;AAJtC,AAKE,eAAO,AAACF,yDAAa1I,OAAOuI,QAAQK;eAC7B,AAACrW,+CAAO,AAACiS,sBAAQpV,GAAGyZ,YAAY3B;;;;;AAzC3C,AA6CE,MAAA,AAAArX,gDAAA,CAAA,yDAAA,AAAAC,gIAAA,2CAAA,uDAAA,0EAAA,pMAAgEyY,6PAC1B7F;;;;;;;AAvE5C,GAyEE,AAAC1I,4BAAY0I;AACb,IAAAoG,aAAiBpG;SAAjB,AAAA5b,4CAAAgiB,WAAA,IAAA,hEAAOC;QAAP,AAAAjiB,4CAAAgiB,WAAA,IAAA,/DAAU7f;QAAV,AAAAnC,4CAAAgiB,WAAA,IAAA,/DAAY5f;QAAZ,AAAApC,4CAAAgiB,WAAA,IAAA,/DAAc3f;AAAd,AACE,GACE,gDAAA,hDAAC4B,6CAAEge;AACH,IAAAC,aAAmBtG;IAAnBuG,aAAA,AAAA1U,cAAAyU;IAAAE,eAAA,AAAAxiB,gBAAAuiB;IAAAA,iBAAA,AAAA7a,eAAA6a;QAAAC,JAAO3f;IAAP2f,mBAAA,AAAAxiB,gBAAAuiB;IAAAA,iBAAA,AAAA7a,eAAA6a;QAAAC,JAAS3iB;WAAT0iB,PAAaE;AAAb,AACE,eAAOnJ;eAAO,AAACzN,+CAAO,AAAC7G,8CAAMnF,EAAE6I,GAAG+Z,MAAMjC;;;;;AAH5C,GAKE,EAAK,eAAA5b,dAAUyd,sCACb,AAACK,cAAI,CAACrC,gEAAAA,oEAAAA,NAAYgC,gDAAAA;AACpB,IAAAhI,qBAAgB,AAACzB,oBAAMlQ,GAAG2Z;AAA1B,AAAA,GAAA,CAAAhI,sBAAA;AAOE,MAAA,AAAAlR,gDAAA,CAAA,6CAAA,AAAAC,2HAAA,2CAAA,uDAAA,wEAAA,gEAAA,8DAAA,3TAA+CiZ,qXACmBrG;;AARpE,YAAA3B,RAAUsI;AAAV,AACE,IAAMC,MAAK,AAAA,2EAAI,yBAAA,yFAAA,lHAAC5a,sBAAQU,sFAAIia;IACtBF,OAAK,AAAC/a,eAAKsU;AADjB,AAEE,GAAI,AAAC6G,oBAAID;AACP,eAAOtJ;eAAO,AAACzN,+CAAO,AAAC7G,8CAAM4d,IAAIla,GAAG+Z,MAAMjC;;;;;AAC1C,MAAA,AAAArX,gDAAA,CAAA,UAAA,AAAAC,iHAAA,8DAAA,2CAAA,uDAAA,wEAAA,gEAAA,8DAAA,/WAAiBiZ,yaACiDrG;;;;AAb1E,GAiBE,EAAK,AAACtC,4BAAQnX,QACZ,mDAAA,nDAAC4Q,gDAAKkP;AACR,MAAA,AAAAlZ,gDAAA,CAAA,wBAAA,AAAAC,qHAAA,mDAAA,2CAAA,uDAAA,wEAAA,1OAA+B4S,4RACEA;;AApBnC,GAsBE,EAAI,gDAAA,hDAAC3X,6CAAEge,qEACL,gDAAA,hDAAChe,6CAAEge;AACL,IAAAS,aAAoB9G;QAApB,AAAA5b,4CAAA0iB,WAAA,IAAA,/DAAOjgB;YAAP,AAAAzC,4CAAA0iB,WAAA,IAAA,nEAASvgB;YAAT,AAAAnC,4CAAA0iB,WAAA,IAAA,nEAAWtgB;SAAX,AAAApC,4CAAA0iB,WAAA,IAAA,hEAAaC;SAAb,AAAA3iB,4CAAA0iB,WAAA,IAAA,hEAAgBE;IACVzgB,QAAE,AAACoU,2BAAajO,GAAGnG;IACnBM,QAAE,AAACsN,4BAAc3N,MAAEwZ;IACnB+G,SAAG,EAAI,AAACrM,yBAAKhO,GAAGlG,QAAG,AAACmU,2BAAajO,GAAGqa,IAAIA;IACxCC,SAAG,EAAI,AAACtM,yBAAKhO,GAAGlG,QAAG,AAACmU,2BAAajO,GAAGsa,IAAIA;IACxCngB,QAAE,AAACuW,2BAAa4J,OAAGhH;IACnBvH,SAAO,AAACoG,cAAI,yBAAA,zBAACjT,sBAAQc,sFAAInG,MAAEC;AANjC,AAOE,GAAI,AAACgW,8BAAU9P,GAAGlG;AAChB,oBAAI,AAACygB,eAAK;kBAAYrgB;AAAZ,AAAe,OAACyB,6CAAE,AAAKzB,IAAGmgB;;CAAKtO;AACvC,eAAO,kCAAA,mFAAA,rHAAC8K,2BAAajG,+IAAgB/W,MAAEC,MAAEwgB;eAAKxC;;;;;AAC9C,MAAA,AAAArX,gDAAA,CAAA,+BAAA,AAAAC,oHAAA,IAAA,AAAAA,oHAAA,IAAA,AAAAA,+MAAA,eAAA,AAAAA,+HAAA,2CAAA,uDAAA,iEAAA,2DAAA,oEAAA,vwBAAsC7G,wHAAMC,wHAAM,4CAAA,5CAAC+S,yFAAOd,qIAAuBsO,8OAC9CtO,oEAAkBsO,2DAASC;;;AAChE,IAAMvgB,QAAE,AAAA,2EAAI,AAACzC,gBAAMyU;AAAnB,AACE,GAAI,AAACpQ,6CAAE5B,MAAEsgB;AACP,eAAO,kCAAA,mFAAA,rHAACxD,2BAAajG,+IAAgB/W,MAAEC,MAAEwgB;eAAKxC;;;;;AAC9C,MAAA,AAAArX,gDAAA,CAAA,+BAAA,AAAAC,oHAAA,IAAA,AAAAA,oHAAA,IAAA,AAAAA,oHAAA,eAAA,AAAAA,+HAAA,2CAAA,uDAAA,iEAAA,4EAAA,oEAAA,7rBAAsC7G,wHAAMC,wHAAMC,mIAAiBsgB,8OAChC,AAAC/iB,gBAAMyU,qEAAmBsO,2DAASC;;;;AAxChF,GA0CE,AAACvJ,2BAAOlX;AACR,eAAO,AAACyf,yDAAa1I,OAAO/W,EAAE,AAAC8W,yBAAWC;eAAS,eAAA,fAACyF,kGAAMsD,GAAG,AAAChJ,yBAAWC,QAAQ9W,EAAEC,UAAG+d;;;;;AA3CxF,GA6CE,EAAK,AAAC9J,yBAAKhO,GAAGlG,QAAG,AAACiX,2BAAOhX;AACzB,eAAO,AAACuf,yDAAa1I,OAAO7W,EAAE,AAAC4W,yBAAWC;eAAS,eAAA,fAACyF,kGAAMsD,GAAG9f,EAAEC,EAAE,AAAC6W,yBAAWC,gBAASkH;;;;;AA9CxF,GAgDE,EAAK,AAAC9J,yBAAKhO,GAAGlG,QAAG,AAACkX,4BAAQjX;AAC1B,IAAA4X,qBAAmB,AAACvP,4CAAI0M,QAAQ/U;AAAhC,AAAA,GAAA,CAAA4X,sBAAA;AAGE,IAAM6I,WAAS,AAAC1J,uBAAS9Q;IACnByS,8HAAa7B,zDACF,AAAC0I,gEAAavf,EAAEygB,jHAChB,2HAAA,3HAACtZ,0NAAuBkI,gBAAMoR,SAASzgB;AAHxD,AAIE,eAAO0Y;eAAQ6E;;;;;AAPnB,eAAA3F,XAAU6I;AAAV,AACE,IAAM/H,sBAAQ,sDAAA,tDAACvR,+CAAO0P,sGAAuBxH,gBAAMoR,SAASzgB;AAA5D,AACE,eAAO0Y;eAAQ,eAAA,fAAC4D,kGAAMsD,GAAG9f,EAAEC,EAAE0gB,iBAAU1C;;;;;;AAnD7C,GA0DE,AAAC9G,4BAAQnX;AACT,IAAM2d,eAAc,oHAAA,6QAAA,/XAAM,kCAAA,lCAAC3H,6BAAS7P,GAAGlG,kFACjB,AAAA,6EAAI,AAACxC,gBAAM,yBAAA,qDAAA,9EAACkI,sBAAQQ,2IAAUlG,EAAEC;IAChD0gB,gBAAc,AAACrY,4CAAI0M,QAAQjV;AAFjC,AAGE,oBAAI,iBAAAS,oBAAKkd;AAAL,AAAA,oBAAAld;AAAA,IAAAA,wBAAkBmgB;AAAlB,AAAA,oBAAAngB;AAAgC,OAACmQ,gDAAK+M,aAAaiD;;AAAnDngB;;;AAAAA;;;AACF,OAAC8c,gCAAkBC,eAAezG,OAAO6H,WAAW5e,EAAE2d;;AACtD,IAAMrH,MAAI,iBAAAvE,mBAAI4L;AAAJ,AAAA,oBAAA5L;AAAAA;;AAAA,IAAAA,uBAAiB6O;AAAjB,AAAA,oBAAA7O;AAAAA;;AAA+B,OAACkF,uBAAS9Q;;;;AAAnD,AACE,eAAO,AAACsZ,yDAAa1I,OAAO/W,EAAEsW;eAAK,eAAA,fAACkG,kGAAMsD,GAAGxJ,IAAIrW,EAAEC,UAAG+d;;;;;;AAjE9D,GAmEE,EAAK,AAACkC,cAAI,AAAA,oHAAY,AAACrT,eAAK2M,eAC1B,AAACtD,2BAAOhQ,GAAGlG;AACb,MAAA,AAAA2G,gDAAA,CAAA,2CAAA,AAAAC,+HAAA,2CAAA,uDAAA,wEAAA,jMAA6C4S,2PACRA;;AAtEvC,GAwEE,gDAAA,hDAAC3X,6CAAEge;AACH,eAAO,AAAC9C,2BAAajG,OAAO0C;eAAQwE;;;;;AAzEtC,GA2EE,EAAK,gDAAA,hDAACnc,6CAAEge,wEAAgB,GAAA,MAAA,LAAO5f;AAC/B,IAAA4X,qBAAY,AAACzB,oBAAMlQ,GAAGnG;AAAtB,AAAA,GAAA,CAAA8X,sBAAA;AAOE,eAAOf;eAAOkH;;;;;AAPhB,YAAAnG,RAAU9X;AAAV,AACE,IAAME,QAAE,EAAI,AAACiU,yBAAKhO,GAAGlG,IAAG,AAACmU,2BAAajO,GAAGjG,GAAGA;AAA5C,AACE,AAAC0N,4BAAc3N,EAAEwZ;;AACjB,AAAC5C,2BAAa3W,MAAEuZ;;AAChB,IAAA3B,yBAAoB,yBAAA,zBAACrS,sBAAQU,sFAAInG,MAAEC,EAAEC;AAArC,AAAA,GAAA,CAAA4X,0BAAA;AAEE,eAAOf;eAAOkH;;;;;AAFhB,gBAAAnG,ZAAUqF;AAAV,AACE,eAAO,AAACC,qCAAuBrG,OAAOoG;eAAWc;;;;;;;AAjFzD,GAqFE,EAAI,gDAAA,hDAACnc,6CAAEge,8FACH,gDAAA,hDAAChe,6CAAEge;AACP,IAAAhI,qBAAY,AAACzB,oBAAMlQ,GAAGnG;AAAtB,AAAA,GAAA,CAAA8X,sBAAA;AAKE,eAAOf;eAAOkH;;;;;AALhB,YAAAnG,RAAU9X;AAAV,AACE,IAAMM,IAAO,AAACsN,4BAAc3N,EAAEwZ;IACxBvH,SAAO,AAACoG,cAAI,yBAAA,zBAACjT,sBAAQc,sFAAInG,MAAEC;AADjC,AAEE,eAAO,AAACvC,+CAAO0f,qCAAuBrG,OAAO7E;eACtC,AAAC5I,+CAAO,AAAC+T,iCAAmBlX,GAAG+L,QAAQ+L;;;;;;AA3FpD,GA8FE,EAAI,gDAAA,hDAACnc,6CAAEge,0FACH,gDAAA,hDAAChe,6CAAEge;AACP,IAAAhI,qBAAY,AAACzB,oBAAMlQ,GAAGnG;AAAtB,AAAA,GAAA,CAAA8X,sBAAA;AAKE,eAAOf;eAAOkH;;;;;AALhB,YAAAnG,RAAU9X;AAAV,AACE,IAAM6gB,WAAS,AAACvI,cAAI,yBAAA,zBAACjT,sBAAQc,sFAAInG;IAC3B8gB,WAAS,AAACxI,cAAI,AAACyI,sDAAO;kBAAK9gB;AAAL,AAAQ,gCAAA,mFAAA,5GAACoF,sBAAQc,2FAAQlG,MAAED;;mDAAK,2BAAA,3BAACiH,wBAAUd;AADvE,AAEE,eAAO,AAACzI,+CAAO0f,qCAAuBrG,OAAO,AAACzN,+CAAOuX,SAASC;eACvD,AAACxX,+CAAO,AAAC+T,iCAAmBlX,GAAG0a,UAAU5C;;;;;;AApGtD,AAwGC,MAAA,AAAArX,gDAAA,CAAA,wBAAA,AAAAC,qHAAA,yRAAA,2CAAA,uDAAA,wEAAA,mEAAA,nhBAA+B4S,ghBAA2TqG,6DAAarG;;;;;;;;;;;;;;;;AAnL5W,GAqLC,AAAC7X,2BAAO6X;AACR,IAAAuH,aAAuBvH;QAAvB,AAAA5b,4CAAAmjB,WAAA,IAAA,/DAAOhhB;QAAP,AAAAnC,4CAAAmjB,WAAA,IAAA,/DAAS/gB;QAAT,AAAApC,4CAAAmjB,WAAA,IAAA,/DAAW9gB;SAAX,AAAArC,4CAAAmjB,WAAA,IAAA,hEAAa7gB;YAAb,AAAAtC,4CAAAmjB,WAAA,IAAA,nEAAgBrf;AAAhB,AACE,oBAAIA;AACF,eAAO,kCAAA,mFAAA,rHAACqb,2BAAajG,+IAAgB/W,EAAEC,EAAEC,EAAEC;eAAK8d;;;;;AAChD,eAAOlH;eAAO,eAAA,mFAAA,lGAACyF,iKAAkBxc,EAAEC,EAAEC,UAAG+d;;;;;;AAzL7C,AA4LC,MAAA,AAAArX,gDAAA,CAAA,sBAAA,AAAAC,qHAAA,qCAAA,2CAAA,uDAAA,wEAAA,5NAA6B4S,sRACaA","names":["datascript.db/Exception","js/Error","datascript.db/IllegalArgumentException","datascript.db/UnsupportedOperationException","datascript.db/e0","datascript.db/tx0","datascript.db/emax","datascript.db/txmax","datascript.db/implicit-schema","datascript.db/seqable?","x","cljs.core/seqable?","me.tonsky.persistent-sorted-set.arrays/array?","datascript.db/conjv","cljs.core.fnil","cljs.core/conj","datascript.db/conjs","datascript.db/reduce-indexed","f","init","xs","cljs.core/first","cljs.core.reduce","p__49992","vec__49993","cljs.core.nth","acc","idx","res","cljs.core/reduced?","cljs.core/reduced","datascript.db/cljs-env?","env","cljs.core/boolean","datascript.db/combine-hashes","y","cljs.core/hash-combine","datascript$db$IDatom$datom_tx$dyn","x__4509__auto__","m__4510__auto__","datascript.db/datom-tx","goog/typeOf","m__4508__auto__","cljs.core/missing-protocol","datascript$db$IDatom$datom_added$dyn","datascript.db/datom-added","datascript$db$IDatom$datom_get_idx$dyn","datascript.db/datom-get-idx","datascript$db$IDatom$datom_set_idx$dyn","datascript.db/datom-set-idx","datascript.db/IDatom","this","value","cljs.core/PROTOCOL_SENTINEL","this__4450__auto__","writer__4451__auto__","opt__4452__auto__","cljs.core/-write","datascript.db/Datom","datascript.db/->Datom","e","a","v","tx","_hash","d","_","datascript.db/hash-datom","o","and__4210__auto__","datascript.db/equiv-datom","datascript.db/seq-datom","k","datascript.db/val-at-datom","nf","i","datascript.db/nth-datom","not-found","datascript.db/assoc-datom","writer","opts","cljs.core/pr-sequential-writer","cljs.core/pr-writer","goog/exportSymbol","var_args","G__49997","datascript.db/datom","added","datascript.db/datom?","cljs.core/hash","cljs.core._EQ_","cljs.core/List","G__49998","G__50000","G__50001","G__50002","G__50003","cljs.core/Keyword","datascript.db.datom","datascript.db/datom-from-reader","vec","cljs.core.apply","datascript.db/cmp","cljs.core/compare","datascript.db/class-identical?","cljs.core/type","datascript.db/class-compare","goog.array/defaultCompare","cljs.core/type->str","datascript.db/value-compare","e50005","cljs.core/native-satisfies?","cljs.core/IComparable","cljs.core/-compare","cljs.core/array?","datascript.db/value-cmp","datascript.db/cmp-datoms-eavt","d1","d2","c__49360__auto__","datascript.db/cmp-datoms-aevt","datascript.db/cmp-datoms-avet","datascript.db/cmp-attr-quick","a1","a2","datascript.db/cmp-datoms-eav-quick","datascript.db/cmp-datoms-eavt-quick","datascript.db/cmp-datoms-aevt-quick","datascript.db/cmp-datoms-avet-quick","datascript.db/diff-sorted","b","cmp","only-a","only-b","both","cljs.core/empty?","cljs.core/not-empty","cljs.core.into","first-a","first-b","diff","e50008","cljs.core.conj","cljs.core/next","datascript$db$ISearch$_search$dyn","datascript.db/-search","datascript.db/ISearch","data","pattern","datascript.db/fsearch","datascript$db$IIndexAccess$_datoms$dyn","datascript.db/-datoms","datascript$db$IIndexAccess$_seek_datoms$dyn","datascript.db/-seek-datoms","datascript$db$IIndexAccess$_rseek_datoms$dyn","datascript.db/-rseek-datoms","datascript$db$IIndexAccess$_index_range$dyn","datascript.db/-index-range","datascript.db/IIndexAccess","db","index","components","attr","start","end","datascript.db/validate-indexed","temp__5757__auto__","datascript.db/indexing?","cljs.core.ex_info","cljs.core.pr_str","datascript$db$IDB$_schema$dyn","datascript.db/-schema","datascript$db$IDB$_attrs_by$dyn","datascript.db/-attrs-by","datascript.db/IDB","property","datascript.db/db-transient","cljs.core.update","cljs.core/transient","datascript.db/db-persistent!","cljs.core/persistent!","this__4461__auto__","k__4462__auto__","this__4463__auto__","k50011","else__4464__auto__","G__50015","schema","eavt","aevt","avet","max-eid","max-tx","rschema","hash","cljs.core.get","__extmap","this__4481__auto__","f__4482__auto__","init__4483__auto__","ret__4484__auto__","p__50016","vec__50017","k__4485__auto__","v__4486__auto__","this__4476__auto__","writer__4477__auto__","opts__4478__auto__","pr-pair__4479__auto__","keyval__4480__auto__","cljs.core.concat","cljs.core/PersistentVector","G__50010","cljs.core/RecordIter","cljs.core/-iterator","cljs.core/nil-iter","this__4459__auto__","__meta","this__4456__auto__","__hash","this__4465__auto__","cljs.core/count","this__4457__auto__","h__4319__auto__","coll__4458__auto__","cljs.core/hash-unordered-coll","this50012","other50013","this__4471__auto__","k__4472__auto__","cljs.core/contains?","cljs.core.dissoc","cljs.core/-with-meta","this__4468__auto__","G__50020","this__4469__auto__","k__4470__auto__","pred__50021","cljs.core/keyword-identical?","expr__50022","cljs.core.assoc","this__4474__auto__","cljs.core/seq","cljs.core/MapEntry","this__4460__auto__","this__4466__auto__","entry__4467__auto__","cljs.core/vector?","cljs.core/-nth","cljs.core/-conj","datascript.db/DB","this__4505__auto__","writer__4506__auto__","G__50014","extmap__4501__auto__","G__50024","cljs.core/record?","datascript.db/->DB","datascript.db/map->DB","datascript.db/hash-db","other","datascript.db/equiv-db","cljs.core/-rseq","cljs.core/with-meta","G__50025","datascript.db/empty-db","cljs.core/meta","w","datascript.db/pr-db","key","fexpr__50028","vec__50029","multival?","me.tonsky.persistent_sorted_set.slice","cljs.core.filter","cs","datascript.db/components->pattern","me.tonsky.persistent_sorted_set.rslice","G__50026","G__50027","datascript.db/validate-attr","datascript.db/resolve-datom","datascript.db/db?","k50039","G__50043","unfiltered-db","pred","p__50044","vec__50045","G__50038","this50040","other50041","G__50048","pred__50049","expr__50050","datascript.db/FilteredDB","G__50042","G__50052","datascript.db/->FilteredDB","datascript.db/map->FilteredDB","datascript.db/hash-fdb","datascript.db/attr->properties","G__50053","datascript.db/attr-tuples","m","tuple-attr","src-attr","cljs.core/assoc","datascript.db/rschema","cljs.core/reduce-kv","attr-schema","prop","datascript.db/validate-schema-key","expected","datascript.db/validate-schema","seq__50054","chunk__50055","count__50056","i__50057","vec__50076","temp__5753__auto__","cljs.core/chunked-seq?","c__4638__auto__","cljs.core/chunk-first","cljs.core/chunk-rest","vec__50085","kv","comp?","cljs.core.not_EQ_","ex-data","attrs","cljs.core/sequential?","seq__50079","chunk__50081","count__50082","i__50083","seq__50088","chunk__50090","count__50091","i__50092","G__50095","datascript.db.empty_db","cljs.core/map?","cljs.core.merge","me.tonsky.persistent_sorted_set.sorted_set_by","cljs.core.atom","datascript.db/init-max-eid","or__4212__auto__","G__50097","datascript.db/init-db","datoms","datascript.db.init_db","not-datom","cljs.core.drop_while","indexed","arr","G__50098","me.tonsky.persistent-sorted-set.arrays/into-array","me.tonsky.persistent-sorted-set.arrays/asort","me.tonsky.persistent-sorted-set/from-sorted-array","avet-datoms","avet-arr","cljs.core/to-array","cljs.core.transduce","cljs.core.map","cljs.core/max","datascript.db/equiv-db-index","ys","cljs.core/deref","h","cljs.core/reset!","p__50099","map__50100","cljs.core/--destructure-map","datascript.db/db-from-reader","p__50101","vec__50102","t","default-e","default-tx","G__50105","G__50106","datascript.db/entid-some","datascript.db/ref?","datascript.db/entid-strict","p__50107","vec__50108","c0","c1","c2","c3","G__50111","k50113","G__50117","db-before","db-after","tx-data","tempids","tx-meta","p__50118","vec__50119","G__50112","this50114","other50115","G__50122","pred__50123","expr__50124","datascript.db/TxReport","G__50116","G__50126","datascript.db/->TxReport","datascript.db/map->TxReport","datascript.db/is-attr?","datascript.db/multival?","datascript.db/component?","datascript.db/tuple?","datascript.db/tuple-source?","datascript.db/entid","eid","vec__50127","cljs.core.array_seq","datascript.db/validate-datom","datom","found","at","datascript.db/validate-val","datascript.db/current-tx","report","cljs.core.get_in","datascript.db/next-eid","datascript.db/tx-id?","datascript.db/tempid?","datascript.db/new-eid?","datascript.db/advance-max-eid","G__50130","G__50132","datascript.db/allocate-eid","G__50133","datascript.db/with-datom","indexing?","G__50134","me.tonsky.persistent-sorted-set/conj","temp__5755__auto__","removing","G__50135","me.tonsky.persistent-sorted-set/disj","datascript.db/queue-tuple","queue","tuple","tuple-value","cljs.core/vec","cljs.core.repeat","tuple-value'","datascript.db/queue-tuples","tuples","datascript.db/transact-report","report'","queue'","datascript.db/reverse-ref?","cljs.core/name","cljs.core/re-matches","datascript.db/reverse-ref","cljs.core.keyword","cljs.core/namespace","cljs.core.subs","vec__50136","ns","name","datascript.db/resolve-upserts","entity","idents","resolve","split","vs","p__50139","vec__50140","upserts","cljs.core/coll?","vec__50143","insert","upsert","G__50146","G__50147","datascript.db/validate-upserts","upsert-ids","v->e","vec__50148","vec__50151","vec__50154","vec__50157","e1","v1","e2","v2","cljs.core/second","vec__50160","vec__50163","upsert-id","datascript.db/maybe-wrap-multival","datascript.db/explode","iter__4611__auto__","s__50167","cljs.core/LazySeq","xs__6308__auto__","vec__50172","iterys__4607__auto__","s__50169","c__4609__auto__","size__4610__auto__","b__50171","cljs.core/chunk-buffer","i__50170","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__50168","cljs.core/cons","cljs.core/rest","fs__4608__auto__","iter__50166","reverse?","straight-a","p__50175","vec__50176","datascript.db/transact-add","ent","new-datom","old-datom","datascript.db/transact-retract-datom","datascript.db/retract-components","cljs.core.comp","datascript.db/retry-with-tempid","initial-report","es","tempid","upserted-eid","tempids'","datascript.db/transact-tx-data","datascript.db/builtin-fn?","datascript.db/flush-tuples","attr-tuples","entities","tuples+values","cljs.core/every?","cljs.core/nil?","current","datascript.db/check-value-tempids","all-tempids","reduce-fn","unused","cljs.core.sort","cljs.core/vals","initial-es","initial-report'","has-tuples?","initial-es'","cljs.core.interleave","vec__50197","seq__50198","first__50199","cljs.core/update","cljs.core/inc","old-eid","vec__50200","id","datascript.db.allocate_eid","entity'","new-eid","new-entity","vec__50203","op","vec__50206","seq__50207","first__50208","args","cljs.core/not","ident","fun","cljs.core/fn?","vec__50209","ov","nv","cljs.core/some","resolved","allocated-eid","e-datoms","v-datoms","cljs.core.mapcat","vec__50212"],"sourcesContent":["(ns ^:no-doc ^:lean-ns datascript.db\n  (:require\n    #?(:cljs [goog.array :as garray])\n    [clojure.walk]\n    [clojure.data]\n    [me.tonsky.persistent-sorted-set :as set]\n    [me.tonsky.persistent-sorted-set.arrays :as arrays])\n  #?(:cljs (:require-macros [datascript.db :refer [case-tree combine-cmp raise defrecord-updatable cond+]]))\n  (:refer-clojure :exclude [seqable?])) \n\n;; ----------------------------------------------------------------------------\n\n#?(:cljs\n   (do\n     (def Exception js/Error)\n     (def IllegalArgumentException js/Error)\n     (def UnsupportedOperationException js/Error)))\n\n(def ^:const e0    0)\n(def ^:const tx0   0x20000000)\n(def ^:const emax  0x7FFFFFFF)\n(def ^:const txmax 0x7FFFFFFF)\n(def ^:const implicit-schema {:db/ident {:db/unique :db.unique/identity}})\n\n;; ----------------------------------------------------------------------------\n\n#?(:clj\n  (defmacro raise [& fragments]\n    (let [msgs (butlast fragments)\n          data (last fragments)]\n      `(throw (ex-info (str ~@(map (fn [m#] (if (string? m#) m# (list 'pr-str m#))) msgs)) ~data)))))\n\n(defn #?@(:clj  [^Boolean seqable?]  \n          :cljs [^boolean seqable?])\n  [x]\n  (and (not (string? x))\n  #?(:cljs (or (cljs.core/seqable? x)\n               (arrays/array? x))\n     :clj  (or (seq? x)\n               (instance? clojure.lang.Seqable x)\n               (nil? x)\n               (instance? Iterable x)\n               (arrays/array? x)\n               (instance? java.util.Map x)))))\n\n#?(:clj\n  (defmacro cond+ [& clauses]\n    (when-some [[test expr & rest] clauses]\n      (case test\n        :let `(let ~expr (cond+ ~@rest))\n        `(if ~test ~expr (cond+ ~@rest))))))\n\n#?(:clj\n(defmacro some-of\n  ([] nil)\n  ([x] x)\n  ([x & more]\n    `(let [x# ~x] (if (nil? x#) (some-of ~@more) x#)))))\n\n(def conjv (fnil conj []))\n(def conjs (fnil conj #{}))\n\n(defn reduce-indexed\n  \"Same as reduce, but `f` takes [acc el idx]\"\n  [f init xs]\n  (first\n    (reduce\n      (fn [[acc idx] x]\n        (let [res (f acc x idx)]\n          (if (reduced? res)\n            (reduced [res idx])\n            [res (inc idx)])))\n      [init 0]\n      xs)))\n\n;; ----------------------------------------------------------------------------\n;; macros and funcs to support writing defrecords and updating\n;; (replacing) builtins, i.e., Object/hashCode, IHashEq hasheq, etc.\n;; code taken from prismatic:\n;;  https://github.com/Prismatic/schema/commit/e31c419c56555c83ef9ee834801e13ef3c112597\n;;\n\n(defn- cljs-env?\n  \"Take the &env from a macro, and tell whether we are expanding into cljs.\"\n  [env]\n  (boolean (:ns env)))\n\n#?(:clj\n   (defmacro if-cljs\n     \"Return then if we are generating cljs code and else for Clojure code.\n     https://groups.google.com/d/msg/clojurescript/iBY5HaQda4A/w1lAQi9_AwsJ\"\n     [then else]\n     (if (cljs-env? &env) then else)))\n\n(defn combine-hashes [x y]\n  #?(:clj  (clojure.lang.Util/hashCombine x y)\n     :cljs (hash-combine x y)))\n\n#?(:clj\n   (defn- get-sig [method]\n     ;; expects something like '(method-symbol [arg arg arg] ...)\n     ;; if the thing matches, returns [fully-qualified-symbol arity], otherwise nil\n     (and (sequential? method)\n          (symbol? (first method))\n          (vector? (second method))\n          (let [sym (first method)\n                ns  (or (some->> sym resolve meta :ns str) \"clojure.core\")]\n            [(symbol ns (name sym)) (-> method second count)]))))\n\n#?(:clj\n   (defn- dedupe-interfaces [deftype-form]\n     ;; get the interfaces list, remove any duplicates, similar to remove-nil-implements in potemkin\n     ;; verified w/ deftype impl in compiler:\n     ;; (deftype* tagname classname [fields] :implements [interfaces] :tag tagname methods*)\n     (let [[deftype* tagname classname fields implements interfaces & rest] deftype-form]\n       (when (or (not= deftype* 'deftype*) (not= implements :implements))\n         (throw (IllegalArgumentException. \"deftype-form mismatch\")))\n       (list* deftype* tagname classname fields implements (vec (distinct interfaces)) rest))))\n\n#?(:clj\n   (defn- make-record-updatable-clj [name fields & impls]\n     (let [impl-map (->> impls (map (juxt get-sig identity)) (filter first) (into {}))\n           body     (macroexpand-1 (list* 'defrecord name fields impls))]\n       (clojure.walk/postwalk\n        (fn [form]\n          (if (and (sequential? form) (= 'deftype* (first form)))\n            (->> form\n                 dedupe-interfaces\n                 (remove (fn [method]\n                           (when-some [impl (-> method get-sig impl-map)]\n                             (not= method impl)))))\n            form))\n        body))))\n\n#?(:clj\n   (defn- make-record-updatable-cljs [name fields & impls]\n     `(do\n        (defrecord ~name ~fields)\n        (extend-type ~name ~@impls))))\n\n#?(:clj\n   (defmacro defrecord-updatable [name fields & impls]\n     `(if-cljs\n       ~(apply make-record-updatable-cljs name fields impls)\n       ~(apply make-record-updatable-clj  name fields impls))))\n\n;; ----------------------------------------------------------------------------\n\n(declare hash-datom equiv-datom seq-datom nth-datom assoc-datom val-at-datom)\n\n(defprotocol IDatom\n  (datom-tx [this])\n  (datom-added [this])\n  (datom-get-idx [this])\n  (datom-set-idx [this value]))\n\n(deftype Datom #?(:clj [^int e a v ^int tx ^:unsynchronized-mutable ^int idx ^:unsynchronized-mutable ^int _hash]\n                  :cljs [^number e a v ^number tx ^:mutable ^number idx ^:mutable ^number _hash])\n  IDatom\n  (datom-tx [d] (if (pos? tx) tx (- tx)))\n  (datom-added [d] (pos? tx))\n  (datom-get-idx [_] idx)\n  (datom-set-idx [_ value] (set! idx (int value)))\n\n  #?@(:cljs\n       [IHash\n        (-hash [d] (if (zero? _hash)\n                     (set! _hash (hash-datom d))\n                     _hash))\n        IEquiv\n        (-equiv [d o] (and (instance? Datom o) (equiv-datom d o)))\n\n        ISeqable\n        (-seq [d] (seq-datom d))\n\n        ILookup\n        (-lookup [d k] (val-at-datom d k nil))\n        (-lookup [d k nf] (val-at-datom d k nf))\n\n        IIndexed\n        (-nth [this i] (nth-datom this i))\n        (-nth [this i not-found] (nth-datom this i not-found))\n        \n        IAssociative\n        (-assoc [d k v] (assoc-datom d k v))\n\n        IPrintWithWriter\n        (-pr-writer [d writer opts]\n                    (pr-sequential-writer writer pr-writer\n                                          \"#datascript/Datom [\" \" \" \"]\"\n                                          opts [(.-e d) (.-a d) (.-v d) (datom-tx d) (datom-added d)]))]\n      :clj\n       [Object\n        (hashCode [d]\n          (if (zero? _hash)\n            (let [h (int (hash-datom d))]\n              (set! _hash h)\n              h)\n            _hash))\n        (toString [d] (pr-str d))\n\n        clojure.lang.IHashEq\n        (hasheq [d] (.hashCode d))\n\n        clojure.lang.Seqable\n        (seq [d] (seq-datom d))\n\n        clojure.lang.IPersistentCollection\n        (equiv [d o] (and (instance? Datom o) (equiv-datom d o)))\n        (empty [d] (throw (UnsupportedOperationException. \"empty is not supported on Datom\")))\n        (count [d] 5)\n        (cons [d [k v]] (assoc-datom d k v))\n        \n        clojure.lang.Indexed\n        (nth [this i]           (nth-datom this i))\n        (nth [this i not-found] (nth-datom this i not-found))\n\n        clojure.lang.ILookup\n        (valAt [d k] (val-at-datom d k nil))\n        (valAt [d k nf] (val-at-datom d k nf))\n\n        clojure.lang.Associative\n        (entryAt [d k] (some->> (val-at-datom d k nil) (clojure.lang.MapEntry k)))\n        (containsKey [e k] (#{:e :a :v :tx :added} k))\n        (assoc [d k v] (assoc-datom d k v))]\n))\n\n#?(:cljs (goog/exportSymbol \"datascript.db.Datom\" Datom))\n\n(defn ^Datom datom\n  ([e a v] (Datom. e a v tx0 0 0))\n  ([e a v tx] (Datom. e a v tx 0 0))\n  ([e a v tx added] (Datom. e a v (if added tx (- tx)) 0 0)))\n\n(defn datom? [x] (instance? Datom x))\n\n(defn- hash-datom [^Datom d]\n  (-> (hash (.-e d))\n      (combine-hashes (hash (.-a d)))\n      (combine-hashes (hash (.-v d)))))\n\n(defn- equiv-datom [^Datom d ^Datom o]\n  (and (== (.-e d) (.-e o))\n       (= (.-a d) (.-a o))\n       (= (.-v d) (.-v o))))\n\n(defn- seq-datom [^Datom d]\n  (list (.-e d) (.-a d) (.-v d) (datom-tx d) (datom-added d)))\n\n;; keep it fast by duplicating for both keyword and string cases\n;; instead of using sets or some other matching func\n(defn- val-at-datom [^Datom d k not-found]\n  (case k\n    :e      (.-e d) \"e\"     (.-e d)\n    :a      (.-a d) \"a\"     (.-a d)\n    :v      (.-v d) \"v\"     (.-v d)\n    :tx     (datom-tx d)\n    \"tx\"    (datom-tx d)\n    :added  (datom-added d)\n    \"added\" (datom-added d)\n    not-found))\n\n(defn- nth-datom\n  ([^Datom d ^long i]\n    (case i\n      0 (.-e d)\n      1 (.-a d)\n      2 (.-v d)\n      3 (datom-tx d)\n      4 (datom-added d)\n        #?(:clj  (throw (IndexOutOfBoundsException.))\n           :cljs (throw (js/Error. (str \"Datom/-nth: Index out of bounds: \" i))))))\n  ([^Datom d ^long i not-found]\n    (case i\n      0 (.-e d)\n      1 (.-a d)\n      2 (.-v d)\n      3 (datom-tx d)\n      4 (datom-added d)\n        not-found)))\n\n(defn- ^Datom assoc-datom [^Datom d k v]\n  (case k\n    :e     (datom v       (.-a d) (.-v d) (datom-tx d) (datom-added d))\n    :a     (datom (.-e d) v       (.-v d) (datom-tx d) (datom-added d))\n    :v     (datom (.-e d) (.-a d) v       (datom-tx d) (datom-added d))\n    :tx    (datom (.-e d) (.-a d) (.-v d) v            (datom-added d))\n    :added (datom (.-e d) (.-a d) (.-v d) (datom-tx d) v)\n    (throw (IllegalArgumentException. (str \"invalid key for #datascript/Datom: \" k)))))\n\n;; printing and reading\n;; #datomic/DB {:schema <map>, :datoms <vector of [e a v tx]>}\n\n(defn ^Datom datom-from-reader [vec]\n  (apply datom vec))\n\n#?(:clj\n   (defmethod print-method Datom [^Datom d, ^java.io.Writer w]\n     (.write w (str \"#datascript/Datom \"))\n     (binding [*out* w]\n       (pr [(.-e d) (.-a d) (.-v d) (datom-tx d) (datom-added d)]))))\n\n;; ----------------------------------------------------------------------------\n;; datom cmp macros/funcs\n;;\n\n#?(:clj\n  (defmacro combine-cmp [& comps]\n    (loop [comps (reverse comps)\n           res   (num 0)]\n      (if (not-empty comps)\n        (recur\n          (next comps)\n          `(let [c# ~(first comps)]\n             (if (== 0 c#)\n               ~res\n               c#)))\n        res))))\n\n#?(:clj\n   (defn- -case-tree [queries variants]\n     (if queries\n       (let [v1 (take (/ (count variants) 2) variants)\n             v2 (drop (/ (count variants) 2) variants)]\n         (list 'if (first queries)\n               (-case-tree (next queries) v1)\n               (-case-tree (next queries) v2)))\n       (first variants))))\n\n#?(:clj\n   (defmacro case-tree [qs vs]\n     (-case-tree qs vs)))\n\n(defn cmp [x y]\n  (if (nil? x) 0\n    (if (nil? y) 0\n      (compare x y))))\n\n(defn class-identical? [x y]\n  #?(:clj  (identical? (class x) (class y))\n     :cljs (identical? (type x) (type y))))\n\n(defn class-compare [x y]\n  #?(:clj  (compare (.getName (class x)) (.getName (class y)))\n     :cljs (garray/defaultCompare (type->str (type x)) (type->str (type y)))))\n\n(defn value-compare [x y]\n  (try \n    (cond\n      (= x y) 0\n      #?@(:clj  [(instance? Number x)       (clojure.lang.Numbers/compare x y)])\n      #?@(:clj  [(instance? Comparable x)   (.compareTo ^Comparable x y)]\n          :cljs [(satisfies? IComparable x) (-compare x y)])\n      (not (class-identical? x y)) (class-compare x y)\n      #?@(:cljs [(or (string? x) (array? x) (true? x) (false? x)) (garray/defaultCompare x y)])\n      :else (- (hash x) (hash y)))\n    (catch #?(:clj ClassCastException :cljs js/Error) e\n      (if (not (class-identical? x y))\n        (class-compare x y)\n        (throw e)))))\n\n(defn value-cmp [x y]\n  (cond \n    (nil? x) 0\n    (nil? y) 0\n    :else     (value-compare x y)))\n\n;; Slower cmp-* fns allows for datom fields to be nil.\n;; Such datoms come from slice method where they are used as boundary markers.\n\n(defn cmp-datoms-eavt [^Datom d1, ^Datom d2]\n  (combine-cmp\n    (#?(:clj Integer/compare :cljs -) (.-e d1) (.-e d2))\n    (cmp (.-a d1) (.-a d2))\n    (value-cmp (.-v d1) (.-v d2))\n    (#?(:clj Integer/compare :cljs -) (datom-tx d1) (datom-tx d2))))\n\n(defn cmp-datoms-aevt [^Datom d1, ^Datom d2]\n  (combine-cmp\n    (cmp (.-a d1) (.-a d2))\n    (#?(:clj Integer/compare :cljs -) (.-e d1) (.-e d2))\n    (value-cmp (.-v d1) (.-v d2))\n    (#?(:clj Integer/compare :cljs -) (datom-tx d1) (datom-tx d2))))\n\n(defn cmp-datoms-avet [^Datom d1, ^Datom d2]\n  (combine-cmp\n    (cmp (.-a d1) (.-a d2))\n    (value-cmp (.-v d1) (.-v d2))\n    (#?(:clj Integer/compare :cljs -) (.-e d1) (.-e d2))\n    (#?(:clj Integer/compare :cljs -) (datom-tx d1) (datom-tx d2))))\n\n;; fast versions without nil checks\n\n(defn- cmp-attr-quick [a1 a2]\n  ;; either both are keywords or both are strings\n  #?(:cljs\n     (if (keyword? a1)\n       (-compare a1 a2)\n       (garray/defaultCompare a1 a2))\n     :clj\n     (.compareTo ^Comparable a1 a2)))\n\n(defn cmp-datoms-eav-quick [^Datom d1, ^Datom d2]\n  (combine-cmp\n    (#?(:clj Integer/compare :cljs -) (.-e d1) (.-e d2))\n    (cmp-attr-quick (.-a d1) (.-a d2))\n    (value-compare (.-v d1) (.-v d2))))\n\n(defn cmp-datoms-eavt-quick [^Datom d1, ^Datom d2]\n  (combine-cmp\n    (#?(:clj Integer/compare :cljs -) (.-e d1) (.-e d2))\n    (cmp-attr-quick (.-a d1) (.-a d2))\n    (value-compare (.-v d1) (.-v d2))\n    (#?(:clj Integer/compare :cljs -) (datom-tx d1) (datom-tx d2))))\n\n(defn cmp-datoms-aevt-quick [^Datom d1, ^Datom d2]\n  (combine-cmp\n    (cmp-attr-quick (.-a d1) (.-a d2))\n    (#?(:clj Integer/compare :cljs -) (.-e d1) (.-e d2))\n    (value-compare (.-v d1) (.-v d2))\n    (#?(:clj Integer/compare :cljs -) (datom-tx d1) (datom-tx d2))))\n\n(defn cmp-datoms-avet-quick [^Datom d1, ^Datom d2]\n  (combine-cmp\n    (cmp-attr-quick (.-a d1) (.-a d2))\n    (value-compare (.-v d1) (.-v d2))\n    (#?(:clj Integer/compare :cljs -) (.-e d1) (.-e d2))\n    (#?(:clj Integer/compare :cljs -) (datom-tx d1) (datom-tx d2))))\n\n(defn- diff-sorted [a b cmp]\n  (loop [only-a []\n         only-b []\n         both   []\n         a      a\n         b      b]\n    (cond\n      (empty? a) [(not-empty only-a) (not-empty (into only-b b)) (not-empty both)]\n      (empty? b) [(not-empty (into only-a a)) (not-empty only-b) (not-empty both)]\n      :else\n      (let [first-a (first a)\n            first-b (first b)\n            diff (try\n                   (cmp first-a first-b)\n                   (catch #?(:clj ClassCastException :cljs js/Error) _\n                     :incomparable))]\n        (cond\n          (= diff :incomparable) (recur (conj only-a first-a) (conj only-b first-b) both                (next a) (next b))\n          (== diff 0)            (recur only-a                only-b                (conj both first-a) (next a) (next b))\n          (< diff 0)             (recur (conj only-a first-a) only-b                both                (next a) b)\n          (> diff 0)             (recur only-a                (conj only-b first-b) both                a        (next b)))))))\n\n;; ----------------------------------------------------------------------------\n\n(declare hash-db hash-fdb equiv-db empty-db resolve-datom validate-attr components->pattern indexing?)\n#?(:cljs (declare pr-db))\n\n;;;;;;;;;; Searching\n\n(defprotocol ISearch\n  (-search [data pattern]))\n\n(defn- ^Datom fsearch [data pattern]\n  (first (-search data pattern)))\n\n(defprotocol IIndexAccess\n  (-datoms [db index components])\n  (-seek-datoms [db index components])\n  (-rseek-datoms [db index components])\n  (-index-range [db attr start end]))\n\n(defn validate-indexed [db index components]\n  (when (= index :avet)\n    (when-some [attr (first components)]\n      (when-not (indexing? db attr)\n        (raise \"Attribute \" attr \" should be marked as :db/index true\"\n          {:error :index-access :index :avet :components components})))))\n\n(defprotocol IDB\n  (-schema [db])\n  (-attrs-by [db property]))\n\n;; ----------------------------------------------------------------------------\n\n(defn db-transient [db]\n  (-> db\n    (update :eavt transient)\n    (update :aevt transient)\n    (update :avet transient)))\n\n(defn db-persistent! [db]\n  (-> db\n    (update :eavt persistent!)\n    (update :aevt persistent!)\n    (update :avet persistent!)))\n\n(defrecord-updatable DB [schema eavt aevt avet max-eid max-tx rschema hash]\n  #?@(:cljs\n      [IHash                (-hash  [db]        (hash-db db))\n       IEquiv               (-equiv [db other]  (equiv-db db other))\n       IReversible          (-rseq  [db]        (-rseq (.-eavt db)))\n       ICounted             (-count [db]        (count (.-eavt db)))\n       IEmptyableCollection (-empty [db]        (with-meta (empty-db (.-schema db)) (meta db)))\n       IPrintWithWriter     (-pr-writer [db w opts] (pr-db db w opts))\n       IEditableCollection  (-as-transient [db] (db-transient db))\n       ITransientCollection (-conj! [db key] (throw (ex-info \"datascript.DB/conj! is not supported\" {})))\n                            (-persistent! [db] (db-persistent! db))]\n\n      :clj\n      [Object               (hashCode [db]      (hash-db db))\n       clojure.lang.IHashEq (hasheq [db]        (hash-db db))\n       clojure.lang.IPersistentCollection\n                            (count [db]         (count eavt))\n                            (equiv [db other]   (equiv-db db other))\n       clojure.lang.IEditableCollection \n                            (empty [db]         (with-meta (empty-db schema) (meta db)))\n                            (asTransient [db] (db-transient db))\n       clojure.lang.ITransientCollection\n                            (conj [db key] (throw (ex-info \"datascript.DB/conj! is not supported\" {})))\n                            (persistent [db] (db-persistent! db))])\n\n  IDB\n  (-schema [db] (.-schema db))\n  (-attrs-by [db property] ((.-rschema db) property))\n\n  ISearch\n  (-search [db pattern]\n    (let [[e a v tx] pattern\n          eavt       (.-eavt db)\n          aevt       (.-aevt db)\n          avet       (.-avet db)\n          multival?  (contains? (-attrs-by db :db.cardinality/many) a)]\n      (case-tree [e a (some? v) tx]\n        [(set/slice eavt (datom e a v tx) (datom e a v tx))                   ;; e a v tx\n         (set/slice eavt (datom e a v tx0) (datom e a v txmax))               ;; e a v _\n         (->> (set/slice eavt (datom e a nil tx0) (datom e a nil txmax))      ;; e a _ tx\n              (filter (fn [^Datom d] (= tx (datom-tx d)))))\n         (set/slice eavt (datom e a nil tx0) (datom e a nil txmax))           ;; e a _ _\n         (->> (set/slice eavt (datom e nil nil tx0) (datom e nil nil txmax))  ;; e _ v tx\n              (filter (fn [^Datom d] (and (= v (.-v d))\n                                          (= tx (datom-tx d))))))\n         (->> (set/slice eavt (datom e nil nil tx0) (datom e nil nil txmax))  ;; e _ v _\n              (filter (fn [^Datom d] (= v (.-v d)))))\n         (->> (set/slice eavt (datom e nil nil tx0) (datom e nil nil txmax))  ;; e _ _ tx\n              (filter (fn [^Datom d] (= tx (datom-tx d)))))\n         (set/slice eavt (datom e nil nil tx0) (datom e nil nil txmax))       ;; e _ _ _\n         (if (indexing? db a)                                                   ;; _ a v tx\n           (->> (set/slice avet (datom e0 a v tx0) (datom emax a v txmax))      \n                (filter (fn [^Datom d] (= tx (datom-tx d)))))\n           (->> (set/slice aevt (datom e0 a nil tx0) (datom emax a nil txmax))\n                (filter (fn [^Datom d] (and (= v (.-v d))\n                                            (= tx (datom-tx d)))))))\n         (if (indexing? db a)                                                   ;; _ a v _\n           (set/slice avet (datom e0 a v tx0) (datom emax a v txmax))\n           (->> (set/slice aevt (datom e0 a nil tx0) (datom emax a nil txmax))\n                (filter (fn [^Datom d] (= v (.-v d))))))\n         (->> (set/slice aevt (datom e0 a nil tx0) (datom emax a nil txmax))  ;; _ a _ tx\n              (filter (fn [^Datom d] (= tx (datom-tx d)))))\n         (set/slice aevt (datom e0 a nil tx0) (datom emax a nil txmax))       ;; _ a _ _\n         (filter (fn [^Datom d] (and (= v (.-v d))\n                                     (= tx (datom-tx d)))) eavt)                ;; _ _ v tx\n         (filter (fn [^Datom d] (= v (.-v d))) eavt)                            ;; _ _ v _\n         (filter (fn [^Datom d] (= tx (datom-tx d))) eavt)                      ;; _ _ _ tx\n         eavt])))                                                               ;; _ _ _ _\n\n  IIndexAccess\n  (-datoms [db index cs]\n    (validate-indexed db index cs)\n    (set/slice (get db index) (components->pattern db index cs e0 tx0) (components->pattern db index cs emax txmax)))\n\n  (-seek-datoms [db index cs]\n    (validate-indexed db index cs)\n    (set/slice (get db index) (components->pattern db index cs e0 tx0) (datom emax nil nil txmax)))\n\n  (-rseek-datoms [db index cs]\n    (validate-indexed db index cs)\n    (set/rslice (get db index) (components->pattern db index cs emax txmax) (datom e0 nil nil tx0)))\n\n  (-index-range [db attr start end]\n    (validate-indexed db :avet [attr])\n    (validate-attr attr (list '-index-range 'db attr start end))\n    (set/slice (.-avet db)\n      (resolve-datom db nil attr start nil e0 tx0)\n      (resolve-datom db nil attr end nil emax txmax)))\n                \n  clojure.data/EqualityPartition\n  (equality-partition [x] :datascript/db)\n\n  clojure.data/Diff\n  (diff-similar [a b]\n    (diff-sorted (:eavt a) (:eavt b) cmp-datoms-eav-quick)))\n\n(defn db? [x]\n  (and (satisfies? ISearch x)\n       (satisfies? IIndexAccess x)\n       (satisfies? IDB x)))\n\n;; ----------------------------------------------------------------------------\n(defrecord-updatable FilteredDB [unfiltered-db pred hash]\n  #?@(:cljs\n      [IHash                (-hash  [db]        (hash-fdb db))\n       IEquiv               (-equiv [db other]  (equiv-db db other))\n       ICounted             (-count [db]        (count (-datoms db :eavt [])))\n       IPrintWithWriter     (-pr-writer [db w opts] (pr-db db w opts))\n\n       IEmptyableCollection (-empty [_]         (throw (js/Error. \"-empty is not supported on FilteredDB\")))\n\n       ILookup              (-lookup ([_ _]     (throw (js/Error. \"-lookup is not supported on FilteredDB\")))\n                                     ([_ _ _]   (throw (js/Error. \"-lookup is not supported on FilteredDB\"))))\n\n\n       IAssociative         (-contains-key? [_ _] (throw (js/Error. \"-contains-key? is not supported on FilteredDB\")))\n                            (-assoc [_ _ _]       (throw (js/Error. \"-assoc is not supported on FilteredDB\")))]\n\n      :clj\n      [Object               (hashCode [db]      (hash-fdb db))\n\n       clojure.lang.IHashEq (hasheq [db]        (hash-fdb db))\n\n       clojure.lang.IPersistentCollection\n                            (count [db]         (count (-datoms db :eavt [])))\n                            (equiv [db o]       (equiv-db db o))\n                            (cons [db [k v]]    (throw (UnsupportedOperationException. \"cons is not supported on FilteredDB\")))\n                            (empty [db]         (throw (UnsupportedOperationException. \"empty is not supported on FilteredDB\")))\n\n       clojure.lang.ILookup (valAt [db k]       (throw (UnsupportedOperationException. \"valAt/2 is not supported on FilteredDB\")))\n                            (valAt [db k nf]    (throw (UnsupportedOperationException. \"valAt/3 is not supported on FilteredDB\")))\n       clojure.lang.IKeywordLookup (getLookupThunk [db k]\n                                                (throw (UnsupportedOperationException. \"getLookupThunk is not supported on FilteredDB\")))\n\n       clojure.lang.Associative\n                            (containsKey [e k]  (throw (UnsupportedOperationException. \"containsKey is not supported on FilteredDB\")))\n                            (entryAt [db k]     (throw (UnsupportedOperationException. \"entryAt is not supported on FilteredDB\")))\n                            (assoc [db k v]     (throw (UnsupportedOperationException. \"assoc is not supported on FilteredDB\")))])\n\n  IDB\n  (-schema [db]\n    (-schema (.-unfiltered-db db)))\n\n  (-attrs-by [db property]\n    (-attrs-by (.-unfiltered-db db) property))\n\n  ISearch\n  (-search [db pattern]\n    (filter (.-pred db) (-search (.-unfiltered-db db) pattern)))\n\n  IIndexAccess\n  (-datoms [db index cs]\n    (filter (.-pred db) (-datoms (.-unfiltered-db db) index cs)))\n\n  (-seek-datoms [db index cs]\n    (filter (.-pred db) (-seek-datoms (.-unfiltered-db db) index cs)))\n\n  (-rseek-datoms [db index cs]\n    (filter (.-pred db) (-rseek-datoms (.-unfiltered-db db) index cs)))\n\n  (-index-range [db attr start end]\n    (filter (.-pred db) (-index-range (.-unfiltered-db db) attr start end))))\n\n;; ----------------------------------------------------------------------------\n\n(defn attr->properties [k v]\n  (case v\n    :db.unique/identity  [:db/unique :db.unique/identity :db/index]\n    :db.unique/value     [:db/unique :db.unique/value :db/index]\n    :db.cardinality/many [:db.cardinality/many]\n    :db.type/ref         [:db.type/ref :db/index]\n    (cond\n      (and (= :db/isComponent k) (true? v)) [:db/isComponent]\n      (and (= :db/index k) (true? v))       [:db/index]\n      (= :db/tupleAttrs k)                  [:db.type/tuple :db/index]\n      :else [])))\n\n(defn attr-tuples\n  \"e.g. :reg/semester => #{:reg/semester+course+student ...}\"\n  [schema rschema]\n  (reduce\n    (fn [m tuple-attr] ;; e.g. :reg/semester+course+student\n      (reduce-indexed\n        (fn [m src-attr idx] ;; e.g. :reg/semester\n          (update m src-attr assoc tuple-attr idx))\n        m\n        (-> schema tuple-attr :db/tupleAttrs)))\n    {}\n    (:db.type/tuple rschema)))\n\n(defn- rschema\n  \":db/unique           => #{attr ...}\n   :db.unique/identity  => #{attr ...}\n   :db.unique/value     => #{attr ...}\n   :db/index            => #{attr ...}\n   :db.cardinality/many => #{attr ...}\n   :db.type/ref         => #{attr ...}\n   :db/isComponent      => #{attr ...}\n   :db.type/tuple       => #{attr ...}\n   :db/attrTuples       => {attr => {tuple-attr => idx}}\"\n  [schema]\n  (let [rschema (reduce-kv\n                  (fn [rschema attr attr-schema]\n                    (reduce-kv\n                      (fn [rschema key value]\n                        (reduce\n                          (fn [rschema prop]\n                            (update rschema prop conjs attr))\n                          rschema (attr->properties key value)))\n                      rschema attr-schema))\n                  {} schema)]\n    (assoc rschema :db/attrTuples (attr-tuples schema rschema))))\n\n(defn- validate-schema-key [a k v expected]\n  (when-not (or (nil? v)\n                (contains? expected v))\n    (throw (ex-info (str \"Bad attribute specification for \" (pr-str {a {k v}}) \", expected one of \" expected)\n                    {:error :schema/validation\n                     :attribute a\n                     :key k\n                     :value v}))))\n\n(defn- validate-schema [schema]\n  (doseq [[a kv] schema]\n\n    ;; isComponent\n    (let [comp? (:db/isComponent kv false)]\n      (validate-schema-key a :db/isComponent (:db/isComponent kv) #{true false})\n      (when (and comp? (not= (:db/valueType kv) :db.type/ref))\n        (raise \"Bad attribute specification for \" a \": {:db/isComponent true} should also have {:db/valueType :db.type/ref}\"\n          {:error     :schema/validation\n           :attribute a\n           :key       :db/isComponent})))\n\n    (validate-schema-key a :db/unique (:db/unique kv) #{:db.unique/value :db.unique/identity})\n    (validate-schema-key a :db/valueType (:db/valueType kv) #{:db.type/ref})\n    (validate-schema-key a :db/cardinality (:db/cardinality kv) #{:db.cardinality/one :db.cardinality/many})\n\n    ;; :db/tupleAttrs is a non-empty sequential coll\n    (when (contains? kv :db/tupleAttrs)\n      (let [ex-data {:error :schema/validation\n                     :attribute a\n                     :key :db/tupleAttrs}]\n        (when (= :db.cardinality/many (:db/cardinality kv))\n          (raise a \" has :db/tupleAttrs, must be :db.cardinality/one\" ex-data))\n\n        (let [attrs (:db/tupleAttrs kv)]\n          (when-not (sequential? attrs)\n            (raise a \" :db/tupleAttrs must be a sequential collection, got: \" attrs ex-data))\n\n          (when (empty? attrs)\n            (raise a \" :db/tupleAttrs can\u2019t be empty\" ex-data))\n\n          (doseq [attr attrs\n                  :let [ex-data (assoc ex-data :value attr)]]\n            (when (contains? (get schema attr) :db/tupleAttrs)\n              (raise a \" :db/tupleAttrs can\u2019t depend on another tuple attribute: \" attr ex-data))\n\n            (when (= :db.cardinality/many (:db/cardinality (get schema attr)))\n              (raise a \" :db/tupleAttrs can\u2019t depend on :db.cardinality/many attribute: \" attr ex-data))))))))\n\n(defn ^DB empty-db\n  ([] (empty-db nil))\n  ([schema]\n    {:pre [(or (nil? schema) (map? schema))]}\n    (validate-schema schema)\n    (map->DB\n      {:schema  schema\n       :rschema (rschema (merge implicit-schema schema))\n       :eavt    (set/sorted-set-by cmp-datoms-eavt)\n       :aevt    (set/sorted-set-by cmp-datoms-aevt)\n       :avet    (set/sorted-set-by cmp-datoms-avet)\n       :max-eid e0\n       :max-tx  tx0\n       :hash    (atom 0)})))\n\n(defn- init-max-eid [eavt]\n  (or (-> (set/rslice eavt (datom (dec tx0) nil nil txmax) (datom e0 nil nil tx0))\n        (first)\n        (:e))\n    e0))\n\n(defn ^DB init-db\n  ([datoms] (init-db datoms nil))\n  ([datoms schema]\n    (when-some [not-datom (first (drop-while datom? datoms))]\n      (raise \"init-db expects list of Datoms, got \" (type not-datom)\n        {:error :init-db}))\n    (validate-schema schema)\n    (let [rschema     (rschema (merge implicit-schema schema))\n          indexed     (:db/index rschema)\n          arr         (cond-> datoms\n                        (not (arrays/array? datoms)) (arrays/into-array))\n          _           (arrays/asort arr cmp-datoms-eavt-quick)\n          eavt        (set/from-sorted-array cmp-datoms-eavt arr)\n          _           (arrays/asort arr cmp-datoms-aevt-quick)\n          aevt        (set/from-sorted-array cmp-datoms-aevt arr)\n          avet-datoms (filter (fn [^Datom d] (contains? indexed (.-a d))) datoms)\n          avet-arr    (to-array avet-datoms)\n          _           (arrays/asort avet-arr cmp-datoms-avet-quick)\n          avet        (set/from-sorted-array cmp-datoms-avet avet-arr)\n          max-eid     (init-max-eid eavt)\n          max-tx      (transduce (map (fn [^Datom d] (datom-tx d))) max tx0 eavt)]\n      (map->DB {\n        :schema  schema\n        :rschema rschema\n        :eavt    eavt\n        :aevt    aevt\n        :avet    avet\n        :max-eid max-eid\n        :max-tx  max-tx\n        :hash    (atom 0)}))))\n\n(defn- equiv-db-index [x y]\n  (loop [xs (seq x)\n         ys (seq y)]\n    (cond\n      (nil? xs) (nil? ys)\n      (= (first xs) (first ys)) (recur (next xs) (next ys))\n      :else false)))\n\n(defn- hash-db [^DB db]\n  (let [h @(.-hash db)]\n    (if (zero? h)\n      (reset! (.-hash db) (combine-hashes (hash (.-schema db))\n                                          (hash (.-eavt db))))\n      h)))\n\n(defn- hash-fdb [^FilteredDB db]\n  (let [h @(.-hash db)\n        datoms (or (-datoms db :eavt []) #{})]\n    (if (zero? h)\n      (let [datoms (or (-datoms db :eavt []) #{})]\n        (reset! (.-hash db) (combine-hashes (hash (-schema db))\n                                            (hash-unordered-coll datoms))))\n      h)))\n\n(defn- equiv-db [db other]\n  (and (or (instance? DB other) (instance? FilteredDB other))\n       (= (-schema db) (-schema other))\n       (equiv-db-index (-datoms db :eavt []) (-datoms other :eavt []))))\n\n#?(:cljs\n   (defn pr-db [db w opts]\n     (-write w \"#datascript/DB {\")\n     (-write w \":schema \")\n     (pr-writer (-schema db) w opts)\n     (-write w \", :datoms \")\n     (pr-sequential-writer w\n                           (fn [d w opts]\n                             (pr-sequential-writer w pr-writer \"[\" \" \" \"]\" opts [(.-e d) (.-a d) (.-v d) (datom-tx d)]))\n                           \"[\" \" \" \"]\" opts (-datoms db :eavt []))\n     (-write w \"}\")))\n\n#?(:clj\n   (do\n     (defn pr-db [db, ^java.io.Writer w]\n       (.write w (str \"#datascript/DB {\"))\n       (.write w \":schema \")\n       (binding [*out* w]\n         (pr (-schema db))\n         (.write w \", :datoms [\")\n         (apply pr (map (fn [^Datom d] [(.-e d) (.-a d) (.-v d) (datom-tx d)]) (-datoms db :eavt []))))\n       (.write w \"]}\"))\n\n     (defmethod print-method DB [db w] (pr-db db w))\n     (defmethod print-method FilteredDB [db w] (pr-db db w))     \n))\n\n(defn db-from-reader [{:keys [schema datoms]}]\n  (init-db (map (fn [[e a v tx]] (datom e a v tx)) datoms) schema))\n\n;; ----------------------------------------------------------------------------\n\n(declare entid-strict entid-some ref?)\n\n(defn- resolve-datom [db e a v t default-e default-tx]\n  (when a (validate-attr a (list 'resolve-datom 'db e a v t)))\n  (datom\n    (or (entid-some db e) default-e)  ;; e\n    a                                 ;; a\n    (if (and (some? v) (ref? db a))   ;; v\n      (entid-strict db v)\n      v)\n    (or (entid-some db t) default-tx))) ;; t\n\n(defn- components->pattern [db index [c0 c1 c2 c3] default-e default-tx]\n  (case index\n    :eavt (resolve-datom db c0 c1 c2 c3 default-e default-tx)\n    :aevt (resolve-datom db c1 c0 c2 c3 default-e default-tx)\n    :avet (resolve-datom db c2 c0 c1 c3 default-e default-tx)))\n\n;; ----------------------------------------------------------------------------\n\n(defrecord TxReport [db-before db-after tx-data tempids tx-meta])\n\n(defn #?@(:clj  [^Boolean is-attr?]\n          :cljs [^boolean is-attr?]) [db attr property]\n  (contains? (-attrs-by db property) attr))\n\n(defn #?@(:clj  [^Boolean multival?]\n          :cljs [^boolean multival?]) [db attr]\n  (is-attr? db attr :db.cardinality/many))\n\n(defn #?@(:clj  [^Boolean ref?]\n          :cljs [^boolean ref?]) [db attr]\n  (is-attr? db attr :db.type/ref))\n\n(defn #?@(:clj  [^Boolean component?]\n          :cljs [^boolean component?]) [db attr]\n  (is-attr? db attr :db/isComponent))\n\n(defn #?@(:clj  [^Boolean indexing?]\n          :cljs [^boolean indexing?]) [db attr]\n  (is-attr? db attr :db/index))\n\n(defn #?@(:clj  [^Boolean tuple?]\n          :cljs [^boolean tuple?]) [db attr]\n  (is-attr? db attr :db.type/tuple))\n\n(defn #?@(:clj  [^Boolean tuple-source?]\n          :cljs [^boolean tuple-source?]) [db attr]\n  (is-attr? db attr :db/attrTuples))\n\n(defn entid [db eid]\n  {:pre [(db? db)]}\n  (cond\n    (and (number? eid) (pos? eid))\n    (if (> eid emax)\n      (raise \"Highest supported entity id is \" emax \", got \" eid {:error :entity-id :value eid})\n      eid)\n    \n    (sequential? eid)\n    (let [[attr value] eid]\n      (cond\n        (not= (count eid) 2)\n          (raise \"Lookup ref should contain 2 elements: \" eid\n            {:error :lookup-ref/syntax, :entity-id eid})\n        (not (is-attr? db attr :db/unique))\n          (raise \"Lookup ref attribute should be marked as :db/unique: \" eid\n            {:error :lookup-ref/unique, :entity-id eid})\n        (nil? value)\n          nil\n        :else\n          (-> (-datoms db :avet eid) first :e)))\n    \n    #?@(:cljs [(array? eid) (recur db (array-seq eid))])\n    \n    (keyword? eid)\n    (-> (-datoms db :avet [:db/ident eid]) first :e)\n\n    :else\n    (raise \"Expected number or lookup ref for entity id, got \" eid\n      {:error :entity-id/syntax, :entity-id eid})))\n\n(defn entid-strict [db eid]\n  (or (entid db eid)\n      (raise \"Nothing found for entity id \" eid\n             {:error :entity-id/missing\n              :entity-id eid})))\n\n(defn entid-some [db eid]\n  (when eid\n    (entid-strict db eid)))\n\n;;;;;;;;;; Transacting\n\n(defn validate-datom [db ^Datom datom]\n  (when (and (datom-added datom)\n             (is-attr? db (.-a datom) :db/unique))\n    (when-some [found (not-empty (-datoms db :avet [(.-a datom) (.-v datom)]))]\n      (raise \"Cannot add \" datom \" because of unique constraint: \" found\n             {:error :transact/unique\n              :attribute (.-a datom)\n              :datom datom}))))\n\n(defn- validate-attr [attr at]\n  (when-not (or (keyword? attr) (string? attr))\n    (raise \"Bad entity attribute \" attr \" at \" at \", expected keyword or string\"\n           {:error :transact/syntax, :attribute attr, :context at})))\n\n(defn- validate-val [v at]\n  (when (nil? v)\n    (raise \"Cannot store nil as a value at \" at\n           {:error :transact/syntax, :value v, :context at})))\n\n(defn- current-tx [report]\n  (inc (get-in report [:db-before :max-tx])))\n\n(defn- next-eid [db]\n  (inc (:max-eid db)))\n\n(defn- #?@(:clj  [^Boolean tx-id?]\n           :cljs [^boolean tx-id?])\n  [e]\n  (or (= e :db/current-tx)\n      (= e \":db/current-tx\") ;; for datascript.js interop\n      (= e \"datomic.tx\")\n      (= e \"datascript.tx\")))\n\n(defn- #?@(:clj  [^Boolean tempid?]\n           :cljs [^boolean tempid?])\n  [x]\n  (or (and (number? x) (neg? x)) (string? x)))\n\n(defn- new-eid? [db eid]\n  (and (> eid (:max-eid db))\n       (< eid tx0))) ;; tx0 is max eid\n\n(defn- advance-max-eid [db eid]\n  (cond-> db\n    (new-eid? db eid)\n      (assoc :max-eid eid)))\n\n(defn- allocate-eid\n  ([report eid]\n    (update report :db-after advance-max-eid eid))\n  ([report e eid]\n    (cond-> report\n      (tx-id? e)\n      (update :tempids assoc e eid)\n\n      (tempid? e)\n      (update :tempids assoc e eid)\n\n      (and (not (tempid? e)) (new-eid? (:db-after report) eid))\n      (update :tempids assoc eid eid)\n\n      true\n      (update :db-after advance-max-eid eid))))\n\n;; In context of `with-datom` we can use faster comparators which\n;; do not check for nil (~10-15% performance gain in `transact`)\n\n(defn- with-datom [db ^Datom datom]\n  (validate-datom db datom)\n  (let [indexing? (indexing? db (.-a datom))]\n    (if (datom-added datom)\n      (cond-> db\n        true      (update :eavt set/conj datom cmp-datoms-eavt-quick)\n        true      (update :aevt set/conj datom cmp-datoms-aevt-quick)\n        indexing? (update :avet set/conj datom cmp-datoms-avet-quick)\n        true      (advance-max-eid (.-e datom))\n        true      (assoc :hash (atom 0)))\n      (if-some [removing (fsearch db [(.-e datom) (.-a datom) (.-v datom)])]\n        (cond-> db\n          true      (update :eavt set/disj removing cmp-datoms-eavt-quick)\n          true      (update :aevt set/disj removing cmp-datoms-aevt-quick)\n          indexing? (update :avet set/disj removing cmp-datoms-avet-quick)\n          true      (assoc :hash (atom 0)))\n        db))))\n\n(defn- queue-tuple [queue tuple idx db e a v]\n  (let [tuple-value  (or (get queue tuple)\n                       (:v (first (-datoms db :eavt [e tuple])))\n                       (vec (repeat (-> db (-schema) (get tuple) :db/tupleAttrs count) nil)))\n        tuple-value' (assoc tuple-value idx v)]\n    (assoc queue tuple tuple-value')))\n\n(defn- queue-tuples [queue tuples db e a v]\n  (reduce-kv\n    (fn [queue tuple idx]\n      (queue-tuple queue tuple idx db e a v))\n    queue\n    tuples))\n\n(defn- transact-report [report datom]\n  (let [db      (:db-after report)\n        a       (:a datom)\n        report' (-> report\n                  (assoc :db-after (with-datom db datom))\n                  (update :tx-data conj datom))]\n    (if (tuple-source? db a)\n      (let [e      (:e datom)\n            v      (if (datom-added datom) (:v datom) nil)\n            queue  (or (-> report' ::queued-tuples (get e)) {})\n            tuples (get (-attrs-by db :db/attrTuples) a)\n            queue' (queue-tuples queue tuples db e a v)]\n        (update report' ::queued-tuples assoc e queue'))\n      report')))\n\n(defn #?@(:clj  [^Boolean reverse-ref?]\n          :cljs [^boolean reverse-ref?]) [attr]\n  (cond\n    (keyword? attr)\n    (= \\_ (nth (name attr) 0))\n    \n    (string? attr)\n    (boolean (re-matches #\"(?:([^/]+)/)?_([^/]+)\" attr))\n   \n    :else\n    (raise \"Bad attribute type: \" attr \", expected keyword or string\"\n           {:error :transact/syntax, :attribute attr})))\n\n(defn reverse-ref [attr]\n  (cond\n    (keyword? attr)\n    (if (reverse-ref? attr)\n      (keyword (namespace attr) (subs (name attr) 1))\n      (keyword (namespace attr) (str \"_\" (name attr))))\n\n   (string? attr)\n   (let [[_ ns name] (re-matches #\"(?:([^/]+)/)?([^/]+)\" attr)]\n     (if (= \\_ (nth name 0))\n       (if ns (str ns \"/\" (subs name 1)) (subs name 1))\n       (if ns (str ns \"/_\" name) (str \"_\" name))))\n   \n   :else\n    (raise \"Bad attribute type: \" attr \", expected keyword or string\"\n           {:error :transact/syntax, :attribute attr})))\n\n(defn- resolve-upserts\n  \"Returns [entity' upserts]. Upsert attributes that resolve to existing entities\n   are removed from entity, rest are kept in entity for insertion. No validation is performed.\n\n   upserts :: {:name  {\\\"Ivan\\\"  1}\n               :email {\\\"ivan@\\\" 2}\n               :alias {\\\"abc\\\"   3\n                       \\\"def\\\"   4}}}\"\n  [db entity]\n  (if-some [idents (not-empty (-attrs-by db :db.unique/identity))]\n    (let [resolve (fn [a v]\n                    (:e (first (-datoms db :avet [a v]))))\n          split   (fn [a vs]\n                    (reduce\n                      (fn [acc v]\n                        (if-some [e (resolve a v)]\n                          (update acc 1 assoc v e)\n                          (update acc 0 conj v)))\n                      [[] {}] vs))]\n      (reduce-kv\n        (fn [[entity upserts] a v]\n          (cond\n            (not (contains? idents a))\n            [(assoc entity a v) upserts]\n\n            (and\n              (multival? db a)\n              (or\n                (arrays/array? v)\n                (and (coll? v) (not (map? v)))))\n            (let [[insert upsert] (split a v)]\n              [(cond-> entity\n                 (not (empty? insert)) (assoc a insert))\n               (cond-> upserts\n                 (not (empty? upsert)) (assoc a upsert))])\n\n            :else\n            (if-some [e (resolve a v)]\n              [entity (assoc upserts a {v e})]\n              [(assoc entity a v) upserts])))\n        [{} {}]\n        entity))\n    [entity nil]))\n\n(defn validate-upserts\n  \"Throws if not all upserts point to the same entity. \n   Returns single eid that all upserts point to, or null.\"\n  [entity upserts]\n  (let [upsert-ids (reduce-kv\n                     (fn [m a v->e]\n                       (reduce-kv\n                         (fn [m v e]\n                           (assoc m e [a v]))\n                         m v->e))\n                     {} upserts)]\n    (if (<= 2 (count upsert-ids))\n      (let [[e1 [a1 v1]] (first upsert-ids)\n            [e2 [a2 v2]] (second upsert-ids)]\n        (raise \"Conflicting upserts: \" [a1 v1] \" resolves to \" e1 \", but \" [a2 v2] \" resolves to \" e2\n          {:error     :transact/upsert\n           :assertion [e1 a1 v1]\n           :conflict  [e2 a2 v2]}))\n      (let [[upsert-id [a v]] (first upsert-ids)\n            eid (:db/id entity)]\n        (when (and\n                (some? upsert-id)\n                (some? eid)\n                (not (tempid? eid))\n                (not= upsert-id eid))\n          (raise \"Conflicting upsert: \" [a v] \" resolves to \" upsert-id \", but entity already has :db/id \" eid\n            {:error     :transact/upsert\n             :assertion [upsert-id a v]\n             :conflict  {:db/id eid}}))\n        upsert-id))))\n\n;; multivals/reverse can be specified as coll or as a single value, trying to guess\n(defn- maybe-wrap-multival [db a vs]\n  (cond\n    ;; not a multival context\n    (not (or (reverse-ref? a)\n             (multival? db a)))\n    [vs]\n\n    ;; not a collection at all, so definitely a single value\n    (not (or (arrays/array? vs)\n             (and (coll? vs) (not (map? vs)))))\n    [vs]\n    \n    ;; probably lookup ref\n    (and (= (count vs) 2)\n         (is-attr? db (first vs) :db.unique/identity))\n    [vs]\n    \n    :else vs))\n\n(defn- explode [db entity]\n  (let [eid (:db/id entity)]\n    (for [[a vs] entity\n          :when  (not= a :db/id)\n          :let   [_          (validate-attr a {:db/id eid, a vs})\n                  reverse?   (reverse-ref? a)\n                  straight-a (if reverse? (reverse-ref a) a)\n                  _          (when (and reverse? (not (ref? db straight-a)))\n                               (raise \"Bad attribute \" a \": reverse attribute name requires {:db/valueType :db.type/ref} in schema\"\n                                      {:error :transact/syntax, :attribute a, :context {:db/id eid, a vs}}))]\n          v      (maybe-wrap-multival db a vs)]\n      (if (and (ref? db straight-a) (map? v)) ;; another entity specified as nested map\n        (assoc v (reverse-ref a) eid)\n        (if reverse?\n          [:db/add v   straight-a eid]\n          [:db/add eid straight-a v])))))\n\n(defn- transact-add [report [_ e a v tx :as ent]]\n  (validate-attr a ent)\n  (validate-val  v ent)\n  (let [tx        (or tx (current-tx report))\n        db        (:db-after report)\n        e         (entid-strict db e)\n        v         (if (ref? db a) (entid-strict db v) v)\n        new-datom (datom e a v tx)\n        multival? (multival? db a)\n        old-datom ^Datom (if multival?\n                           (fsearch db [e a v])\n                           (fsearch db [e a]))]\n      (cond\n        (nil? old-datom)\n        (transact-report report new-datom)\n\n        (= (.-v old-datom) v)\n        (update report ::tx-redundant conjv new-datom)\n\n        :else\n        (-> report\n          (transact-report (datom e a (.-v old-datom) tx false))\n          (transact-report new-datom)))))\n\n(defn- transact-retract-datom [report ^Datom d]\n  (let [tx (current-tx report)]\n    (transact-report report (datom (.-e d) (.-a d) (.-v d) tx false))))\n\n(defn- retract-components [db datoms]\n  (into #{} (comp\n              (filter (fn [^Datom d] (component? db (.-a d))))\n              (map (fn [^Datom d] [:db.fn/retractEntity (.-v d)]))) datoms))\n\n(declare transact-tx-data)\n\n(defn- retry-with-tempid [initial-report report es tempid upserted-eid]\n  (if (contains? (:tempids initial-report) tempid)\n    (raise \"Conflicting upsert: \" tempid \" resolves\"\n           \" both to \" upserted-eid \" and \" (get-in initial-report [:tempids tempid])\n      {:error :transact/upsert})\n    ;; try to re-run from the beginning\n    ;; but remembering that `tempid` will resolve to `upserted-eid`\n    (let [tempids' (-> (:tempids report)\n                     (assoc tempid upserted-eid))\n          report'  (assoc initial-report :tempids tempids')]\n      (transact-tx-data report' es))))\n\n(def builtin-fn?\n  #{:db.fn/call\n    :db.fn/cas\n    :db/cas\n    :db/add\n    :db/retract\n    :db.fn/retractAttribute\n    :db.fn/retractEntity\n    :db/retractEntity})\n\n(defn flush-tuples [report]\n  (let [db          (:db-after report)\n        schema      (-schema db)\n        attr-tuples (-attrs-by db :db/attrTuples)]\n    (reduce-kv\n      (fn [entities eid tuples+values]\n        (reduce-kv\n          (fn [entities tuple value]\n            (let [value   (if (every? nil? value) nil value)\n                  current (:v (first (-datoms db :eavt [eid tuple])))]\n              (cond\n                (= value current) entities\n                (nil? value)      (conj entities ^::internal [:db/retract eid tuple current])\n                :else             (conj entities ^::internal [:db/add eid tuple value]))))\n          entities\n          tuples+values))\n      []\n      (::queued-tuples report))))\n\n(defn check-value-tempids [report]\n  (let [all-tempids (::value-tempids report)\n        reduce-fn   (fn [tempids datom]\n                      (if (datom-added datom)\n                        (dissoc tempids (:e datom))\n                        tempids))\n        unused      (reduce reduce-fn all-tempids (concat (:tx-data report) (::tx-redundant report)))]\n    (if (empty? unused)\n      (dissoc report ::value-tempids ::tx-redundant)\n      (raise \"Tempids used only as value in transaction: \" (sort (vals unused))\n        {:error :transact/syntax, :tempids unused}))))\n\n(defn transact-tx-data [initial-report initial-es]\n  (when-not (or (nil? initial-es)\n                (sequential? initial-es))\n    (raise \"Bad transaction data \" initial-es \", expected sequential collection\"\n           {:error :transact/syntax, :tx-data initial-es}))\n  (let [initial-report' (-> initial-report\n                          #_(update :db-after transient))\n        has-tuples?     (not (empty? (-attrs-by (:db-after initial-report) :db.type/tuple)))\n        initial-es'     (if has-tuples?\n                          (interleave initial-es (repeat ::flush-tuples))\n                          initial-es)]\n    (loop [report initial-report'\n           es     initial-es']\n      (cond+\n        (empty? es)\n        (-> report\n          (check-value-tempids)\n          (update :tempids assoc :db/current-tx (current-tx report))\n          (update :db-after update :max-tx inc)\n          #_(update :db-after persistent!))\n\n        :let [[entity & entities] es]\n\n        (nil? entity)\n        (recur report entities)\n\n        (= ::flush-tuples entity)\n        (if (contains? report ::queued-tuples)\n          (recur\n            (dissoc report ::queued-tuples)\n            (concat (flush-tuples report) entities))\n          (recur report entities))\n\n        :let [db      (:db-after report)\n              tempids (:tempids report)]\n\n        (map? entity)\n        (let [old-eid (:db/id entity)]\n          (cond+\n            ;; trivial entity\n            ; (if (contains? entity :db/id)\n            ;   (= 1 (count entity))\n            ;   (= 0 (count entity)))\n            ; (recur report entities)\n\n            ;; :db/current-tx / \"datomic.tx\" => tx\n            (tx-id? old-eid)\n            (let [id (current-tx report)]\n              (recur (allocate-eid report old-eid id)\n                     (cons (assoc entity :db/id id) entities)))\n           \n            ;; lookup-ref => resolved | error\n            (sequential? old-eid)\n            (let [id (entid-strict db old-eid)]\n              (recur report\n                     (cons (assoc entity :db/id id) entities)))\n           \n            ;; upserted => explode | error\n            :let [[entity' upserts] (resolve-upserts db entity)\n                  upserted-eid      (validate-upserts entity' upserts)]\n\n            (some? upserted-eid)\n            (if (and (tempid? old-eid)\n                     (contains? tempids old-eid)\n                     (not= upserted-eid (get tempids old-eid)))\n              (retry-with-tempid initial-report report initial-es old-eid upserted-eid)\n              (recur (allocate-eid report old-eid upserted-eid)\n                     (concat (explode db (assoc entity' :db/id upserted-eid)) entities)))\n           \n            ;; resolved | allocated-tempid | tempid | nil => explode\n            (or (number? old-eid)\n                (nil?    old-eid)\n                (string? old-eid))\n            (let [new-eid (cond\n                            (nil? old-eid)    (next-eid db)\n                            (tempid? old-eid) (or (get tempids old-eid) (next-eid db))\n                            :else             old-eid)\n                  new-entity (assoc entity :db/id new-eid)]                \n              (recur (allocate-eid report old-eid new-eid)\n                     (concat (explode db new-entity) entities)))\n           \n            ;; trash => error\n            :else\n            (raise \"Expected number, string or lookup ref for :db/id, got \" old-eid\n              { :error :entity-id/syntax, :entity entity })))\n\n        (sequential? entity)\n        (let [[op e a v] entity]\n          (cond\n            (= op :db.fn/call)\n            (let [[_ f & args] entity]\n              (recur report (concat (apply f db args) entities)))\n            \n            (and (keyword? op)\n              (not (builtin-fn? op)))\n            (if-some [ident (entid db op)]\n              (let [fun  (:v (fsearch db [ident :db/fn]))\n                    args (next entity)]\n                (if (fn? fun)\n                  (recur report (concat (apply fun db args) entities))\n                  (raise \"Entity \" op \" expected to have :db/fn attribute with fn? value\"\n                         {:error :transact/syntax, :operation :db.fn/call, :tx-data entity})))\n              (raise \"Can\u2019t find entity for transaction fn \" op\n                     {:error :transact/syntax, :operation :db.fn/call, :tx-data entity}))\n            \n            (and (tempid? e)\n              (not= op :db/add))\n            (raise \"Can't use tempid in '\" entity \"'. Tempids are allowed in :db/add only\"\n              { :error :transact/syntax, :op entity })\n\n            (or (= op :db.fn/cas)\n              (= op :db/cas))\n            (let [[_ e a ov nv] entity\n                  e (entid-strict db e)\n                  _ (validate-attr a entity)\n                  ov (if (ref? db a) (entid-strict db ov) ov)\n                  nv (if (ref? db a) (entid-strict db nv) nv)\n                  _ (validate-val nv entity)\n                  datoms (vec (-search db [e a]))]\n              (if (multival? db a)\n                (if (some (fn [^Datom d] (= (.-v d) ov)) datoms)\n                  (recur (transact-add report [:db/add e a nv]) entities)\n                  (raise \":db.fn/cas failed on datom [\" e \" \" a \" \" (map :v datoms) \"], expected \" ov\n                         {:error :transact/cas, :old datoms, :expected ov, :new nv}))\n                (let [v (:v (first datoms))]\n                  (if (= v ov)\n                    (recur (transact-add report [:db/add e a nv]) entities)\n                    (raise \":db.fn/cas failed on datom [\" e \" \" a \" \" v \"], expected \" ov\n                           {:error :transact/cas, :old (first datoms), :expected ov, :new nv })))))\n\n            (tx-id? e)\n            (recur (allocate-eid report e (current-tx report)) (cons [op (current-tx report) a v] entities))\n\n            (and (ref? db a) (tx-id? v))\n            (recur (allocate-eid report v (current-tx report)) (cons [op e a (current-tx report)] entities))\n\n            (and (ref? db a) (tempid? v))\n            (if-some [resolved (get tempids v)]\n              (let [report' (update report ::value-tempids assoc resolved v)]\n                (recur report' (cons [op e a resolved] entities)))\n              (let [resolved (next-eid db)\n                    report'  (-> report\n                               (allocate-eid v resolved)\n                               (update ::value-tempids assoc resolved v))]\n                (recur report' es)))\n\n            (tempid? e)\n            (let [upserted-eid  (when (is-attr? db a :db.unique/identity)\n                                  (:e (first (-datoms db :avet [a v]))))\n                  allocated-eid (get tempids e)]\n              (if (and upserted-eid allocated-eid (not= upserted-eid allocated-eid))\n                (retry-with-tempid initial-report report initial-es e upserted-eid)\n                (let [eid (or upserted-eid allocated-eid (next-eid db))]\n                  (recur (allocate-eid report e eid) (cons [op eid a v] entities)))))\n\n            (and (not (::internal (meta entity)))\n              (tuple? db a))\n            (raise \"Can\u2019t modify tuple attrs directly: \" entity\n              {:error :transact/syntax, :tx-data entity})\n\n            (= op :db/add)\n            (recur (transact-add report entity) entities)\n\n            (and (= op :db/retract) (some? v))\n            (if-some [e (entid db e)]\n              (let [v (if (ref? db a) (entid-strict db v) v)]\n                (validate-attr a entity)\n                (validate-val v entity)\n                (if-some [old-datom (fsearch db [e a v])]\n                  (recur (transact-retract-datom report old-datom) entities)\n                  (recur report entities)))\n              (recur report entities))\n\n            (or (= op :db.fn/retractAttribute)\n                (= op :db/retract))\n            (if-some [e (entid db e)]\n              (let [_      (validate-attr a entity)\n                    datoms (vec (-search db [e a]))]\n                (recur (reduce transact-retract-datom report datoms)\n                       (concat (retract-components db datoms) entities)))\n              (recur report entities))\n\n            (or (= op :db.fn/retractEntity)\n                (= op :db/retractEntity))\n            (if-some [e (entid db e)]\n              (let [e-datoms (vec (-search db [e]))\n                    v-datoms (vec (mapcat (fn [a] (-search db [nil a e])) (-attrs-by db :db.type/ref)))]\n                (recur (reduce transact-retract-datom report (concat e-datoms v-datoms))\n                       (concat (retract-components db e-datoms) entities)))\n              (recur report entities))\n\n           :else\n           (raise \"Unknown operation at \" entity \", expected :db/add, :db/retract, :db.fn/call, :db.fn/retractAttribute, :db.fn/retractEntity or an ident corresponding to an installed transaction function (e.g. {:db/ident <keyword> :db/fn <Ifn>}, usage of :db/ident requires {:db/unique :db.unique/identity} in schema)\" {:error :transact/syntax, :operation op, :tx-data entity})))\n       \n       (datom? entity)\n       (let [[e a v tx added] entity]\n         (if added\n           (recur (transact-add report [:db/add e a v tx]) entities)\n           (recur report (cons [:db/retract e a v] entities))))\n\n       :else\n       (raise \"Bad entity type at \" entity \", expected map or vector\"\n              {:error :transact/syntax, :tx-data entity})))))\n"]}